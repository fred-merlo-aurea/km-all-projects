(function(b,a){a("kendo.list",["kendo.data","kendo.popup"],b);
}(function(){var a={id:"list",name:"List",category:"framework",depends:["data","popup"],hidden:true};
(function(b,J){var r=window.kendo,I=r.ui,L=I.Widget,s=r.keys,H=r.support,n=r.htmlEncode,c=r._activeElement,w=r.data.ObservableArray,o="id",g="change",j="k-state-focused",m="k-state-hover",u="k-i-loading",l="k-loading-hidden",x="open",h="close",f="cascade",D="select",E="selected",C="requestStart",B="requestEnd",M="width",i=b.extend,y=b.proxy,p=b.isArray,e=H.browser,q=e.msie&&e.version<9,z=/"/g,d={ComboBox:"DropDownList",DropDownList:"ComboBox"};
var t=r.ui.DataBoundWidget.extend({init:function(N,Q){var R=this,P=R.ns,O;
L.fn.init.call(R,N,Q);
N=R.element;
Q=R.options;
R._isSelect=N.is(D);
if(R._isSelect&&R.element[0].length){if(!Q.dataSource){Q.dataTextField=Q.dataTextField||"text";
Q.dataValueField=Q.dataValueField||"value";
}}R.ul=b('<ul unselectable="on" class="k-list k-reset"/>').attr({tabIndex:-1,"aria-hidden":true});
R.list=b("<div class='k-list-container'/>").append(R.ul).on("mousedown"+P,y(R._listMousedown,R));
O=N.attr(o);
if(O){R.list.attr(o,O+"-list");
R.ul.attr(o,O+"_listbox");
}R._header();
R._noData();
R._footer();
R._accessors();
R._initValue();
},options:{valuePrimitive:false,footerTemplate:"",headerTemplate:"",noDataTemplate:"No data found."},setOptions:function(N){L.fn.setOptions.call(this,N);
if(N&&N.enable!==J){N.enabled=N.enable;
}this._header();
this._noData();
this._footer();
this._renderFooter();
this._renderNoData();
},focus:function(){this._focused.focus();
},readonly:function(N){this._editable({readonly:N===J?true:N,disable:false});
},enable:function(N){this._editable({readonly:false,disable:!(N=N===J?true:N)});
},_listOptions:function(P){var Q=this;
var N=Q.options;
var R=N.virtual;
var O=y(Q._listBound,Q);
R=typeof R==="object"?R:{};
P=b.extend({autoBind:false,selectable:true,dataSource:Q.dataSource,click:y(Q._click,Q),change:y(Q._listChange,Q),activate:y(Q._activateItem,Q),deactivate:y(Q._deactivateItem,Q),dataBinding:function(){Q.trigger("dataBinding");
},dataBound:O,height:N.height,dataValueField:N.dataValueField,dataTextField:N.dataTextField,groupTemplate:N.groupTemplate,fixedGroupTemplate:N.fixedGroupTemplate,template:N.template},P,R);
if(!P.template){P.template="#:"+r.expr(P.dataTextField,"data")+"#";
}if(N.$angular){P.$angular=N.$angular;
}return P;
},_initList:function(){var O=this;
var N=O._listOptions({selectedItemChange:y(O._listChange,O)});
if(!O.options.virtual){O.listView=new r.ui.StaticList(O.ul,N);
}else{O.listView=new r.ui.VirtualList(O.ul,N);
}O.listView.bind("listBound",y(O._listBound,O));
O._setListValue();
},_setListValue:function(N){N=N||this.options.value;
if(N!==J){this.listView.value(N).done(y(this._updateSelectionState,this));
}},_updateSelectionState:b.noop,_listMousedown:function(N){if(!this.filterInput||this.filterInput[0]!==N.target){N.preventDefault();
}},_isFilterEnabled:function(){var N=this.options.filter;
return N&&N!=="none";
},_hideClear:function(){var N=this;
if(N._clear){this._clear.addClass(l);
}},_showClear:function(){var N=this;
if(N._clear){this._clear.removeClass(l);
}},_clearValue:function(){this.listView.value([]);
this._clearText();
this._accessor("");
if(this._isFilterEnabled()){this._filter({word:"",open:false});
}this._change();
},_clearText:function(){this.text("");
},_clearFilter:function(){if(!this.options.virtual){this.listView.bound(false);
}this._filterSource();
},_filterSource:function(P,Q){var T=this;
var R=T.options;
var N=T.dataSource;
var O=i({},N.filter()||{});
var S=A(O,R.dataTextField);
if((P||S)&&T.trigger("filtering",{filter:P})){return;
}O={filters:O.filters||[],logic:"and"};
if(P){O.filters.push(P);
}if(T._cascading){this.listView.setDSFilter(O);
}if(!Q){N.filter(O);
}else{N.read(N._mergeState({filter:O}));
}},_angularElement:function(O,N){if(!O){return;
}this.angular(N,function(){return{elements:O};
});
},_noData:function(){var N=b(this.noData);
var O=this.options.noDataTemplate;
this.angular("cleanup",function(){return{elements:N};
});
r.destroy(N);
N.remove();
if(!O){this.noData=null;
return;
}this.noData=b('<div class="k-nodata" style="display:none"><div></div></div>').appendTo(this.list);
this.noDataTemplate=typeof O!=="function"?r.template(O):O;
},_renderNoData:function(){var N=this.noData;
if(!N){return;
}this._angularElement(N,"cleanup");
N.children(":first").html(this.noDataTemplate({instance:this}));
this._angularElement(N,"compile");
},_toggleNoData:function(N){b(this.noData).toggle(N);
},_footer:function(){var N=b(this.footer);
var O=this.options.footerTemplate;
this._angularElement(N,"cleanup");
r.destroy(N);
N.remove();
if(!O){this.footer=null;
return;
}this.footer=b('<div class="k-footer"></div>').appendTo(this.list);
this.footerTemplate=typeof O!=="function"?r.template(O):O;
},_renderFooter:function(){var N=this.footer;
if(!N){return;
}this._angularElement(N,"cleanup");
N.html(this.footerTemplate({instance:this}));
this._angularElement(N,"compile");
},_header:function(){var N=b(this.header);
var P=this.options.headerTemplate;
this._angularElement(N,"cleanup");
r.destroy(N);
N.remove();
if(!P){this.header=null;
return;
}var O=typeof P!=="function"?r.template(P):P;
N=b(O({}));
this.header=N[0]?N:null;
this.list.prepend(N);
this._angularElement(this.header,"compile");
},_allowOpening:function(){return this.options.noDataTemplate||this.dataSource.flatView().length;
},_initValue:function(){var N=this,O=N.options.value;
if(O!==null){N.element.val(O);
}else{O=N._accessor();
N.options.value=O;
}N._old=O;
},_ignoreCase:function(){var P=this,O=P.dataSource.reader.model,N;
if(O&&O.fields){N=O.fields[P.options.dataTextField];
if(N&&N.type&&N.type!=="string"){P.options.ignoreCase=false;
}}},_focus:function(N){return this.listView.focus(N);
},_filter:function(Q){var R=this;
var S=R.options;
var P=S.ignoreCase;
var O=S.dataTextField;
var N={value:P?Q.word.toLowerCase():Q.word,field:O,operator:S.filter,ignoreCase:P};
R._open=Q.open;
R._filterSource(N);
},search:function(O){var N=this.options;
O=typeof O==="string"?O:this._inputValue();
clearTimeout(this._typingTimeout);
if(!N.enforceMinLength&&!O.length||O.length>=N.minLength){this._state="filter";
if(!this._isFilterEnabled()){this._searchByWord(O);
}else{this._filter({word:O,open:true});
}}},current:function(N){return this._focus(N);
},items:function(){return this.ul[0].children;
},destroy:function(){var O=this;
var N=O.ns;
L.fn.destroy.call(O);
O._unbindDataSource();
O.listView.destroy();
O.list.off(N);
O.popup.destroy();
if(O._form){O._form.off("reset",O._resetHandler);
}},dataItem:function(N){var O=this;
if(N===J){return O.listView.selectedDataItems()[0];
}if(typeof N!=="number"){if(O.options.virtual){return O.dataSource.getByUid(b(N).data("uid"));
}N=b(O.items()).index(N);
}return O.dataSource.flatView()[N];
},_activateItem:function(){var N=this.listView.focus();
if(N){this._focused.add(this.filterInput).attr("aria-activedescendant",N.attr("id"));
}},_deactivateItem:function(){this._focused.add(this.filterInput).removeAttr("aria-activedescendant");
},_accessors:function(){var R=this;
var N=R.element;
var P=R.options;
var O=r.getter;
var Q=N.attr(r.attr("text-field"));
var S=N.attr(r.attr("value-field"));
if(!P.dataTextField&&Q){P.dataTextField=Q;
}if(!P.dataValueField&&S){P.dataValueField=S;
}R._text=O(P.dataTextField);
R._value=O(P.dataValueField);
},_aria:function(O){var Q=this,P=Q.options,N=Q._focused.add(Q.filterInput);
if(P.suggest!==J){N.attr("aria-autocomplete",P.suggest?"both":"list");
}O=O?O+" "+Q.ul[0].id:Q.ul[0].id;
N.attr("aria-owns",O);
Q.ul.attr("aria-live",!Q._isFilterEnabled()?"off":"polite");
},_blur:function(){var N=this;
N._change();
N.close();
},_change:function(){var P=this;
var N=P.selectedIndex;
var O=P.options.value;
var R=P.value();
var Q;
if(P._isSelect&&!P.listView.bound()&&O){R=O;
}if(R!==K(P._old,typeof R)){Q=true;
}else{if(N!==J&&N!==P._oldIndex){Q=true;
}}if(Q){P._old=R;
P._oldIndex=N;
if(!P._typing){P.element.trigger(g);
}P.trigger(g);
}P.typing=false;
},_data:function(){return this.dataSource.view();
},_enable:function(){var P=this,O=P.options,N=P.element.is("[disabled]");
if(O.enable!==J){O.enabled=O.enable;
}if(!O.enabled||N){P.enable(false);
}else{P.readonly(P.element.is("[readonly]"));
}},_dataValue:function(N){var O=this._value(N);
if(O===J){O=this._text(N);
}return O;
},_offsetHeight:function(){var N=0;
var O=this.listView.content.prevAll(":visible");
O.each(function(){var P=b(this);
if(P.hasClass("k-list-filter")){N+=P.children().outerHeight();
}else{N+=P.outerHeight();
}});
return N;
},_height:function(P){var T=this;
var Q=T.list;
var O=T.options.height;
var U=T.popup.visible();
var R;
var S;
var N;
if(P||T.options.noDataTemplate){S=Q.add(Q.parent(".k-animation-container")).show();
if(!Q.is(":visible")){S.hide();
return;
}O=T.listView.content[0].scrollHeight>O?O:"auto";
S.height(O);
if(O!=="auto"){R=T._offsetHeight();
N=b(T.footer).outerHeight()||0;
O=O-R-N;
}T.listView.content.height(O);
if(!U){S.hide();
}}return O;
},_adjustListWidth:function(){var P=this.list,Q=P[0].style.width,R=this.wrapper,N,O;
if(!P.data(M)&&Q){return;
}N=window.getComputedStyle?window.getComputedStyle(R[0],null):0;
O=parseFloat(N&&N.width)||R.outerWidth();
if(N&&e.msie){O+=parseFloat(N.paddingLeft)+parseFloat(N.paddingRight)+parseFloat(N.borderLeftWidth)+parseFloat(N.borderRightWidth);
}if(P.css("box-sizing")!=="border-box"){Q=O-(P.outerWidth()-P.width());
}else{Q=O;
}P.css({fontFamily:R.css("font-family"),width:this.options.autoWidth?"auto":Q,minWidth:Q}).data(M,Q);
return true;
},_openHandler:function(N){this._adjustListWidth();
if(this.trigger(x)){N.preventDefault();
}else{this._focused.attr("aria-expanded",true);
this.ul.attr("aria-hidden",false);
}},_closeHandler:function(N){if(this.trigger(h)){N.preventDefault();
}else{this._focused.attr("aria-expanded",false);
this.ul.attr("aria-hidden",true);
}},_focusItem:function(){var P=this.listView;
var N=P.focus();
var O=P.select();
O=O[O.length-1];
if(O===J&&this.options.highlightFirst&&!N){O=0;
}if(O!==J){P.focus(O);
}else{P.scrollToIndex(0);
}},_calculateGroupPadding:function(O){var P=this.ul.children(".k-first:first");
var N=this.listView.content.prev(".k-group-header");
var Q=0;
if(N[0]&&N[0].style.display!=="none"){if(O!=="auto"){Q=r.support.scrollbar();
}Q+=parseFloat(P.css("border-right-width"),10)+parseFloat(P.children(".k-group").css("padding-right"),10);
N.css("padding-right",Q);
}},_calculatePopupHeight:function(N){var O=this._height(this.dataSource.flatView().length||N);
this._calculateGroupPadding(O);
},_resizePopup:function(N){if(this.options.virtual){return;
}if(!this.popup.element.is(":visible")){this.popup.one("open",function(O){return y(function(){this._calculatePopupHeight(O);
},this);
}.call(this,N));
}else{this._calculatePopupHeight(N);
}},_popup:function(){var N=this;
N.popup=new I.Popup(N.list,i({},N.options.popup,{anchor:N.wrapper,open:y(N._openHandler,N),close:y(N._closeHandler,N),animation:N.options.animation,isRtl:H.isRtl(N.wrapper)}));
},_makeUnselectable:function(){if(q){this.list.find("*").not(".k-textbox").attr("unselectable","on");
}},_toggleHover:function(N){b(N.currentTarget).toggleClass(m,N.type==="mouseenter");
},_toggle:function(N,O){var P=this;
var Q=H.mobileOS&&(H.touch||H.MSPointers||H.pointers);
N=N!==J?N:!P.popup.visible();
if(!O&&!Q&&P._focused[0]!==c()){P._prevent=true;
P._focused.focus();
P._prevent=false;
}P[N?x:h]();
},_triggerCascade:function(){var N=this;
if(!N._cascadeTriggered||N._old!==N.value()||N._oldIndex!==N.selectedIndex){N._cascadeTriggered=true;
N.trigger(f,{userTriggered:N._userTriggered});
}},_triggerChange:function(){if(this._valueBeforeCascade!==this.value()){this.trigger(g);
}},_unbindDataSource:function(){var N=this;
N.dataSource.unbind(C,N._requestStartHandler).unbind(B,N._requestEndHandler).unbind("error",N._errorHandler);
},requireValueMapper:function(O,P){var N=(O.value instanceof Array?O.value.length:O.value)||(P instanceof Array?P.length:P);
if(N&&O.virtual&&typeof O.virtual.valueMapper!=="function"){throw new Error("ValueMapper is not provided while the value is being set. See http://docs.telerik.com/kendo-ui/controls/editors/combobox/virtualization#the-valuemapper-function");
}}});
function K(O,N){if(O!==J&&O!==""&&O!==null){if(N==="boolean"){O=Boolean(O);
}else{if(N==="number"){O=Number(O);
}else{if(N==="string"){O=O.toString();
}}}}return O;
}i(t,{inArray:function(P,Q){var N,O,R=Q.children;
if(!P||P.parentNode!==Q){return -1;
}for(N=0,O=R.length;
N<O;
N++){if(P===R[N]){return N;
}}return -1;
},unifyType:K});
r.ui.List=t;
I.Select=t.extend({init:function(N,O){t.fn.init.call(this,N,O);
this._initial=this.element.val();
},setDataSource:function(N){var P=this;
var O;
P.options.dataSource=N;
P._dataSource();
if(P.listView.bound()){P._initialIndex=null;
}P.listView.setDataSource(P.dataSource);
if(P.options.autoBind){P.dataSource.fetch();
}O=P._parentWidget();
if(O){P._cascadeSelect(O);
}},close:function(){this.popup.close();
},select:function(N){var O=this;
if(N===J){return O.selectedIndex;
}else{O._select(N);
O._old=O._accessor();
O._oldIndex=O.selectedIndex;
}},_accessor:function(O,N){return this[this._isSelect?"_accessorSelect":"_accessorInput"](O,N);
},_accessorInput:function(O){var N=this.element[0];
if(O===J){return N.value;
}else{if(O===null){O="";
}N.value=O;
}},_accessorSelect:function(Q,P){var N=this.element[0];
var O;
if(Q===J){return k(N).value||"";
}k(N).selected=false;
if(P===J){P=-1;
}O=Q!==null&&Q!=="";
if(O&&P==-1){this._custom(Q);
}else{if(Q){N.value=Q;
}else{N.selectedIndex=P;
}}},_custom:function(Q){var P=this;
var O=P.element;
var N=P._customOption;
if(!N){N=b("<option/>");
P._customOption=N;
O.append(N);
}N.text(Q);
N[0].selected=true;
},_hideBusy:function(){var N=this;
clearTimeout(N._busy);
N._arrow.removeClass(u);
N._focused.attr("aria-busy",false);
N._busy=null;
N._showClear();
},_showBusy:function(){var N=this;
N._request=true;
if(N._busy){return;
}N._busy=setTimeout(function(){if(N._arrow){N._focused.attr("aria-busy",true);
N._arrow.addClass(u);
N._hideClear();
}},100);
},_requestEnd:function(){this._request=false;
this._hideBusy();
},_dataSource:function(){var R=this,O=R.element,Q=R.options,N=Q.dataSource||{},P;
N=b.isArray(N)?{data:N}:N;
if(R._isSelect){P=O[0].selectedIndex;
if(P>-1){Q.index=P;
}N.select=O;
N.fields=[{field:Q.dataTextField},{field:Q.dataValueField}];
}if(R.dataSource){R._unbindDataSource();
}else{R._requestStartHandler=y(R._showBusy,R);
R._requestEndHandler=y(R._requestEnd,R);
R._errorHandler=y(R._hideBusy,R);
}R.dataSource=r.data.DataSource.create(N).bind(C,R._requestStartHandler).bind(B,R._requestEndHandler).bind("error",R._errorHandler);
},_firstItem:function(){this.listView.focusFirst();
},_lastItem:function(){this.listView.focusLast();
},_nextItem:function(){this.listView.focusNext();
},_prevItem:function(){this.listView.focusPrev();
},_move:function(S){var W=this;
var U=W.listView;
var T=S.keyCode;
var R=T===s.DOWN;
var P;
var V;
var O;
if(T===s.UP||R){if(S.altKey){W.toggle(R);
}else{if(!U.bound()){if(!W._fetch){W.dataSource.one(g,function(){W._fetch=false;
W._move(S);
});
W._fetch=true;
W._filterSource();
}S.preventDefault();
return true;
}O=W._focus();
if(!W._fetch&&(!O||O.hasClass("k-state-selected"))){if(R){W._nextItem();
if(!W._focus()){W._lastItem();
}}else{W._prevItem();
if(!W._focus()){W._firstItem();
}}}P=U.dataItemByIndex(U.getElementIndex(W._focus()));
if(W.trigger(D,{dataItem:P,item:W._focus()})){W._focus(O);
return;
}W._select(W._focus(),true);
if(!W.popup.visible()){W._blur();
}}S.preventDefault();
V=true;
}else{if(T===s.ENTER||T===s.TAB){if(W.popup.visible()){S.preventDefault();
}O=W._focus();
P=W.dataItem();
if(!W.popup.visible()&&(!P||W.text()!==W._text(P))){O=null;
}var N=W.filterInput&&W.filterInput[0]===c();
if(O){P=U.dataItemByIndex(U.getElementIndex(O));
if(W.trigger(D,{dataItem:P,item:O})){return;
}W._select(O);
}else{if(W.input){W._accessor(W.input.val());
W.listView.value(W.input.val());
}}if(W._focusElement){W._focusElement(W.wrapper);
}if(N&&T===s.TAB){W.wrapper.focusout();
}else{W._blur();
}W.close();
V=true;
}else{if(T===s.ESC){if(W.popup.visible()){S.preventDefault();
}W.close();
V=true;
}else{if(W.popup.visible()&&(T===s.PAGEDOWN||T===s.PAGEUP)){S.preventDefault();
var Q=T===s.PAGEDOWN?1:-1;
U.scrollWith(Q*U.screenHeight());
V=true;
}}}}return V;
},_fetchData:function(){var O=this;
var N=!!O.dataSource.view().length;
if(O._request||O.options.cascadeFrom){return;
}if(!O.listView.bound()&&!O._fetch&&!N){O._fetch=true;
O.dataSource.fetch().done(function(){O._fetch=false;
});
}},_options:function(N,W,Z){var Y=this,R=Y.element,S=R[0],U=N.length,X="",V,O,P,Q,T=0;
if(W){X=W;
}for(;
T<U;
T++){V="<option";
O=N[T];
P=Y._text(O);
Q=Y._value(O);
if(Q!==J){Q+="";
if(Q.indexOf('"')!==-1){Q=Q.replace(z,"&quot;");
}V+=' value="'+Q+'"';
}V+=">";
if(P!==J){V+=n(P);
}V+="</option>";
X+=V;
}R.html(X);
if(Z!==J){S.value=Z;
if(S.value&&!Z){S.selectedIndex=-1;
}}if(S.selectedIndex!==-1){V=k(S);
if(V){V.setAttribute(E,E);
}}},_reset:function(){var Q=this,N=Q.element,P=N.attr("form"),O=P?b("#"+P):N.closest("form");
if(O[0]){Q._resetHandler=function(){setTimeout(function(){Q.value(Q._initial);
});
};
Q._form=O.on("reset",Q._resetHandler);
}},_parentWidget:function(){var N=this.options.name;
if(!this.options.cascadeFrom){return;
}var P=b("#"+this.options.cascadeFrom);
var O=P.data("kendo"+N);
if(!O){O=P.data("kendo"+d[N]);
}return O;
},_cascade:function(){var Q=this;
var O=Q.options;
var N=O.cascadeFrom;
var P;
if(N){P=Q._parentWidget();
Q._cascadeHandlerProxy=y(Q._cascadeHandler,Q);
if(!P){return;
}O.autoBind=false;
P.bind("set",function(){Q.one("set",function(R){Q._selectedValue=R.value;
});
});
P.first(f,Q._cascadeHandlerProxy);
if(P.listView.bound()){Q._toggleCascadeOnFocus();
Q._cascadeSelect(P);
}else{P.one("dataBound",function(){Q._toggleCascadeOnFocus();
});
if(!P.value()){Q.enable(false);
}}}},_toggleCascadeOnFocus:function(){var O=this;
var N=O._parentWidget();
N._focused.add(N.filterInput).bind("focus",function(){N.unbind(f,O._cascadeHandlerProxy);
N.first(g,O._cascadeHandlerProxy);
});
N._focused.add(N.filterInput).bind("focusout",function(){N.unbind(g,O._cascadeHandlerProxy);
N.first(f,O._cascadeHandlerProxy);
});
},_cascadeHandler:function(N){var O=this._parentWidget();
var P=this.value();
this._userTriggered=N.userTriggered;
if(this.listView.bound()){this._clearSelection(O,true);
}this._cascadeSelect(O,P);
},_cascadeChange:function(N){var O=this;
var P=O._accessor()||O._selectedValue;
O._selectedValue=null;
if(O._userTriggered){O._clearSelection(N,true);
}else{if(P){if(P!==O.listView.value()[0]){O.value(P);
}if(!O.dataSource.view()[0]||O.selectedIndex===-1){O._clearSelection(N,true);
}}else{if(O.dataSource.flatView().length){O.select(O.options.index);
}}}O.enable();
O._triggerCascade();
O._triggerChange();
O._userTriggered=false;
},_cascadeSelect:function(R,T){var S=this;
var N=R.dataItem();
var P=N?R._value(N):null;
var U=S.options.cascadeFromField||R.options.dataValueField;
var O;
S._valueBeforeCascade=T!==J?T:S.value();
if(P||P===0){O=S.dataSource.filter()||{};
A(O,U);
var Q=function(){S.unbind("dataBound",Q);
S._cascadeChange(R);
};
S.first("dataBound",Q);
S._cascading=true;
S._filterSource({field:U,operator:"eq",value:P});
S._cascading=false;
}else{S.enable(false);
S._clearSelection(R);
S._triggerCascade();
S._triggerChange();
S._userTriggered=false;
}}});
var F=".StaticList";
var G=r.ui.DataBoundWidget.extend({init:function(N,O){L.fn.init.call(this,N,O);
this.element.attr("role","listbox").on("click"+F,"li",y(this._click,this)).on("mouseenter"+F,"li",function(){b(this).addClass(m);
}).on("mouseleave"+F,"li",function(){b(this).removeClass(m);
});
this.content=this.element.wrap("<div class='k-list-scroller' unselectable='on'></div>").parent();
this.header=this.content.before('<div class="k-group-header" style="display:none"></div>').prev();
this.bound(false);
this._optionID=r.guid();
this._selectedIndices=[];
this._view=[];
this._dataItems=[];
this._values=[];
var P=this.options.value;
if(P){this._values=b.isArray(P)?P.slice(0):[P];
}this._getter();
this._templates();
this.setDataSource(this.options.dataSource);
this._onScroll=y(function(){var Q=this;
clearTimeout(Q._scrollId);
Q._scrollId=setTimeout(function(){Q._renderHeader();
},50);
},this);
},options:{name:"StaticList",dataValueField:null,valuePrimitive:false,selectable:true,template:null,groupTemplate:null,fixedGroupTemplate:null},events:["click",g,"activate","deactivate","dataBinding","dataBound","selectedItemChange"],setDataSource:function(O){var P=this;
var N=O||{};
var Q;
N=b.isArray(N)?{data:N}:N;
N=r.data.DataSource.create(N);
if(P.dataSource){P.dataSource.unbind(g,P._refreshHandler);
Q=P.value();
P.value([]);
P.bound(false);
P.value(Q);
}else{P._refreshHandler=y(P.refresh,P);
}P.setDSFilter(N.filter());
P.dataSource=N.bind(g,P._refreshHandler);
P._fixedHeader();
},skip:function(){return this.dataSource.skip();
},setOptions:function(N){L.fn.setOptions.call(this,N);
this._getter();
this._templates();
this._render();
},destroy:function(){this.element.off(F);
if(this._refreshHandler){this.dataSource.unbind(g,this._refreshHandler);
}clearTimeout(this._scrollId);
L.fn.destroy.call(this);
},dataItemByIndex:function(N){return this.dataSource.flatView()[N];
},screenHeight:function(){return this.content[0].clientHeight;
},scrollToIndex:function(N){var O=this.element[0].children[N];
if(O){this.scroll(O);
}},scrollWith:function(N){this.content.scrollTop(this.content.scrollTop()+N);
},scroll:function(R){if(!R){return;
}if(R[0]){R=R[0];
}var O=this.content[0],T=R.offsetTop,S=R.offsetHeight,Q=O.scrollTop,P=O.clientHeight,N=T+S;
if(Q>T){Q=T;
}else{if(N>Q+P){Q=N-P;
}}O.scrollTop=Q;
},selectedDataItems:function(N){if(N===J){return this._dataItems.slice();
}this._dataItems=N;
this._values=this._getValues(N);
},_getValues:function(N){var O=this._valueGetter;
return b.map(N,function(P){return O(P);
});
},focusNext:function(){var N=this.focus();
if(!N){N=0;
}else{N=N.next();
}this.focus(N);
},focusPrev:function(){var N=this.focus();
if(!N){N=this.element[0].children.length-1;
}else{N=N.prev();
}this.focus(N);
},focusFirst:function(){this.focus(this.element[0].children[0]);
},focusLast:function(){this.focus(this.element[0].children[this.element[0].children.length-1]);
},focus:function(N){var Q=this;
var P=Q._optionID;
var O;
if(N===J){return Q._current;
}N=Q._get(N);
N=N[N.length-1];
N=b(this.element[0].children[N]);
if(Q._current){Q._current.removeClass(j).removeAttr("aria-selected").removeAttr(o);
Q.trigger("deactivate");
}O=!!N[0];
if(O){N.addClass(j);
Q.scroll(N);
N.attr("id",P);
}Q._current=O?N:null;
Q.trigger("activate");
},focusIndex:function(){return this.focus()?this.focus().index():J;
},skipUpdate:function(N){this._skipUpdate=N;
},select:function(P){var V=this;
var S=V.options.selectable;
var U=S!=="multiple"&&S!==false;
var T=V._selectedIndices;
var N=[];
var Q=[];
var R;
if(P===J){return T.slice();
}P=V._get(P);
if(P.length===1&&P[0]===-1){P=[];
}var O=V.isFiltered();
if(O&&!U&&V._deselectFiltered(P)){return;
}if(U&&!O&&b.inArray(P[P.length-1],T)!==-1){if(V._dataItems.length&&V._view.length){V._dataItems=[V._view[T[0]].item];
}return;
}R=V._deselect(P);
Q=R.removed;
P=R.indices;
if(P.length){if(U){P=[P[P.length-1]];
}N=V._select(P);
}if(N.length||Q.length){V._valueComparer=null;
V.trigger(g,{added:N,removed:Q});
}},removeAt:function(N){this._selectedIndices.splice(N,1);
this._values.splice(N,1);
this._valueComparer=null;
return{position:N,dataItem:this._dataItems.splice(N,1)[0]};
},setValue:function(N){N=b.isArray(N)||N instanceof w?N.slice(0):[N];
this._values=N;
this._valueComparer=null;
},value:function(Q){var P=this;
var N=P._valueDeferred;
var O;
if(Q===J){return P._values.slice();
}P.setValue(Q);
if(!N||N.state()==="resolved"){P._valueDeferred=N=b.Deferred();
}if(P.bound()){O=P._valueIndices(P._values);
if(P.options.selectable==="multiple"){P.select(-1);
}P.select(O);
N.resolve();
}P._skipUpdate=false;
return N;
},items:function(){return this.element.children(".k-item");
},_click:function(N){if(!N.isDefaultPrevented()){if(!this.trigger("click",{item:b(N.currentTarget)})){this.select(N.currentTarget);
}}},_valueExpr:function(S,T){var R=this;
var P=0;
var N;
var O;
var Q=[];
if(!R._valueComparer||R._valueType!==S){R._valueType=S;
for(;
P<T.length;
P++){Q.push(K(T[P],S));
}N="for (var idx = 0; idx < "+Q.length+"; idx++) { if (current === values[idx]) {   return idx; }} return -1;";
O=new Function("current","values",N);
R._valueComparer=function(U){return O(U,Q);
};
}return R._valueComparer;
},_dataItemPosition:function(N,Q){var O=this._valueGetter(N);
var P=this._valueExpr(typeof O,Q);
return P(O);
},_getter:function(){this._valueGetter=r.getter(this.options.dataValueField);
},_deselect:function(R){var Y=this;
var N=Y.element[0].children;
var V=Y.options.selectable;
var X=Y._selectedIndices;
var O=Y._dataItems;
var Z=Y._values;
var T=[];
var P=0;
var S;
var Q,W;
var U=0;
R=R.slice();
if(V===true||!R.length){for(;
P<X.length;
P++){b(N[X[P]]).removeClass("k-state-selected");
T.push({position:P,dataItem:O[P]});
}Y._values=[];
Y._dataItems=[];
Y._selectedIndices=[];
}else{if(V==="multiple"){for(;
P<R.length;
P++){Q=R[P];
if(!b(N[Q]).hasClass("k-state-selected")){continue;
}for(S=0;
S<X.length;
S++){W=X[S];
if(W===Q){b(N[W]).removeClass("k-state-selected");
T.push({position:S+U,dataItem:O.splice(S,1)[0]});
X.splice(S,1);
R.splice(P,1);
Z.splice(S,1);
U+=1;
P-=1;
S-=1;
break;
}}}}}return{indices:R,removed:T};
},_deselectFiltered:function(R){var N=this.element[0].children;
var O,Q,S;
var T=[];
var P=0;
for(;
P<R.length;
P++){Q=R[P];
O=this._view[Q].item;
S=this._dataItemPosition(O,this._values);
if(S>-1){T.push(this.removeAt(S));
b(N[Q]).removeClass("k-state-selected");
}}if(T.length){this.trigger(g,{added:[],removed:T});
return true;
}return false;
},_select:function(T){var U=this;
var O=U.element[0].children;
var P=U._view;
var Q,S;
var N=[];
var R=0;
if(T[T.length-1]!==-1){U.focus(T);
}for(;
R<T.length;
R++){S=T[R];
Q=P[S];
if(S===-1||!Q){continue;
}Q=Q.item;
U._selectedIndices.push(S);
U._dataItems.push(Q);
U._values.push(U._valueGetter(Q));
b(O[S]).addClass("k-state-selected").attr("aria-selected",true);
N.push({dataItem:Q});
}return N;
},getElementIndex:function(N){return b(N).data("offset-index");
},_get:function(N){if(typeof N==="number"){N=[N];
}else{if(!p(N)){N=this.getElementIndex(N);
N=[N!==J?N:-1];
}}return N;
},_template:function(){var P=this;
var N=P.options;
var O=N.template;
if(!O){O=r.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+r.expr(N.dataTextField,"data")+"}</li>",{useWithBlock:false});
}else{O=r.template(O);
O=function(Q){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+O(Q)+"</li>";
};
}return O;
},_templates:function(){var P;
var O=this.options;
var Q={template:O.template,groupTemplate:O.groupTemplate,fixedGroupTemplate:O.fixedGroupTemplate};
for(var N in Q){P=Q[N];
if(P&&typeof P!=="function"){Q[N]=r.template(P);
}}this.templates=Q;
},_normalizeIndices:function(O){var P=[];
var N=0;
for(;
N<O.length;
N++){if(O[N]!==J){P.push(O[N]);
}}return P;
},_valueIndices:function(R,Q){var N=this._view;
var O=0;
var P;
Q=Q?Q.slice():[];
if(!R.length){return[];
}for(;
O<N.length;
O++){P=this._dataItemPosition(N[O].item,R);
if(P!==-1){Q[P]=O;
}}return this._normalizeIndices(Q);
},_firstVisibleItem:function(){var O=this.element[0];
var N=this.content[0];
var T=N.scrollTop;
var R=b(O.children[0]).height();
var S=Math.floor(T/R)||0;
var Q=O.children[S]||O.lastChild;
var P=Q.offsetTop<T;
while(Q){if(P){if(Q.offsetTop+R>T||!Q.nextSibling){break;
}Q=Q.nextSibling;
}else{if(Q.offsetTop<=T||!Q.previousSibling){break;
}Q=Q.previousSibling;
}}return this._view[b(Q).data("offset-index")];
},_fixedHeader:function(){if(this.isGrouped()&&this.templates.fixedGroupTemplate){this.header.show();
this.content.scroll(this._onScroll);
}else{this.header.hide();
this.content.off("scroll",this._onScroll);
}},_renderHeader:function(){var N=this.templates.fixedGroupTemplate;
if(!N){return;
}var O=this._firstVisibleItem();
if(O){this.header.html(N(O.group));
}},_renderItem:function(N){var P='<li tabindex="-1" role="option" unselectable="on" class="k-item';
var O=N.item;
var Q=N.index!==0;
var R=N.selected;
if(Q&&N.newGroup){P+=" k-first";
}if(R){P+=" k-state-selected";
}P+='"'+(R?' aria-selected="true"':"")+' data-offset-index="'+N.index+'">';
P+=this.templates.template(O);
if(Q&&N.newGroup){P+='<div class="k-group">'+this.templates.groupTemplate(N.group)+"</div>";
}return P+"</li>";
},_render:function(){var Q="";
var R=0;
var S=0;
var N;
var O=[];
var X=this.dataSource.view();
var W=this.value();
var P,V,U;
var T=this.isGrouped();
if(T){for(R=0;
R<X.length;
R++){P=X[R];
V=true;
for(U=0;
U<P.items.length;
U++){N={selected:this._selected(P.items[U],W),item:P.items[U],group:P.value,newGroup:V,index:S};
O[S]=N;
S+=1;
Q+=this._renderItem(N);
V=false;
}}}else{for(R=0;
R<X.length;
R++){N={selected:this._selected(X[R],W),item:X[R],index:R};
O[R]=N;
Q+=this._renderItem(N);
}}this._view=O;
this.element[0].innerHTML=Q;
if(T&&O.length){this._renderHeader();
}},_selected:function(N,P){var O=!this.isFiltered()||this.options.selectable==="multiple";
return O&&this._dataItemPosition(N,P)!==-1;
},setDSFilter:function(N){this._lastDSFilter=i({},N);
},isFiltered:function(){if(!this._lastDSFilter){this.setDSFilter(this.dataSource.filter());
}return !r.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter);
},refresh:function(O){var S=this;
var N=O&&O.action;
var R=S.options.skipUpdateOnBind;
var P=N==="itemchange";
var Q;
S.trigger("dataBinding");
S._angularItems("cleanup");
S._fixedHeader();
S._render();
S.bound(true);
if(P||N==="remove"){Q=v(S._dataItems,O.items);
if(Q.changed.length){if(P){S.trigger("selectedItemChange",{items:Q.changed});
}else{S.value(S._getValues(Q.unchanged));
}}}else{if(S.isFiltered()||S._skipUpdate){S.focus(0);
if(S._skipUpdate){S._skipUpdate=false;
S._selectedIndices=S._valueIndices(S._values,S._selectedIndices);
}}else{if(!R&&(!N||N==="add")){S.value(S._values);
}}}if(S._valueDeferred){S._valueDeferred.resolve();
}S._angularItems("compile");
S.trigger("dataBound");
},bound:function(N){if(N===J){return this._bound;
}this._bound=N;
},isGrouped:function(){return(this.dataSource.group()||[]).length;
}});
I.plugin(G);
function k(O){var N=O.selectedIndex;
return N>-1?O.options[N]:{};
}function v(U,S){var R=S.length;
var V=U.length;
var O;
var P;
var Q,T;
var N=[];
var W=[];
if(V){for(Q=0;
Q<V;
Q++){O=U[Q];
P=false;
for(T=0;
T<R;
T++){if(O===S[T]){P=true;
N.push({index:Q,item:O});
break;
}}if(!P){W.push(O);
}}}return{changed:N,unchanged:W};
}function A(N,O){var P;
var Q=false;
if(N.filters){P=b.grep(N.filters,function(R){Q=A(R,O);
if(R.filters){return R.filters.length;
}else{return R.field!=O;
}});
if(!Q&&N.filters.length!==P.length){Q=true;
}N.filters=P;
}return Q;
}}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
