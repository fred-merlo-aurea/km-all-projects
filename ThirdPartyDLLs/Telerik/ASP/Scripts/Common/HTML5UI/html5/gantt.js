(function(b,a){a("util/main",["kendo.core"],b);
}(function(){(function(){var q=Math,n=window.kendo,f=n.deepExtend;
var i=q.PI/180,r=Number.MAX_VALUE,u=-Number.MAX_VALUE,N="undefined";
function g(P){return typeof P!==N;
}function G(R,Q){var P=x(Q);
return q.round(R*P)/P;
}function x(P){if(P){return q.pow(10,P);
}else{return 1;
}}function p(R,Q,P){return q.max(q.min(R,P),Q);
}function y(P){return P*i;
}function h(P){return P/i;
}function l(P){return typeof P==="number"&&!isNaN(P);
}function O(Q,P){return g(Q)?Q:P;
}function K(P){return P*P;
}function w(Q){var R=[];
for(var P in Q){R.push(P+Q[P]);
}return R.sort().join("");
}function j(R){var P=2166136261;
for(var Q=0;
Q<R.length;
++Q){P+=(P<<1)+(P<<4)+(P<<7)+(P<<8)+(P<<24);
P^=R.charCodeAt(Q);
}return P>>>0;
}function k(P){return j(w(P));
}var v=Date.now;
if(!v){v=function(){return new Date().getTime();
};
}function c(P){var R=P.length,Q,T=r,S=u;
for(Q=0;
Q<R;
Q++){S=q.max(S,P[Q]);
T=q.min(T,P[Q]);
}return{min:T,max:S};
}function e(P){return c(P).min;
}function d(P){return c(P).max;
}function J(P){return H(P).min;
}function I(P){return H(P).max;
}function H(P){var T=r,S=u;
for(var Q=0,R=P.length;
Q<R;
Q++){var U=P[Q];
if(U!==null&&isFinite(U)){T=q.min(T,U);
S=q.max(S,U);
}}return{min:T===r?undefined:T,max:S===u?undefined:S};
}function o(P){if(P){return P[P.length-1];
}}function a(P,Q){P.push.apply(P,Q);
return P;
}function E(P){return n.template(P,{useWithBlock:false,paramName:"d"});
}function A(P,Q){return g(Q)&&Q!==null?" "+P+"='"+Q+"' ":"";
}function z(P){var R="";
for(var Q=0;
Q<P.length;
Q++){R+=A(P[Q][0],P[Q][1]);
}return R;
}function D(P){var R="";
for(var Q=0;
Q<P.length;
Q++){var S=P[Q][1];
if(g(S)){R+=P[Q][0]+":"+S+";";
}}if(R!==""){return R;
}}function C(P){if(typeof P!=="string"){P+="px";
}return P;
}function B(R){var S=[];
if(R){var Q=n.toHyphens(R).split("-");
for(var P=0;
P<Q.length;
P++){S.push("k-pos-"+Q[P]);
}}return S.join(" ");
}function m(P){return P===""||P===null||P==="none"||P==="transparent"||!g(P);
}function b(Q){var P={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1000:"m"};
var S=[1000,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];
var R="";
while(Q>0){if(Q<S[0]){S.shift();
}else{R+=P[S[0]];
Q-=S[0];
}}return R;
}function F(S){S=S.toLowerCase();
var P={i:1,v:5,x:10,l:50,c:100,d:500,m:1000};
var U=0,R=0;
for(var Q=0;
Q<S.length;
++Q){var T=P[S.charAt(Q)];
if(!T){return null;
}U+=T;
if(T>R){U-=2*R;
}R=T;
}return U;
}function s(Q){var P=Object.create(null);
return function(){var S="";
for(var R=arguments.length;
--R>=0;
){S+=":"+arguments[R];
}if(S in P){return P[S];
}return Q.apply(this,arguments);
};
}function L(T){var S=[],P=0,R=T.length,U,Q;
while(P<R){U=T.charCodeAt(P++);
if(U>=55296&&U<=56319&&P<R){Q=T.charCodeAt(P++);
if((Q&64512)==56320){S.push(((U&1023)<<10)+(Q&1023)+65536);
}else{S.push(U);
P--;
}}else{S.push(U);
}}return S;
}function M(P){return P.map(function(R){var Q="";
if(R>65535){R-=65536;
Q+=String.fromCharCode(R>>>10&1023|55296);
R=56320|R&1023;
}Q+=String.fromCharCode(R);
return Q;
}).join("");
}function t(P,Q){if(P.length<2){return P.slice();
}function R(T,V){var Y=[],U=0,W=0,X=0;
while(U<T.length&&W<V.length){if(Q(T[U],V[W])<=0){Y[X++]=T[U++];
}else{Y[X++]=V[W++];
}}if(U<T.length){Y.push.apply(Y,T.slice(U));
}if(W<V.length){Y.push.apply(Y,V.slice(W));
}return Y;
}return function S(T){if(T.length<=1){return T;
}var V=Math.floor(T.length/2);
var U=T.slice(0,V);
var W=T.slice(V);
U=S(U);
W=S(W);
return R(U,W);
}(P);
}f(n,{util:{MAX_NUM:r,MIN_NUM:u,append:a,arrayLimits:c,arrayMin:e,arrayMax:d,defined:g,deg:h,hashKey:j,hashObject:k,isNumber:l,isTransparent:m,last:o,limitValue:p,now:v,objectKey:w,round:G,rad:y,renderAttr:A,renderAllAttr:z,renderPos:B,renderSize:C,renderStyle:D,renderTemplate:E,sparseArrayLimits:H,sparseArrayMin:J,sparseArrayMax:I,sqr:K,valueOrDefault:O,romanToArabic:F,arabicToRoman:b,memoize:s,ucs2encode:M,ucs2decode:L,mergeSort:t}});
n.drawing.util=n.util;
n.dataviz.util=n.util;
}());
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("util/text-metrics",["kendo.core","util/main"],b);
}(function(){(function(a){var e=document,f=window.kendo,b=f.Class,k=f.util,d=k.defined;
var h=b.extend({init:function(m){this._size=m;
this._length=0;
this._map={};
},put:function(n,q){var o=this,p=o._map,m={key:n,value:q};
p[n]=m;
if(!o._head){o._head=o._tail=m;
}else{o._tail.newer=m;
m.older=o._tail;
o._tail=m;
}if(o._length>=o._size){p[o._head.key]=null;
o._head=o._head.newer;
o._head.older=null;
}else{o._length++;
}},get:function(n){var o=this,m=o._map[n];
if(m){if(m===o._head&&m!==o._tail){o._head=m.newer;
o._head.older=null;
}if(m!==o._tail){if(m.older){m.older.newer=m.newer;
m.newer.older=m.older;
}m.older=o._tail;
m.newer=null;
o._tail.newer=m;
o._tail=m;
}return m.value;
}}});
var c=a("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;' />")[0];
function l(){return{width:0,height:0,baseline:0};
}var j=b.extend({init:function(m){this._cache=new h(1000);
this._initOptions(m);
},options:{baselineMarkerSize:1},measure:function(v,t,n){if(!v){return l();
}var u=k.objectKey(t),p=k.hashKey(v+u),o=this._cache.get(p);
if(o){return o;
}var s=l();
var r=n?n:c;
var m=this._baselineMarker().cloneNode(false);
for(var q in t){var w=t[q];
if(d(w)){r.style[q]=w;
}}a(r).text(v);
r.appendChild(m);
e.body.appendChild(r);
if((v+"").length){s.width=r.offsetWidth-this.options.baselineMarkerSize;
s.height=r.offsetHeight;
s.baseline=m.offsetTop+this.options.baselineMarkerSize;
}if(s.width>0&&s.height>0){this._cache.put(p,s);
}r.parentNode.removeChild(r);
return s;
},_baselineMarker:function(){return a("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;' />")[0];
}});
j.current=new j();
function i(o,n,m){return j.current.measure(o,n,m);
}function g(o,m){var p=[];
if(o.length>0&&document.fonts){try{p=o.map(function(q){return document.fonts.load(q);
});
}catch(n){f.logToConsole(n);
}Promise.all(p).then(m,m);
}else{m();
}}f.util.TextMetrics=j;
f.util.LRUCache=h;
f.util.loadFonts=g;
f.util.measureText=i;
}(window.kendo.jQuery));
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("util/base64",["util/main"],b);
}(function(){(function(){var e=window.kendo,a=e.deepExtend,d=String.fromCharCode;
var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function b(p){var q="";
var g,h,j,k,l,m,n;
var o=0;
p=c(p);
while(o<p.length){g=p.charCodeAt(o++);
h=p.charCodeAt(o++);
j=p.charCodeAt(o++);
k=g>>2;
l=(g&3)<<4|h>>4;
m=(h&15)<<2|j>>6;
n=j&63;
if(isNaN(h)){m=n=64;
}else{if(isNaN(j)){n=64;
}}q=q+f.charAt(k)+f.charAt(l)+f.charAt(m)+f.charAt(n);
}return q;
}function c(j){var k="";
for(var h=0;
h<j.length;
h++){var g=j.charCodeAt(h);
if(g<128){k+=d(g);
}else{if(g<2048){k+=d(192|g>>>6);
k+=d(128|g&63);
}else{if(g<65536){k+=d(224|g>>>12);
k+=d(128|g>>>6&63);
k+=d(128|g&63);
}}}}return k;
}a(e.util,{encodeBase64:b,encodeUTF8:c});
}());
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("mixins/observers",["kendo.core"],b);
}(function(){(function(a){var e=Math,d=window.kendo,b=d.deepExtend,c=a.inArray;
var f={observers:function(){this._observers=this._observers||[];
return this._observers;
},addObserver:function(g){if(!this._observers){this._observers=[g];
}else{this._observers.push(g);
}return this;
},removeObserver:function(g){var i=this.observers();
var h=c(g,i);
if(h!=-1){i.splice(h,1);
}return this;
},trigger:function(i,g){var k=this._observers;
var j;
var h;
if(k&&!this._suspended){for(h=0;
h<k.length;
h++){j=k[h];
if(j[i]){j[i](g);
}}}return this;
},optionsChange:function(g){g=g||{};
g.element=this;
this.trigger("optionsChange",g);
},geometryChange:function(){this.trigger("geometryChange",{element:this});
},suspend:function(){this._suspended=(this._suspended||0)+1;
return this;
},resume:function(){this._suspended=e.max((this._suspended||0)-1,0);
return this;
},_observerField:function(g,h){if(this[g]){this[g].removeObserver(this);
}this[g]=h;
h.addObserver(this);
}};
b(d,{mixins:{ObserversMixin:f}});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("kendo.gantt",["kendo.data","kendo.popup","kendo.window","kendo.resizable","kendo.gantt.list","kendo.gantt.timeline","kendo.grid","kendo.pdf"],b);
}(function(){var a={id:"gantt",name:"Gantt",category:"web",description:"The Gantt component.",depends:["data","popup","resizable","window","gantt.list","gantt.timeline","grid"]};
(function(b,af){var H=window.kendo;
var Y="matchMedia" in window;
var f=H.support.browser;
var K=H.support.mobileOS;
var M=H.Observable;
var ah=H.ui.Widget;
var k=H.data.DataSource;
var O=H.data.ObservableObject;
var N=H.data.ObservableArray;
var S=H.data.Query;
var E=b.isArray;
var D=b.inArray;
var F=H.isFunction;
var R=b.proxy;
var u=b.extend;
var G=b.isPlainObject;
var J=b.map;
var I=H.keys;
var o=3;
var L=".kendoGantt";
var P="p0";
var Z="tabIndex";
var h="click";
var ai="width";
var X="string";
var q={down:{origin:"bottom left",position:"top left"},up:{origin:"top left",position:"bottom left"}};
var e="aria-activedescendant";
var c="gantt_active_cell";
var d="action-option-focused";
var r=".";
var aa="Are you sure you want to delete this task?";
var p="Are you sure you want to delete this dependency?";
var ad=H.template('<button class="#=styles.buttonToggle#" type="button"><span class="#=styles.iconToggle#">&nbps;</span></button>');
var g='<button class="#=styles.button# #=className#" type="button" #if (action) {#data-action="#=action#"#}#><span class="#=iconClass#"></span><span>#=text#</span></button>';
var i='<a class="#=className#" #=attr# href="\\#">#=text#</a>';
var ag=H.template('<li class="#=styles.currentView# #=styles.viewButtonDefault#"><a href="\\#" class="#=styles.link#">&nbps;</a></li>');
var C=H.template('<ul class="#=styles.viewsWrapper#">#for(var view in views){#<li class="#=styles.viewButtonDefault# #=styles.viewButton#-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a href="\\#" class="#=styles.link#">#=views[view].title#</a></li>#}#</ul>');
var ab=H.template('<div class="#=styles.popupWrapper#"><ul class="#=styles.popupList#" role="listbox">#for(var i = 0, l = actions.length; i < l; i++){#<li class="#=styles.item#" data-action="#=actions[i].data#" role="option">#=actions[i].text#</span>#}#</ul></div>');
var m=function(ak,al){var aj={name:al.field};
var am=al.model.fields[al.field].validation;
if(am&&G(am)&&am.message){aj[H.attr("dateCompare-msg")]=am.message;
}b('<input type="text" required '+H.attr("type")+'="date" '+H.attr("role")+'="datetimepicker" '+H.attr("bind")+'="value:'+al.field+'" '+H.attr("validate")+"='true' />").attr(aj).appendTo(ak);
b("<span "+H.attr("for")+'="'+al.field+'" class="k-invalid-msg"/>').hide().appendTo(ak);
};
var U=function(aj,ak){b('<a href="#" class="'+ak.styles.button+'">'+ak.messages.assignButton+"</a>").click(ak.click).appendTo(aj);
};
var A={wrapper:"k-widget k-gantt",rowHeight:"k-gantt-rowheight",listWrapper:"k-gantt-layout k-gantt-treelist",list:"k-gantt-treelist",timelineWrapper:"k-gantt-layout k-gantt-timeline",timeline:"k-gantt-timeline",splitBarWrapper:"k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal k-gantt-layout",splitBar:"k-splitbar",splitBarHover:"k-splitbar-horizontal-hover",popupWrapper:"k-list-container",popupList:"k-list k-reset",resizeHandle:"k-resize-handle",icon:"k-icon",item:"k-item",line:"k-line",buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",buttonToggle:"k-gantt-toggle",primary:"k-primary",hovered:"k-state-hover",selected:"k-state-selected",focused:"k-state-focused",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons k-state-default",button:"k-button",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},toolbar:{headerWrapper:"k-floatwrap k-header k-gantt-toolbar",footerWrapper:"k-floatwrap k-header k-gantt-toolbar",toolbar:"k-gantt-toolbar",expanded:"k-state-expanded",views:"k-gantt-views",viewsWrapper:"k-reset k-header k-gantt-views",actions:"k-gantt-actions",button:"k-button k-button-icontext",buttonToggle:"k-button k-button-icon k-gantt-toggle",iconPlus:"k-icon k-i-plus",iconPdf:"k-icon k-i-pdf",iconToggle:"k-icon k-i-gantt-toggle",viewButtonDefault:"k-state-default",viewButton:"k-view",currentView:"k-current-view",link:"k-link",pdfButton:"k-gantt-pdf",appendButton:"k-gantt-create"}};
function W(aj){return"["+H.attr("uid")+(aj?"='"+aj+"']":"]");
}function ae(aj){delete aj.name;
delete aj.prefix;
delete aj.remove;
delete aj.edit;
delete aj.add;
delete aj.navigate;
return aj;
}function l(an){if(an.filter("[name=end], [name=start]").length){var am=an.attr("name");
var ap=H.widgetInstance(an,H.ui);
var ak={};
var aj=an;
var al;
var ao;
while(aj!==window&&!al){aj=aj.parent();
al=aj.data("kendoEditable");
}ao=al?al.options.model:null;
if(!ao){return true;
}ak.start=ao.start;
ak.end=ao.end;
ak[am]=ap?ap.value():H.parseDate(an.value());
return ak.start<=ak.end;
}return true;
}function v(an,aj){var ao=an.parents("["+H.attr("role")+'="gantt"]');
var am=[];
var al=V(ao);
an.attr(Z,0);
if(aj){al.each(function(ap,aq){am[ap]=b(aq).scrollTop();
});
}try{an[0].setActive();
}catch(ak){an[0].focus();
}if(aj){al.each(function(ap,aq){b(aq).scrollTop(am[ap]);
});
}}function V(aj){return b(aj).parentsUntil("body").filter(function(am,al){var ak=H.getComputedStyles(al,["overflow"]);
return ak.overflow!="visible";
}).add(window);
}var n;
var ac=M.extend({init:function(aj,ak){M.fn.init.call(this);
this.element=aj;
this.options=u(true,{},this.options,ak);
this._popup();
},options:{direction:"down",navigatable:false},_current:function(al){var ak=w.styles;
var aj=this.list.find(r+ak.focused);
var am=aj[al]();
if(am.length){aj.removeClass(ak.focused).removeAttr("id");
am.addClass(ak.focused).attr("id",d);
this.list.find("ul").removeAttr(e).attr(e,d);
}},_popup:function(){var ao=this;
var al=w.styles;
var am="li"+r+al.item;
var ak=r+al.toolbar.appendButton;
var aj=this.options.messages.actions;
var an=this.options.navigatable;
this.list=b(ab({styles:al,actions:[{data:"add",text:aj.addChild},{data:"insert-before",text:aj.insertBefore},{data:"insert-after",text:aj.insertAfter}]}));
this.element.append(this.list);
this.popup=new H.ui.Popup(this.list,u({anchor:this.element.find(ak),open:function(){ao._adjustListWidth();
},animation:this.options.animation},q[this.options.direction]));
this.element.on(h+L,ak,function(aq){var ar=b(this);
var ap=ar.attr(H.attr("action"));
aq.preventDefault();
if(ap){ao.trigger("command",{type:ap});
}else{ao.popup.open();
if(an){ao.list.find("li:first").addClass(al.focused).attr("id",d).end().find("ul").attr({TABINDEX:0,"aria-activedescendant":d}).focus();
}}});
this.list.find(am).hover(function(){b(this).addClass(al.hovered);
},function(){b(this).removeClass(al.hovered);
}).end().on(h+L,am,function(){ao.trigger("command",{type:b(this).attr(H.attr("action"))});
ao.popup.close();
});
if(an){this.popup.bind("close",function(){ao.list.find(am).removeClass(al.focused).end().find("ul").attr(Z,0);
ao.element.parents("["+H.attr("role")+'="gantt"]').find(r+al.gridContent+" > table:first").focus();
});
this.list.find("ul").on("keydown"+L,function(ap){var aq=ap.keyCode;
switch(aq){case I.UP:ap.preventDefault();
ao._current("prev");
break;
case I.DOWN:ap.preventDefault();
ao._current("next");
break;
case I.ENTER:ao.list.find(r+al.focused).click();
break;
case I.ESC:ap.preventDefault();
ao.popup.close();
break;
}});
}},_adjustListWidth:function(){var am=this.list;
var al=w.styles;
var ao=am[0].style.width;
var ap=this.element.find(r+al.toolbar.appendButton);
var an=am.outerWidth();
var aj;
var ak;
if(!am.data(ai)&&ao){return;
}aj=window.getComputedStyle?window.getComputedStyle(ap[0],null):0;
ak=aj?parseFloat(aj.width):ap.outerWidth();
if(aj&&(f.mozilla||f.msie)){ak+=parseFloat(aj.paddingLeft)+parseFloat(aj.paddingRight)+parseFloat(aj.borderLeftWidth)+parseFloat(aj.borderRightWidth);
}if(am.css("box-sizing")!=="border-box"){ao=ak-(am.outerWidth()-am.width());
}else{ao=ak;
}if(an>ao){ao=an;
}am.css({fontFamily:ap.css("font-family"),width:ao}).data(ai,ao);
},destroy:function(){clearTimeout(this._focusTimeout);
this.popup.destroy();
this.element.off(L);
this.list.off(L);
this.unbind();
}});
var j=function(ak,aj){return function(an){an=E(an)?{data:an}:an;
var am=an||{};
var al=am.data;
am.data=al;
if(!(am instanceof ak)&&am instanceof k){throw new Error("Incorrect DataSource type. Only "+aj+" instances are supported");
}return am instanceof ak?am:new ak(am);
};
};
var y=H.data.Model.define({id:"id",fields:{id:{type:"number"},predecessorId:{type:"number"},successorId:{type:"number"},type:{type:"number"}}});
var z=k.extend({init:function(aj){k.fn.init.call(this,u(true,{},{schema:{modelBase:y,model:y}},aj));
},successors:function(aj){return this._dependencies("predecessorId",aj);
},predecessors:function(aj){return this._dependencies("successorId",aj);
},dependencies:function(aj){var ak=this.predecessors(aj);
var al=this.successors(aj);
ak.push.apply(ak,al);
return ak;
},_dependencies:function(ak,am){var aj=this.view();
var al={field:ak,operator:"eq",value:am};
aj=new S(aj).filter(al).toArray();
return aj;
}});
z.create=j(z,"GanttDependencyDataSource");
var B=H.data.Model.define({duration:function(){var aj=this.end;
var ak=this.start;
return aj-ak;
},isMilestone:function(){return this.duration()===0;
},_offset:function(am){var aj=["start","end"];
var al;
for(var ak=0;
ak<aj.length;
ak++){al=new Date(this.get(aj[ak]).getTime()+am);
this.set(aj[ak],al);
}},id:"id",fields:{id:{type:"number"},parentId:{type:"number",defaultValue:null,validation:{required:true}},orderId:{type:"number",validation:{required:true}},title:{type:"string",defaultValue:"New task"},start:{type:"date",validation:{required:true}},end:{type:"date",validation:{required:true,dateCompare:l,message:"End date should be after or equal to the start date"}},percentComplete:{type:"number",validation:{required:true,min:0,max:1,step:0.01}},summary:{type:"boolean"},expanded:{type:"boolean",defaultValue:true}}});
var x=k.extend({init:function(aj){k.fn.init.call(this,u(true,{},{schema:{modelBase:B,model:B}},aj));
},remove:function(al){var ak=al.get("parentId");
var aj=this.taskAllChildren(al);
this._removeItems(aj);
al=k.fn.remove.call(this,al);
this._childRemoved(ak,al.get("orderId"));
return al;
},add:function(aj){if(!aj){return;
}aj=this._toGanttTask(aj);
return this.insert(this.taskSiblings(aj).length,aj);
},insert:function(aj,ak){if(!ak){return;
}ak=this._toGanttTask(ak);
ak.set("orderId",aj);
ak=k.fn.insert.call(this,aj,ak);
this._reorderSiblings(ak,this.taskSiblings(ak).length-1);
this._resolveSummaryFields(this.taskParent(ak));
return ak;
},taskChildren:function(am){var aj=this.view();
var ak={field:"parentId",operator:"eq",value:null};
var al=this._sort&&this._sort.length?this._sort:{field:"orderId",dir:"asc"};
var an;
if(!!am){an=am.get("id");
if(an===af||an===null||an===""){return[];
}ak.value=an;
}aj=new S(aj).filter(ak).sort(al).toArray();
return aj;
},taskAllChildren:function(al){var ak=[];
var am=this;
var aj=function(an){var ao=am.taskChildren(an);
ak.push.apply(ak,ao);
J(ao,aj);
};
if(!!al){aj(al);
}else{ak=this.view();
}return ak;
},taskSiblings:function(ak){if(!ak){return null;
}var aj=this.taskParent(ak);
return this.taskChildren(aj);
},taskParent:function(aj){if(!aj||aj.get("parentId")===null){return null;
}return this.get(aj.parentId);
},taskLevel:function(al){var aj=0;
var ak=this.taskParent(al);
while(ak!==null){aj+=1;
ak=this.taskParent(ak);
}return aj;
},taskTree:function(ao){var al=[];
var ak;
var ap=this.taskChildren(ao);
for(var am=0,an=ap.length;
am<an;
am++){ak=ap[am];
al.push(ak);
if(ak.get("expanded")){var aj=this.taskTree(ak);
al.push.apply(al,aj);
}}return al;
},update:function(an,ao){var ap=this;
var am;
var al=function(av,au){var aq=ap.taskAllChildren(av);
for(var ar=0,at=aq.length;
ar<at;
ar++){aq[ar]._offset(au);
}};
var ak=function(aq){var ar=aq.field;
var at=aq.sender;
switch(ar){case"start":ap._resolveSummaryStart(ap.taskParent(at));
al(at,at.get(ar).getTime()-am.getTime());
break;
case"end":ap._resolveSummaryEnd(ap.taskParent(at));
break;
case"percentComplete":ap._resolveSummaryPercentComplete(ap.taskParent(at));
break;
case"orderId":ap._reorderSiblings(at,am);
break;
}};
if(ao.parentId!==af){am=an.get("parentId");
if(am!==ao.parentId){an.set("parentId",ao.parentId);
ap._childRemoved(am,an.get("orderId"));
an.set("orderId",ap.taskSiblings(an).length-1);
ap._resolveSummaryFields(ap.taskParent(an));
}delete ao.parentId;
}an.bind("change",ak);
for(var aj in ao){am=an.get(aj);
an.set(aj,ao[aj]);
}an.unbind("change",ak);
},_resolveSummaryFields:function(aj){if(!aj){return;
}this._updateSummary(aj);
if(!this.taskChildren(aj).length){return;
}this._resolveSummaryStart(aj);
this._resolveSummaryEnd(aj);
this._resolveSummaryPercentComplete(aj);
},_resolveSummaryStart:function(ak){var al=this;
var aj=function(ar){var am=al.taskChildren(ar);
var aq=am[0].start.getTime();
var an;
for(var ao=1,ap=am.length;
ao<ap;
ao++){an=am[ao].start.getTime();
if(an<aq){aq=an;
}}return new Date(aq);
};
this._updateSummaryRecursive(ak,"start",aj);
},_resolveSummaryEnd:function(ak){var al=this;
var aj=function(ar){var am=al.taskChildren(ar);
var aq=am[0].end.getTime();
var an;
for(var ao=1,ap=am.length;
ao<ap;
ao++){an=am[ao].end.getTime();
if(an>aq){aq=an;
}}return new Date(aq);
};
this._updateSummaryRecursive(ak,"end",aj);
},_resolveSummaryPercentComplete:function(ak){var al=this;
var aj=function(an){var am=al.taskChildren(an);
var ao=new S(am).aggregate([{field:"percentComplete",aggregate:"average"}]);
return ao.percentComplete.average;
};
this._updateSummaryRecursive(ak,"percentComplete",aj);
},_updateSummaryRecursive:function(am,ak,aj){if(!am){return;
}var an=aj(am);
am.set(ak,an);
var al=this.taskParent(am);
if(al){this._updateSummaryRecursive(al,ak,aj);
}},_childRemoved:function(ao,al){var an=ao===null?null:this.get(ao);
var aj=this.taskChildren(an);
for(var ak=al,am=aj.length;
ak<am;
ak++){aj[ak].set("orderId",ak);
}this._resolveSummaryFields(an);
},_reorderSiblings:function(ar,an){var ao=ar.get("orderId");
var aj=ao>an;
var aq=aj?an:ao;
var ak=aj?ao:an;
var am=aj?aq:aq+1;
var ap=this.taskSiblings(ar);
ak=Math.min(ak,ap.length-1);
for(var al=aq;
al<=ak;
al++){if(ap[al]===ar){continue;
}ap[al].set("orderId",am);
am+=1;
}},_updateSummary:function(ak){if(ak!==null){var aj=this.taskChildren(ak).length;
ak.set("summary",aj>0);
}},_toGanttTask:function(aj){if(!(aj instanceof B)){var ak=aj;
aj=this._createNewModel();
aj.accept(ak);
}return aj;
}});
x.create=j(x,"GanttDataSource");
u(true,H.data,{GanttDataSource:x,GanttTask:B,GanttDependencyDataSource:z,GanttDependency:y});
var t={desktop:{dateRange:m,resources:U}};
var s=H.Observable.extend({init:function(aj,ak){H.Observable.fn.init.call(this);
this.element=aj;
this.options=u(true,{},this.options,ak);
this.createButton=this.options.createButton;
},fields:function(ak,an){var aq=this;
var ao=this.options;
var am=ao.messages.editor;
var ap=ao.resources;
var al;
var aj=function(ar){ar.preventDefault();
ap.editor(aq.container.find(r+w.styles.popup.resourcesField),an);
};
if(ao.editable.template){al=b.map(an.fields,function(at,ar){return{field:ar};
});
}else{al=[{field:"title",title:am.title},{field:"start",title:am.start,editor:ak.dateRange},{field:"end",title:am.end,editor:ak.dateRange},{field:"percentComplete",title:am.percentComplete,format:P}];
if(an.get(ap.field)){al.push({field:ap.field,title:am.resources,messages:am,editor:ak.resources,click:aj,styles:w.styles.popup});
}}return al;
},_buildEditTemplate:function(ap,al,aj){var at=this.options.resources;
var av=this.options.editable.template;
var au=u({},H.Template,this.options.templateSettings);
var aq=au.paramName;
var ar=w.styles.popup;
var am="";
if(av){if(typeof av===X){av=window.unescape(av);
}am+=H.template(av,au)(ap);
}else{for(var an=0,ao=al.length;
an<ao;
an++){var ak=al[an];
am+='<div class="'+ar.editLabel+'"><label for="'+ak.field+'">'+(ak.title||ak.field||"")+"</label></div>";
if(ak.field===at.field){am+='<div class="'+ar.resourcesField+'" style="display:none"></div>';
}if(!ap.editable||ap.editable(ak.field)){aj.push(ak);
am+="<div "+H.attr("container-for")+'="'+ak.field+'" class="'+ar.editField+'"></div>';
}else{var aw="#:";
if(ak.field){ak=H.expr(ak.field,aq);
aw+=ak+"==null?'':"+ak;
}else{aw+="''";
}aw+="#";
aw=H.template(aw,au);
am+='<div class="'+ar.editField+'">'+aw(ap)+"</div>";
}}}return am;
}});
var Q=s.extend({destroy:function(){this.close();
this.unbind();
},editTask:function(aj){this.editable=this._createPopupEditor(aj);
},close:function(){var ak=this;
var aj=function(){if(ak.editable){ak.editable.destroy();
ak.editable=null;
ak.container=null;
}if(ak.popup){ak.popup.destroy();
ak.popup=null;
}};
if(this.editable&&this.container.is(":visible")){ak.trigger("close",{window:ak.container});
this.container.data("kendoWindow").bind("deactivate",aj).close();
}else{aj();
}},showDialog:function(an){var aj=an.buttons;
var ap=w.styles.popup;
var ak=H.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',ap.form,ap.formContainer,ap.message,an.text,ap.buttonsContainer);
for(var al=0,am=aj.length;
al<am;
al++){ak+=this.createButton(aj[al]);
}ak+="</div></div></div>";
var aq=this.element;
if(this.popup){this.popup.destroy();
}var ao=this.popup=b(ak).appendTo(aq).eq(0).on("click",r+ap.button,function(at){at.preventDefault();
ao.close();
var ar=b(at.currentTarget).index();
aj[ar].click();
}).kendoWindow({modal:true,resizable:false,draggable:false,title:an.title,visible:false,deactivate:function(){this.destroy();
aq.focus();
}}).getKendoWindow();
ao.center().open();
},_createPopupEditor:function(at){var au=this;
var aq={};
var ap=this.options.messages;
var an=w.styles;
var ar=an.popup;
var ao=H.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',H.attr("uid"),at.uid,ar.form,ar.editForm,ar.formContainer);
var am=this.fields(t.desktop,at);
var ak=[];
ao+=this._buildEditTemplate(at,am,ak);
ao+='<div class="'+ar.buttonsContainer+'">';
ao+=this.createButton({name:"update",text:ap.save,className:w.styles.primary});
ao+=this.createButton({name:"cancel",text:ap.cancel});
if(au.options.editable.destroy!==false){ao+=this.createButton({name:"delete",text:ap.destroy});
}ao+="</div></div></div>";
var aj=this.container=b(ao).appendTo(this.element).eq(0).kendoWindow(u({modal:true,resizable:false,draggable:true,title:ap.editor.editorTitle,visible:false,close:function(av){if(av.userTriggered){if(au.trigger("cancel",{container:aj,model:at})){av.preventDefault();
}}}},aq));
var al=aj.kendoEditable({fields:ak,model:at,clearContainer:false,validateOnBlur:true,target:au.options.target}).data("kendoEditable");
H.cycleForm(aj);
if(!this.trigger("edit",{container:aj,model:at})){aj.data("kendoWindow").center().open();
aj.on(h+L,r+an.buttonCancel,function(av){av.preventDefault();
av.stopPropagation();
au.trigger("cancel",{container:aj,model:at});
});
aj.on(h+L,r+an.buttonSave,function(av){av.preventDefault();
av.stopPropagation();
var ax=au.fields(t.desktop,at);
var aA={};
var aw;
for(var ay=0,az=ax.length;
ay<az;
ay++){aw=ax[ay].field;
aA[aw]=at.get(aw);
}au.trigger("save",{container:aj,model:at,updateInfo:aA});
});
aj.on(h+L,r+an.buttonDelete,function(av){av.preventDefault();
av.stopPropagation();
au.trigger("remove",{container:aj,model:at});
});
}else{au.trigger("cancel",{container:aj,model:at});
}return al;
}});
var T=ah.extend({init:function(aj,ak){ah.fn.init.call(this,aj,ak);
this.wrapper=this.element;
this.model=this.options.model;
this.resourcesField=this.options.resourcesField;
this.createButton=this.options.createButton;
this._initContainer();
this._attachHandlers();
},events:["save"],open:function(){this.window.center().open();
this.grid.resize(true);
},close:function(){this.window.bind("deactivate",R(this.destroy,this)).close();
},destroy:function(){this._dettachHandlers();
this.grid.destroy();
this.grid=null;
this.window.destroy();
this.window=null;
ah.fn.destroy.call(this);
H.destroy(this.wrapper);
this.element=this.wrapper=null;
},_attachHandlers:function(){var ak=w.styles;
var al=this.grid;
var aj=this._cancelProxy=R(this._cancel,this);
this.container.on(h+L,r+ak.buttonCancel,this._cancelProxy);
this._saveProxy=R(this._save,this);
this.container.on(h+L,r+ak.buttonSave,this._saveProxy);
this.window.bind("close",function(am){if(am.userTriggered){aj(am);
}});
al.wrapper.on(h+L,"input[type='checkbox']",function(){var am=b(this);
var ao=b(am).closest("tr");
var an=al.dataSource.getByUid(ao.attr(H.attr("uid")));
var ap=b(am).is(":checked")?1:"";
an.set("value",ap);
});
},_dettachHandlers:function(){this._cancelProxy=null;
this._saveProxy=null;
this.container.off(L);
this.grid.wrapper.off();
},_cancel:function(aj){aj.preventDefault();
this.close();
},_save:function(aj){aj.preventDefault();
this._updateModel();
if(!this.wrapper.is(r+w.styles.popup.resourcesField)){this.trigger("save",{container:this.wrapper,model:this.model});
}this.close();
},_initContainer:function(){var ak=w.styles.popup;
var aj=H.format('<div class="{0} {1}"><div class="{2} {3}"/></div>"',ak.form,ak.editForm,ak.formContainer,ak.resourcesFormContainer);
aj=b(aj);
this.container=aj.find(r+ak.resourcesFormContainer);
this.window=aj.kendoWindow({modal:true,resizable:false,draggable:true,visible:false,title:this.options.messages.resourcesEditorTitle}).data("kendoWindow");
this._resourceGrid();
this._createButtons();
},_resourceGrid:function(){var al=this;
var ak=this.options.messages;
var aj=b('<div id="resources-grid"/>').appendTo(this.container);
this.grid=new H.ui.Grid(aj,{columns:[{field:"name",title:ak.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'# if (value > 0 && value !== null) {#checked='checked'# } #/>#=name#</labe>"},{field:"value",title:ak.unitsHeader,template:function(am){var ao=am.format;
var an=am.value!==null?am.value:"";
return ao?H.toString(an,ao):an;
}}],height:280,sortable:true,editable:true,filterable:true,dataSource:{data:al.options.data,schema:{model:{id:"id",fields:{id:{from:"id"},name:{from:"name",type:"string",editable:false},value:{from:"value",type:"number",defaultValue:""},format:{from:"format",type:"string"}}}}},save:function(am){var an=!!am.values.value;
am.container.parent().find("input[type='checkbox']").prop("checked",an);
}});
},_createButtons:function(){var aj=this.options.buttons;
var ak='<div class="'+w.styles.popup.buttonsContainer+'">';
for(var al=0,am=aj.length;
al<am;
al++){ak+=this.createButton(aj[al]);
}ak+="</div>";
this.container.append(ak);
},_updateModel:function(){var am=[];
var an;
var aj=this.grid.dataSource.data();
for(var ak=0,al=aj.length;
ak<al;
ak++){an=aj[ak].get("value");
if(an!==null&&an>0){am.push(aj[ak]);
}}this.model[this.resourcesField]=am;
}});
var w=ah.extend({init:function(aj,al,ak){if(E(al)){al={dataSource:al};
}n={append:{text:"Add Task",action:"add",className:w.styles.toolbar.appendButton,iconClass:w.styles.toolbar.iconPlus},pdf:{text:"Export to PDF",className:w.styles.toolbar.pdfButton,iconClass:w.styles.toolbar.iconPdf}};
ah.fn.init.call(this,aj,al);
if(ak){this._events=ak;
}this._wrapper();
this._resources();
if(!this.options.views||!this.options.views.length){this.options.views=["day","week","month"];
}this._timeline();
this._toolbar();
this._footer();
this._adjustDimensions();
this._preventRefresh=true;
this.view(this.timeline._selectedViewName);
this._preventRefresh=false;
this._dataSource();
this._assignments();
this._dropDowns();
this._list();
this._dependencies();
this._resizable();
this._scrollable();
this._dataBind();
this._attachEvents();
this._createEditor();
H.notify(this);
},events:["dataBinding","dataBound","add","edit","remove","cancel","save","change","navigate","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","columnResize"],options:{name:"Gantt",autoBind:true,navigatable:false,selectable:true,editable:true,resizable:false,columnResizeHandleWidth:o,columns:[],views:[],dataSource:{},dependencies:{},resources:{},assignments:{},taskTemplate:null,messages:{save:"Save",cancel:"Cancel",destroy:"Delete",deleteTaskConfirmation:aa,deleteDependencyConfirmation:p,deleteTaskWindowTitle:"Delete task",deleteDependencyWindowTitle:"Delete dependency",views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"},actions:{append:"Add Task",addChild:"Add Child",insertBefore:"Add Above",insertAfter:"Add Below",pdf:"Export to PDF"},editor:{editorTitle:"Task",resourcesEditorTitle:"Resources",title:"Title",start:"Start",end:"End",percentComplete:"Complete",resources:"Resources",assignButton:"Assign",resourcesHeader:"Resources",unitsHeader:"Units"}},showWorkHours:true,showWorkDays:true,toolbar:null,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,snap:true,height:600,listWidth:"30%",rowHeight:null},select:function(ak){var aj=this.list;
if(!ak){return aj.select();
}aj.select(ak);
return;
},clearSelection:function(){this.list.clearSelection();
},destroy:function(){ah.fn.destroy.call(this);
if(this.dataSource){this.dataSource.unbind("change",this._refreshHandler);
this.dataSource.unbind("progress",this._progressHandler);
this.dataSource.unbind("error",this._errorHandler);
}if(this.dependencies){this.dependencies.unbind("change",this._dependencyRefreshHandler);
this.dependencies.unbind("error",this._dependencyErrorHandler);
}if(this.timeline){this.timeline.unbind();
this.timeline.destroy();
}if(this.list){this.list.unbind();
this.list.destroy();
}if(this.footerDropDown){this.footerDropDown.destroy();
}if(this.headerDropDown){this.headerDropDown.destroy();
}if(this._editor){this._editor.destroy();
}if(this._resizeDraggable){this._resizeDraggable.destroy();
}this.toolbar.off(L);
if(Y){this._mediaQuery.removeListener(this._mediaQueryHandler);
this._mediaQuery=null;
}b(window).off("resize"+L,this._resizeHandler);
b(this.wrapper).off(L);
this.toolbar=null;
this.footer=null;
},setOptions:function(al){var ak=H.deepExtend({},this.options,al);
var aj=this._events;
if(!al.views){var am=this.view().name;
ak.views=b.map(this.options.views,function(ap){var an=G(ap);
var ao=an?typeof ap.type!=="string"?ap.title:ap.type:ap;
if(am===ao){if(an){ap.selected=true;
}else{ap={type:ao,selected:true};
}}else{if(an){ap.selected=false;
}}return ap;
});
}if(!al.dataSource){ak.dataSource=this.dataSource;
}if(!al.dependencies){ak.dependencies=this.dependencies;
}if(!al.resources){ak.resources=this.resources;
}if(!al.assignments){ak.assignments=this.assignments;
}this.destroy();
this.element.empty();
this.options=null;
this.init(this.element,ak,aj);
ah.fn._setEvents.call(this,ak);
},_attachEvents:function(){this._resizeHandler=R(this.resize,this,false);
b(window).on("resize"+L,this._resizeHandler);
},_wrapper:function(){var aj=w.styles;
var am=[aj.icon,aj.resizeHandle].join(" ");
var al=this.options;
var ak=al.height;
var an=al.width;
this.wrapper=this.element.addClass(aj.wrapper).append("<div class='"+aj.listWrapper+"'><div></div></div>").append("<div class='"+aj.splitBarWrapper+"'><div class='"+am+"'></div></div>").append("<div class='"+aj.timelineWrapper+"'><div></div></div>");
this.wrapper.find(r+aj.list).width(al.listWidth);
if(ak){this.wrapper.height(ak);
}if(an){this.wrapper.width(an);
}if(al.rowHeight){this.wrapper.addClass(aj.rowHeight);
}},_toolbar:function(){var aq=this;
var am=w.styles;
var ay=r+am.toolbar.views+" > li";
var ap=r+am.toolbar.pdfButton;
var au=r+am.buttonToggle;
var al=r+am.gridContent;
var aw=b(r+am.list);
var ar=b(r+am.timeline);
var ao=am.hovered;
var aj=this.options.toolbar;
var ak=b("<div class='"+am.toolbar.actions+"'>");
var av;
var ax;
var at;
var an=function(az){if(az.matches){aw.css({display:"none","max-width":0});
}else{aw.css({display:"inline-block",width:"30%","max-width":"none"});
ar.css("display","inline-block");
aq.refresh();
ar.find(al).scrollTop(aq.scrollTop);
}aq._resize();
};
if(!F(aj)){aj=typeof aj===X?aj:this._actions(aj);
aj=R(H.template(aj),this);
}at=b(ad({styles:am.toolbar}));
ax=b(C({ns:H.ns,views:this.timeline.views,styles:am.toolbar}));
ak.append(aj({}));
av=b("<div class='"+am.toolbar.headerWrapper+"'>").append(at).append(ax).append(ak);
if(ax.find("li").length>1){ax.prepend(ag({styles:am.toolbar}));
}this.wrapper.prepend(av);
this.toolbar=av;
if(Y){this._mediaQueryHandler=R(an,this);
this._mediaQuery=window.matchMedia("(max-width: 480px)");
this._mediaQuery.addListener(this._mediaQueryHandler);
}av.on(h+L,ay,function(aA){aA.preventDefault();
var aB=aq.list;
var aC=b(this).attr(H.attr("name"));
var az=ax.find(r+am.toolbar.currentView);
if(az.is(":visible")){az.parent().toggleClass(am.toolbar.expanded);
}if(aB.editable&&aB.editable.trigger("validate")){return;
}if(!aq.trigger("navigate",{view:aC})){aq.view(aC);
}}).on(h+L,ap,function(az){az.preventDefault();
aq.saveAsPDF();
}).on(h+L,au,function(az){az.preventDefault();
if(aw.is(":visible")){aw.css({display:"none",width:"0"});
ar.css({display:"inline-block",width:"100%"});
aq.refresh();
ar.find(al).scrollTop(aq.scrollTop);
}else{ar.css({display:"none",width:0});
aw.css({display:"inline-block",width:"100%","max-width":"none"}).find(al).scrollTop(aq.scrollTop);
}aq._resize();
});
this.wrapper.find(r+am.toolbar.toolbar+" li").hover(function(){b(this).addClass(ao);
},function(){b(this).removeClass(ao);
});
},_actions:function(){var ao=this.options;
var ak=ao.editable;
var aj=ao.toolbar;
var al="";
if(!E(aj)){if(ak&&ak.create!==false){aj=["append"];
}else{return al;
}}for(var am=0,an=aj.length;
am<an;
am++){al+=this._createButton(aj[am]);
}return al;
},_footer:function(){var al=this.options.editable;
if(!al||al.create===false){return;
}var an=w.styles.toolbar;
var ao=this.options.messages.actions;
var ak=b(H.template(g)(u(true,{styles:an},n.append,{text:ao.append})));
var aj=b("<div class='"+an.actions+"'>").append(ak);
var am=b("<div class='"+an.footerWrapper+"'>").append(aj);
this.wrapper.append(am);
this.footer=am;
},_createButton:function(ak){var ao=ak.template||g;
var am=this.options.messages.actions;
var al=typeof ak===X?ak:ak.name||ak.text;
var aj=n[al]?n[al].className:"k-gantt-"+(al||"").replace(/\s/g,"");
var an={iconClass:"",action:"",text:al,className:aj,styles:w.styles.toolbar};
if(!al&&!(G(ak)&&ak.template)){throw new Error("Custom commands should have name specified");
}an=u(true,an,n[al],{text:am[al]});
if(G(ak)){if(ak.className&&D(an.className,ak.className.split(" "))<0){ak.className+=" "+an.className;
}an=u(true,an,ak);
}return H.template(ao)(an);
},_adjustDimensions:function(){var aj=this.element;
var al=w.styles;
var am=r+al.list;
var ap=r+al.timeline;
var an=r+al.splitBar;
var aq=this.toolbar.outerHeight();
var ak=this.footer?this.footer.outerHeight():0;
var ar=aj.height();
var at=aj.width();
var ao=aj.find(an).outerWidth();
var au=aj.find(am).outerWidth();
aj.children([am,ap,an].join(",")).height(ar-(aq+ak)).end().children(ap).width(at-(ao+au));
if(at<au+ao){aj.find(am).width(at-ao);
}},_scrollTo:function(ap){var aq=this.timeline.view();
var am=this.list;
var ak=H.attr("uid");
var al=typeof ap==="string"?ap:ap.closest("tr"+W()).attr(ak);
var aj;
var ao;
var an=function(){if(ao.length!==0){aj();
}};
if(aq.content.is(":visible")){ao=aq.content.find(W(al));
aj=function(){aq._scrollTo(ao);
};
}else{ao=am.content.find(W(al));
aj=function(){ao.get(0).scrollIntoView();
};
}an();
},_dropDowns:function(){var an=this;
var ak=r+w.styles.toolbar.actions;
var aj=this.options.messages.actions;
var ao=this.timeline;
var al=this.options.editable;
var am=function(aq){var az=aq.type;
var au;
var ap=an.dataSource;
var ay=ap._createNewModel();
var aw=an.dataItem(an.select());
var av=ap.taskParent(aw);
var at=ao.view()._timeSlots()[0];
var ax=az==="add"?aw:av;
var ar=an.list.editable;
if(ar&&ar.trigger("validate")){return;
}ay.set("title","New task");
if(ax){ay.set("parentId",ax.get("id"));
ay.set("start",ax.get("start"));
ay.set("end",ax.get("end"));
}else{ay.set("start",at.start);
ay.set("end",at.end);
}if(az!=="add"){au=aw.get("orderId");
au=az==="insert-before"?au:au+1;
}an._createTask(ay,au);
};
if(!al||al.create===false){return;
}this.footerDropDown=new ac(this.footer.children(ak).eq(0),{messages:{actions:aj},direction:"up",animation:{open:{effects:"slideIn:up"}},navigatable:an.options.navigatable});
this.headerDropDown=new ac(this.toolbar.children(ak).eq(0),{messages:{actions:aj},navigatable:an.options.navigatable});
this.footerDropDown.bind("command",am);
this.headerDropDown.bind("command",am);
},_list:function(){var at=this;
var ap=at.options.navigatable;
var am=w.styles;
var ao=this.wrapper.find(r+am.list);
var al=ao.find("> div");
var au=this.wrapper.find(r+am.toolbar.actions+" > button");
var aq={columns:this.options.columns||[],dataSource:this.dataSource,selectable:this.options.selectable,editable:this.options.editable,resizable:this.options.resizable,columnResizeHandleWidth:this.options.columnResizeHandleWidth,listWidth:ao.outerWidth(),resourcesField:this.resources.field,rowHeight:this.options.rowHeight};
var ak=aq.columns;
var aj;
var ar=function(){if(ap){at._current(at._cachedCurrent);
v(at.list.content.find("table"),true);
}delete at._cachedCurrent;
};
for(var an=0;
an<ak.length;
an++){aj=ak[an];
if(aj.field===this.resources.field&&typeof aj.editor!=="function"){aj.editor=R(this._createResourceEditor,this);
}}this.list=new H.ui.GanttList(al,aq);
this.list.bind("render",function(){at._navigatable();
},true).bind("edit",function(av){at._cachedCurrent=av.cell;
if(at.trigger("edit",{task:av.model,container:av.cell})){av.preventDefault();
}}).bind("cancel",function(av){if(at.trigger("cancel",{task:av.model,container:av.cell})){av.preventDefault();
}ar();
}).bind("update",function(av){at._updateTask(av.task,av.updateInfo);
ar();
}).bind("change",function(){at.trigger("change");
var av=at.list.select();
if(av.length){au.removeAttr("data-action","add");
at.timeline.select("[data-uid='"+av.attr("data-uid")+"']");
}else{au.attr("data-action","add");
at.timeline.clearSelection();
}}).bind("columnResize",function(av){at.trigger("columnResize",{column:av.column,oldWidth:av.oldWidth,newWidth:av.newWidth});
});
},_timeline:function(){var an=this;
var al=w.styles;
var am=ae(u(true,{resourcesField:this.resources.field},this.options));
var ak=this.wrapper.find(r+al.timeline+" > div");
var aj=r+al.toolbar.currentView+" > "+r+al.toolbar.link;
this.timeline=new H.ui.GanttTimeline(ak,am);
this.timeline.bind("navigate",function(ao){var aq=ao.view.replace(/\./g,"\\.").toLowerCase();
var ap=an.toolbar.find(r+al.toolbar.views+" > li").removeClass(al.selected).end().find(r+al.toolbar.viewButton+"-"+aq).addClass(al.selected).find(r+al.toolbar.link).text();
an.toolbar.find(aj).text(ap);
an.refresh();
}).bind("moveStart",function(ao){var ap=an.list.editable;
if(ap&&ap.trigger("validate")){ao.preventDefault();
return;
}if(an.trigger("moveStart",{task:ao.task})){ao.preventDefault();
}}).bind("move",function(ao){var ar=ao.task;
var aq=ao.start;
var ap=new Date(aq.getTime()+ar.duration());
if(an.trigger("move",{task:ar,start:aq,end:ap})){ao.preventDefault();
}}).bind("moveEnd",function(ao){var ar=ao.task;
var aq=ao.start;
var ap=new Date(aq.getTime()+ar.duration());
if(!an.trigger("moveEnd",{task:ar,start:aq,end:ap})){an._updateTask(an.dataSource.getByUid(ar.uid),{start:aq,end:ap});
}}).bind("resizeStart",function(ao){var ap=an.list.editable;
if(ap&&ap.trigger("validate")){ao.preventDefault();
return;
}if(an.trigger("resizeStart",{task:ao.task})){ao.preventDefault();
}}).bind("resize",function(ao){if(an.trigger("resize",{task:ao.task,start:ao.start,end:ao.end})){ao.preventDefault();
}}).bind("resizeEnd",function(ao){var ap=ao.task;
var aq={};
if(ao.resizeStart){aq.start=ao.start;
}else{aq.end=ao.end;
}if(!an.trigger("resizeEnd",{task:ap,start:ao.start,end:ao.end})){an._updateTask(an.dataSource.getByUid(ap.uid),aq);
}}).bind("percentResizeStart",function(ao){var ap=an.list.editable;
if(ap&&ap.trigger("validate")){ao.preventDefault();
}}).bind("percentResizeEnd",function(ao){an._updateTask(an.dataSource.getByUid(ao.task.uid),{percentComplete:ao.percentComplete});
}).bind("dependencyDragStart",function(ao){var ap=an.list.editable;
if(ap&&ap.trigger("validate")){ao.preventDefault();
}}).bind("dependencyDragEnd",function(ap){var ao=an.dependencies._createNewModel({type:ap.type,predecessorId:ap.predecessor.id,successorId:ap.successor.id});
an._createDependency(ao);
}).bind("select",function(ao){var ap=an.list.editable;
if(ap){ap.trigger("validate");
}an.select("[data-uid='"+ao.uid+"']");
}).bind("editTask",function(ao){var ap=an.list.editable;
if(ap&&ap.trigger("validate")){return;
}an.editTask(ao.uid);
}).bind("clear",function(){an.clearSelection();
}).bind("removeTask",function(ao){var ap=an.list.editable;
if(ap&&ap.trigger("validate")){return;
}an.removeTask(an.dataSource.getByUid(ao.uid));
}).bind("removeDependency",function(ao){var ap=an.list.editable;
if(ap&&ap.trigger("validate")){return;
}an.removeDependency(an.dependencies.getByUid(ao.uid));
});
},_dataSource:function(){var ak=this.options;
var aj=ak.dataSource;
aj=E(aj)?{data:aj}:aj;
if(this.dataSource&&this._refreshHandler){this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler);
}else{this._refreshHandler=R(this.refresh,this);
this._progressHandler=R(this._requestStart,this);
this._errorHandler=R(this._error,this);
}this.dataSource=H.data.GanttDataSource.create(aj).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler);
},_dependencies:function(){var ak=this.options.dependencies||{};
var aj=E(ak)?{data:ak}:ak;
if(this.dependencies&&this._dependencyRefreshHandler){this.dependencies.unbind("change",this._dependencyRefreshHandler).unbind("error",this._dependencyErrorHandler);
}else{this._dependencyRefreshHandler=R(this.refreshDependencies,this);
this._dependencyErrorHandler=R(this._error,this);
}this.dependencies=H.data.GanttDependencyDataSource.create(aj).bind("change",this._dependencyRefreshHandler).bind("error",this._dependencyErrorHandler);
},_resources:function(){var ak=this.options.resources;
var aj=ak.dataSource||{};
this.resources={field:"resources",dataTextField:"name",dataColorField:"color",dataFormatField:"format"};
u(this.resources,ak);
this.resources.dataSource=H.data.DataSource.create(aj);
},_assignments:function(){var aj=this.options.assignments;
var ak=aj.dataSource||{};
if(this.assignments){this.assignments.dataSource.unbind("change",this._assignmentsRefreshHandler);
}else{this._assignmentsRefreshHandler=R(this.refresh,this);
}this.assignments={dataTaskIdField:"taskId",dataResourceIdField:"resourceId",dataValueField:"value"};
u(this.assignments,aj);
this.assignments.dataSource=H.data.DataSource.create(ak);
this.assignments.dataSource.bind("change",this._assignmentsRefreshHandler);
},_createEditor:function(){var ak=this;
var aj=this._editor=new Q(this.wrapper,u({},this.options,{target:this,resources:{field:this.resources.field,editor:R(this._createResourceEditor,this)},createButton:R(this._createPopupButton,this)}));
aj.bind("cancel",function(al){var am=ak.dataSource.getByUid(al.model.uid);
if(ak.trigger("cancel",{container:al.container,task:am})){al.preventDefault();
return;
}ak.cancelTask();
}).bind("edit",function(al){var am=ak.dataSource.getByUid(al.model.uid);
if(ak.trigger("edit",{container:al.container,task:am})){al.preventDefault();
}}).bind("save",function(al){var am=ak.dataSource.getByUid(al.model.uid);
ak.saveTask(am,al.updateInfo);
}).bind("remove",function(al){ak.removeTask(al.model.uid);
}).bind("close",ak._onDialogClose);
},_onDialogClose:function(){},_createResourceEditor:function(aj,ao){var aq=this;
var an=ao instanceof O?ao:ao.model;
var al=an.get("id");
var am=this.options.messages;
var ap=aq.resources.field;
var ak=this._resourceEditor=new T(aj,{resourcesField:ap,data:this._wrapResourceData(al),model:an,messages:u({},am.editor),buttons:[{name:"update",text:am.save,className:w.styles.primary},{name:"cancel",text:am.cancel}],createButton:R(this._createPopupButton,this),save:function(ar){aq._updateAssignments(ar.model.get("id"),ar.model.get(ap));
}});
ak.open();
},_createPopupButton:function(aj){var ak=aj.name||aj.text;
var al={className:w.styles.popup.button+" k-gantt-"+(ak||"").replace(/\s/g,""),text:ak,attr:""};
if(!ak&&!(G(aj)&&aj.template)){throw new Error("Custom commands should have name specified");
}if(G(aj)){if(aj.className){aj.className+=" "+al.className;
}al=u(true,al,aj);
}return H.template(i)(al);
},view:function(aj){return this.timeline.view(aj);
},range:function(ak){var aj=this.dataSource;
var am=this.view();
var al=this.timeline;
if(ak){am.options.range={start:ak.start,end:ak.end};
al._render(aj.taskTree());
al._renderDependencies(this.dependencies.view());
}return{start:am.start,end:am.end};
},date:function(aj){var ak=this.view();
if(aj){ak.options.date=aj;
ak._scrollToDate(aj);
}return ak.options.date;
},dataItem:function(al){if(!al){return null;
}var ak=this.list;
var aj=ak.content.find(al);
return ak._modelFromElement(aj);
},setDataSource:function(aj){this.options.dataSource=aj;
this._dataSource();
this.list._setDataSource(this.dataSource);
if(this.options.autoBind){aj.fetch();
}},setDependenciesDataSource:function(aj){this.options.dependencies=aj;
this._dependencies();
if(this.options.autoBind){aj.fetch();
}},items:function(){return this.wrapper.children(".k-task");
},_updateAssignments:function(ao,av){var al=this.assignments.dataSource;
var aw=this.assignments.dataTaskIdField;
var au=this.assignments.dataResourceIdField;
var am=false;
var ak=new S(al.view()).filter({field:aw,operator:"eq",value:ao}).toArray();
var aj;
var at;
var ax;
while(ak.length){aj=ak[0];
for(var an=0,aq=av.length;
an<aq;
an++){at=av[an];
if(aj.get(au)===at.get("id")){ax=av[an].get("value");
this._updateAssignment(aj,ax);
av.splice(an,1);
am=true;
break;
}}if(!am){this._removeAssignment(aj);
}am=false;
ak.shift();
}for(var ap=0,ar=av.length;
ap<ar;
ap++){at=av[ap];
this._createAssignment(at,ao);
}al.sync();
},cancelTask:function(){var ak=this._editor;
var aj=ak.container;
if(aj){ak.close();
}},editTask:function(al){var aj=typeof al==="string"?this.dataSource.getByUid(al):al;
if(!aj){return;
}var ak=this.dataSource._createNewModel(aj.toJSON());
ak.uid=aj.uid;
this.cancelTask();
this._editTask(ak);
},_editTask:function(aj){this._editor.editTask(aj);
},saveTask:function(am,an){var al=this._editor;
var aj=al.container;
var ak=al.editable;
if(aj&&ak&&ak.end()){this._updateTask(am,an);
}},_updateTask:function(ak,al){var aj=this.resources.field;
if(!this.trigger("save",{task:ak,values:al})){this._preventRefresh=true;
this.dataSource.update(ak,al);
if(al[aj]){this._updateAssignments(ak.get("id"),al[aj]);
}this._syncDataSource();
}},_updateAssignment:function(aj,al){var ak=this.assignments.dataValueField;
aj.set(ak,al);
},removeTask:function(al){var ak=this;
var aj=typeof al==="string"?this.dataSource.getByUid(al):al;
if(!aj){return;
}this._taskConfirm(function(am){if(!am){ak._removeTask(aj);
}},aj);
},_createTask:function(al,ak){if(!this.trigger("add",{task:al,dependency:null})){var aj=this.dataSource;
this._preventRefresh=true;
if(ak===af){aj.add(al);
}else{aj.insert(ak,al);
}this._scrollToUid=al.uid;
this._syncDataSource();
}},_createDependency:function(aj){if(!this.trigger("add",{task:null,dependency:aj})){this._preventDependencyRefresh=true;
this.dependencies.add(aj);
this._preventDependencyRefresh=false;
this.dependencies.sync();
}},_createAssignment:function(an,am){var ak=this.assignments;
var al=ak.dataSource;
var aq=ak.dataTaskIdField;
var ao=ak.dataResourceIdField;
var ap=ak.dataValueField;
var aj=al._createNewModel();
aj[aq]=am;
aj[ao]=an.get("id");
aj[ap]=an.get("value");
al.add(aj);
},removeDependency:function(al){var ak=this;
var aj=typeof al==="string"?this.dependencies.getByUid(al):al;
if(!aj){return;
}this._dependencyConfirm(function(am){if(!am){ak._removeDependency(aj);
}},aj);
},_removeTaskDependencies:function(am,aj){this._preventDependencyRefresh=true;
for(var ak=0,al=aj.length;
ak<al;
ak++){this.dependencies.remove(aj[ak]);
}this._preventDependencyRefresh=false;
this.dependencies.sync();
},_removeTaskAssignments:function(ao){var ak=this.assignments.dataSource;
var aj=ak.view();
var al={field:this.assignments.dataTaskIdField,operator:"eq",value:ao.get("id")};
aj=new S(aj).filter(al).toArray();
this._preventRefresh=true;
for(var am=0,an=aj.length;
am<an;
am++){ak.remove(aj[am]);
}this._preventRefresh=false;
ak.sync();
},_removeTask:function(ak){var aj=this.dependencies.dependencies(ak.id);
if(!this.trigger("remove",{task:ak,dependencies:aj})){this._removeTaskDependencies(ak,aj);
this._removeTaskAssignments(ak);
this._preventRefresh=true;
if(this.dataSource.remove(ak)){this._syncDataSource();
}this._preventRefresh=false;
}},_removeDependency:function(aj){if(!this.trigger("remove",{task:null,dependencies:[aj]})){if(this.dependencies.remove(aj)){this.dependencies.sync();
}}},_removeAssignment:function(aj){this.assignments.dataSource.remove(aj);
},_taskConfirm:function(aj,al){var ak=this.options.messages;
this._confirm(aj,{model:al,text:ak.deleteTaskConfirmation,title:ak.deleteTaskWindowTitle});
},_dependencyConfirm:function(aj,ak){var al=this.options.messages;
this._confirm(aj,{model:ak,text:al.deleteDependencyConfirmation,title:al.deleteDependencyWindowTitle});
},_confirm:function(ak,an){var al=this.options.editable;
var am;
var aj;
if(al===true||al.confirmation!==false){am=this.options.messages;
aj=[{name:"delete",text:am.destroy,className:w.styles.primary,click:function(){ak();
}},{name:"cancel",text:am.cancel,click:function(){ak(true);
}}];
this.showDialog(u(true,{},an,{buttons:aj}));
}else{ak();
}},showDialog:function(aj){this._editor.showDialog(aj);
},refresh:function(){if(this._preventRefresh||this.list.editable){return;
}this._progress(false);
var am=this.dataSource;
var ao=am.taskTree();
var an=this._scrollToUid;
var al;
var ak;
var aj=-1;
if(this.current){ak=this.current.closest("tr").attr(H.attr("uid"));
aj=this.current.index();
}if(this.trigger("dataBinding")){return;
}if(this.resources.dataSource.data().length!==0){this._assignResources(ao);
}if(this._editor){this._editor.close();
}this.clearSelection();
this.list._render(ao);
this.timeline._render(ao);
this.timeline._renderDependencies(this.dependencies.view());
if(an){this._scrollTo(an);
this.select(W(an));
}if((an||ak)&&aj>=0){al=this.list.content.find("tr"+W(an||ak)+" > td:eq("+aj+")");
this._current(al);
}this._scrollToUid=null;
this.trigger("dataBound");
},refreshDependencies:function(){if(this._preventDependencyRefresh){return;
}if(this.trigger("dataBinding")){return;
}this.timeline._renderDependencies(this.dependencies.view());
this.trigger("dataBound");
},_assignResources:function(aq){var ap=this.resources;
var al=this.assignments;
var am=function(){var at=al.dataSource.view();
var au={field:al.dataTaskIdField};
at=new S(at).group(au).toArray();
return at;
};
var ak=am();
var aj=function(aw,at){var ax=aw.get("id");
H.setter(ap.field)(aw,new N([]));
for(var au=0,av=ak.length;
au<av;
au++){if(ak[au].value===ax){at(aw,ak[au].items);
}}};
var ar=function(aB,av){for(var aw=0,ax=av.length;
aw<ax;
aw++){var au=av[aw];
var ay=ap.dataSource.get(au.get(al.dataResourceIdField));
var aA=au.get(al.dataValueField);
var az=au.get(al.dataResourceIdField);
var aC=ay.get(ap.dataFormatField)||P;
var at=H.toString(aA,aC);
aB[ap.field].push(new O({id:az,name:ay.get(ap.dataTextField),color:ay.get(ap.dataColorField),value:aA,formatedValue:at}));
}};
for(var an=0,ao=aq.length;
an<ao;
an++){aj(aq[an],ar);
}},_wrapResourceData:function(al){var ar=this;
var ap=[];
var an;
var ao=this.resources.dataSource.view();
var aj=this.assignments.dataSource.view();
var aq=new S(aj).filter({field:ar.assignments.dataTaskIdField,operator:"eq",value:al}).toArray();
var at=function(au){var av=null;
new S(aq).filter({field:ar.assignments.dataResourceIdField,operator:"eq",value:au}).select(function(aw){av+=aw.get(ar.assignments.dataValueField);
});
return av;
};
for(var ak=0,am=ao.length;
ak<am;
ak++){an=ao[ak];
ap.push({id:an.get("id"),name:an.get(ar.resources.dataTextField),format:an.get(ar.resources.dataFormatField)||P,value:at(an.id)});
}return ap;
},_syncDataSource:function(){this._preventRefresh=false;
this._requestStart();
this.dataSource.sync();
},_requestStart:function(){this._progress(true);
},_error:function(){this._progress(false);
},_progress:function(aj){H.ui.progress(this.element,aj);
},_resizable:function(){var al=this;
var ar=this.wrapper;
var ak=w.styles;
var aj=r+ak.gridContent;
var aq=ar.find(r+ak.list);
var ao=ar.find(r+ak.timeline);
var ap;
var an;
var am;
this._resizeDraggable=ar.find(r+ak.splitBar).height(aq.height()).hover(function(){b(this).addClass(ak.splitBarHover);
},function(){b(this).removeClass(ak.splitBarHover);
}).end().kendoResizable({orientation:"horizontal",handle:r+ak.splitBar,start:function(){ap=aq.width();
an=ao.width();
am=ao.find(aj).scrollLeft();
},resize:function(au){var at=au.x.initialDelta;
if(H.support.isRtl(ar)){at*=-1;
}if(ap+at<0||an-at<0){return;
}aq.width(ap+at);
ao.width(an-at);
ao.find(aj).scrollLeft(am+at);
al.timeline.view()._renderCurrentTime();
}}).data("kendoResizable");
},_scrollable:function(){var am=this;
var ak=w.styles;
var aj=r+ak.gridContent;
var al=r+ak.gridHeaderWrap;
var ao=this.timeline.element.find(al);
var an=this.timeline.element.find(aj);
var aq=this.list.element.find(al);
var ap=this.list.element.find(aj);
if(K){ap.css("overflow-y","auto");
}an.on("scroll",function(){am.scrollTop=this.scrollTop;
ao.scrollLeft(this.scrollLeft);
ap.scrollTop(this.scrollTop);
});
ap.on("scroll",function(){aq.scrollLeft(this.scrollLeft);
}).on("DOMMouseScroll"+L+" mousewheel"+L,function(at){var au=an.scrollTop();
var ar=H.wheelDeltaY(at);
if(ar){at.preventDefault();
b(at.currentTarget).one("wheel"+L,false);
an.scrollTop(au+-ar);
}});
},_navigatable:function(){var ay=this;
var av=this.options.navigatable;
var an=this.options.editable;
var aq=this.list.header.find("table");
var al=this.list.content.find("table");
var ap=w.styles;
var ar=H.support.isRtl(this.wrapper);
var az=this.timeline.element.find(r+ap.gridContent);
var ax=aq.add(al);
var aj=W();
var ak;
var ao={collapse:false,expand:true};
var aw=function(aB){var aC=ay.timeline.view()._timeSlots()[0].offsetWidth;
az.scrollLeft(az.scrollLeft()+(aB?-aC:aC));
};
var au=function(aC){var aD=ay.current.parent("tr"+W());
var aB=ay.current.index();
var aE=aD[aC]();
if(ay.select().length!==0){ay.clearSelection();
}if(aE.length!==0){ay._current(aE.children("td:eq("+aB+")"));
ay._scrollTo(ay.current);
}else{if(ay.current.is("td")&&aC=="prev"){v(aq);
}else{if(ay.current.is("th")&&aC=="next"){v(al);
}}}};
var at=function(aB){var aC=ay.current[aB]();
if(aC.length!==0){ay._current(aC);
ak=ay.current.index();
}};
var aA=function(aC){var aB=ay.dataItem(ay.current);
if(aB.summary&&aB.expanded!==aC){aB.set("expanded",aC);
}};
var am=function(){var aB=ay.options.editable;
if(!aB||aB.destroy===false||ay.list.editable){return;
}var aC=ay.select();
var aD=H.attr("uid");
if(aC.length){ay.removeTask(aC.attr(aD));
}};
b(this.wrapper).on("mousedown"+L,"tr"+aj+", div"+aj+":not("+r+ap.line+")",function(aD){var aC=b(aD.currentTarget);
var aE=b(aD.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap");
var aB;
if(aD.ctrlKey){return;
}if(av){if(aC.is("tr")){aB=b(aD.target).closest("td");
}else{aB=ay.list.content.find("tr"+W(aC.attr(H.attr("uid")))+" > td:first");
}ay._current(aB);
}if((av||an)&&!aE){ay._focusTimeout=setTimeout(function(){v(ay.list.content.find("table"),true);
},2);
}});
if(av!==true){al.on("keydown"+L,function(aB){if(aB.keyCode==I.DELETE){am();
}});
return;
}ax.on("focus"+L,function(){var aD=this===al.get(0)?"td":"th";
var aC=ay.select();
var aB=ay.current||b(aC.length?aC:this).find(aD+":eq("+(ak||0)+")");
ay._current(aB);
}).on("blur"+L,function(){ay._current();
if(this==aq){b(this).attr(Z,-1);
}}).on("keydown"+L,function(aB){var aD=aB.keyCode;
var aC;
if(!ay.current){return;
}aC=ay.current.is("td");
switch(aD){case I.RIGHT:aB.preventDefault();
if(aB.altKey){aw();
}else{if(aB.ctrlKey){aA(ar?ao.collapse:ao.expand);
}else{at(ar?"prev":"next");
}}break;
case I.LEFT:aB.preventDefault();
if(aB.altKey){aw(true);
}else{if(aB.ctrlKey){aA(ar?ao.expand:ao.collapse);
}else{at(ar?"next":"prev");
}}break;
case I.UP:aB.preventDefault();
au("prev");
break;
case I.DOWN:aB.preventDefault();
au("next");
break;
case I.SPACEBAR:aB.preventDefault();
if(aC){ay.select(ay.current.closest("tr"));
}break;
case I.ENTER:aB.preventDefault();
if(aC){if(ay.options.editable&&ay.options.editable.update!==false){ay._cachedCurrent=ay.current;
ay.list._startEditHandler(ay.current);
b(this).one("keyup",function(aE){aE.stopPropagation();
});
}}else{ay.current.children("a.k-link").click();
}break;
case I.ESC:aB.stopPropagation();
break;
case I.DELETE:if(aC){am();
}break;
default:if(aD>=49&&aD<=57){ay.view(ay.timeline._viewByIndex(aD-49));
}break;
}});
},_current:function(ak){var al=w.styles;
var aj;
if(this.current&&this.current.length){this.current.removeClass(al.focused).removeAttr("id");
}if(ak&&ak.length){this.current=ak.addClass(al.focused).attr("id",c);
aj=b(H._activeElement());
if(aj.is("table")&&this.wrapper.find(aj).length>0){aj.removeAttr(e).attr(e,c);
}}else{this.current=null;
}},_dataBind:function(){var ak=this;
if(ak.options.autoBind){this._preventRefresh=true;
this._preventDependencyRefresh=true;
var aj=b.map([this.dataSource,this.dependencies,this.resources.dataSource,this.assignments.dataSource],function(al){return al.fetch();
});
b.when.apply(null,aj).done(function(){ak._preventRefresh=false;
ak._preventDependencyRefresh=false;
ak.refresh();
});
}},_resize:function(){this._adjustDimensions();
this.timeline.view()._adjustHeight();
this.timeline.view()._renderCurrentTime();
this.list._adjustHeight();
}});
if(H.PDFMixin){H.PDFMixin.extend(w.fn);
w.fn._drawPDF=function(){var ak=w.styles;
var al="."+ak.list;
var am=this.wrapper.find(al).width();
var aj=this.wrapper.clone();
aj.find(al).css("width",am);
return this._drawPDFShadow({content:aj},{avoidLinks:this.options.pdf.avoidLinks});
};
}H.ui.plugin(w);
u(true,w,{styles:A});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
