(function(b,a){a("util/main",["kendo.core"],b);
}(function(){(function(){var q=Math,n=window.kendo,f=n.deepExtend;
var i=q.PI/180,r=Number.MAX_VALUE,u=-Number.MAX_VALUE,N="undefined";
function g(P){return typeof P!==N;
}function G(R,Q){var P=x(Q);
return q.round(R*P)/P;
}function x(P){if(P){return q.pow(10,P);
}else{return 1;
}}function p(R,Q,P){return q.max(q.min(R,P),Q);
}function y(P){return P*i;
}function h(P){return P/i;
}function l(P){return typeof P==="number"&&!isNaN(P);
}function O(Q,P){return g(Q)?Q:P;
}function K(P){return P*P;
}function w(Q){var R=[];
for(var P in Q){R.push(P+Q[P]);
}return R.sort().join("");
}function j(R){var P=2166136261;
for(var Q=0;
Q<R.length;
++Q){P+=(P<<1)+(P<<4)+(P<<7)+(P<<8)+(P<<24);
P^=R.charCodeAt(Q);
}return P>>>0;
}function k(P){return j(w(P));
}var v=Date.now;
if(!v){v=function(){return new Date().getTime();
};
}function c(P){var R=P.length,Q,T=r,S=u;
for(Q=0;
Q<R;
Q++){S=q.max(S,P[Q]);
T=q.min(T,P[Q]);
}return{min:T,max:S};
}function e(P){return c(P).min;
}function d(P){return c(P).max;
}function J(P){return H(P).min;
}function I(P){return H(P).max;
}function H(P){var T=r,S=u;
for(var Q=0,R=P.length;
Q<R;
Q++){var U=P[Q];
if(U!==null&&isFinite(U)){T=q.min(T,U);
S=q.max(S,U);
}}return{min:T===r?undefined:T,max:S===u?undefined:S};
}function o(P){if(P){return P[P.length-1];
}}function a(P,Q){P.push.apply(P,Q);
return P;
}function E(P){return n.template(P,{useWithBlock:false,paramName:"d"});
}function A(P,Q){return g(Q)&&Q!==null?" "+P+"='"+Q+"' ":"";
}function z(P){var R="";
for(var Q=0;
Q<P.length;
Q++){R+=A(P[Q][0],P[Q][1]);
}return R;
}function D(P){var R="";
for(var Q=0;
Q<P.length;
Q++){var S=P[Q][1];
if(g(S)){R+=P[Q][0]+":"+S+";";
}}if(R!==""){return R;
}}function C(P){if(typeof P!=="string"){P+="px";
}return P;
}function B(R){var S=[];
if(R){var Q=n.toHyphens(R).split("-");
for(var P=0;
P<Q.length;
P++){S.push("k-pos-"+Q[P]);
}}return S.join(" ");
}function m(P){return P===""||P===null||P==="none"||P==="transparent"||!g(P);
}function b(Q){var P={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1000:"m"};
var S=[1000,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];
var R="";
while(Q>0){if(Q<S[0]){S.shift();
}else{R+=P[S[0]];
Q-=S[0];
}}return R;
}function F(S){S=S.toLowerCase();
var P={i:1,v:5,x:10,l:50,c:100,d:500,m:1000};
var U=0,R=0;
for(var Q=0;
Q<S.length;
++Q){var T=P[S.charAt(Q)];
if(!T){return null;
}U+=T;
if(T>R){U-=2*R;
}R=T;
}return U;
}function s(Q){var P=Object.create(null);
return function(){var S="";
for(var R=arguments.length;
--R>=0;
){S+=":"+arguments[R];
}if(S in P){return P[S];
}return Q.apply(this,arguments);
};
}function L(T){var S=[],P=0,R=T.length,U,Q;
while(P<R){U=T.charCodeAt(P++);
if(U>=55296&&U<=56319&&P<R){Q=T.charCodeAt(P++);
if((Q&64512)==56320){S.push(((U&1023)<<10)+(Q&1023)+65536);
}else{S.push(U);
P--;
}}else{S.push(U);
}}return S;
}function M(P){return P.map(function(R){var Q="";
if(R>65535){R-=65536;
Q+=String.fromCharCode(R>>>10&1023|55296);
R=56320|R&1023;
}Q+=String.fromCharCode(R);
return Q;
}).join("");
}function t(P,Q){if(P.length<2){return P.slice();
}function R(T,V){var Y=[],U=0,W=0,X=0;
while(U<T.length&&W<V.length){if(Q(T[U],V[W])<=0){Y[X++]=T[U++];
}else{Y[X++]=V[W++];
}}if(U<T.length){Y.push.apply(Y,T.slice(U));
}if(W<V.length){Y.push.apply(Y,V.slice(W));
}return Y;
}return function S(T){if(T.length<=1){return T;
}var V=Math.floor(T.length/2);
var U=T.slice(0,V);
var W=T.slice(V);
U=S(U);
W=S(W);
return R(U,W);
}(P);
}f(n,{util:{MAX_NUM:r,MIN_NUM:u,append:a,arrayLimits:c,arrayMin:e,arrayMax:d,defined:g,deg:h,hashKey:j,hashObject:k,isNumber:l,isTransparent:m,last:o,limitValue:p,now:v,objectKey:w,round:G,rad:y,renderAttr:A,renderAllAttr:z,renderPos:B,renderSize:C,renderStyle:D,renderTemplate:E,sparseArrayLimits:H,sparseArrayMin:J,sparseArrayMax:I,sqr:K,valueOrDefault:O,romanToArabic:F,arabicToRoman:b,memoize:s,ucs2encode:M,ucs2decode:L,mergeSort:t}});
n.drawing.util=n.util;
n.dataviz.util=n.util;
}());
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("util/text-metrics",["kendo.core","util/main"],b);
}(function(){(function(a){var e=document,f=window.kendo,b=f.Class,k=f.util,d=k.defined;
var h=b.extend({init:function(m){this._size=m;
this._length=0;
this._map={};
},put:function(n,q){var o=this,p=o._map,m={key:n,value:q};
p[n]=m;
if(!o._head){o._head=o._tail=m;
}else{o._tail.newer=m;
m.older=o._tail;
o._tail=m;
}if(o._length>=o._size){p[o._head.key]=null;
o._head=o._head.newer;
o._head.older=null;
}else{o._length++;
}},get:function(n){var o=this,m=o._map[n];
if(m){if(m===o._head&&m!==o._tail){o._head=m.newer;
o._head.older=null;
}if(m!==o._tail){if(m.older){m.older.newer=m.newer;
m.newer.older=m.older;
}m.older=o._tail;
m.newer=null;
o._tail.newer=m;
o._tail=m;
}return m.value;
}}});
var c=a("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;' />")[0];
function l(){return{width:0,height:0,baseline:0};
}var j=b.extend({init:function(m){this._cache=new h(1000);
this._initOptions(m);
},options:{baselineMarkerSize:1},measure:function(v,t,n){if(!v){return l();
}var u=k.objectKey(t),p=k.hashKey(v+u),o=this._cache.get(p);
if(o){return o;
}var s=l();
var r=n?n:c;
var m=this._baselineMarker().cloneNode(false);
for(var q in t){var w=t[q];
if(d(w)){r.style[q]=w;
}}a(r).text(v);
r.appendChild(m);
e.body.appendChild(r);
if((v+"").length){s.width=r.offsetWidth-this.options.baselineMarkerSize;
s.height=r.offsetHeight;
s.baseline=m.offsetTop+this.options.baselineMarkerSize;
}if(s.width>0&&s.height>0){this._cache.put(p,s);
}r.parentNode.removeChild(r);
return s;
},_baselineMarker:function(){return a("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;' />")[0];
}});
j.current=new j();
function i(o,n,m){return j.current.measure(o,n,m);
}function g(o,m){var p=[];
if(o.length>0&&document.fonts){try{p=o.map(function(q){return document.fonts.load(q);
});
}catch(n){f.logToConsole(n);
}Promise.all(p).then(m,m);
}else{m();
}}f.util.TextMetrics=j;
f.util.LRUCache=h;
f.util.loadFonts=g;
f.util.measureText=i;
}(window.kendo.jQuery));
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("util/base64",["util/main"],b);
}(function(){(function(){var e=window.kendo,a=e.deepExtend,d=String.fromCharCode;
var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function b(p){var q="";
var g,h,j,k,l,m,n;
var o=0;
p=c(p);
while(o<p.length){g=p.charCodeAt(o++);
h=p.charCodeAt(o++);
j=p.charCodeAt(o++);
k=g>>2;
l=(g&3)<<4|h>>4;
m=(h&15)<<2|j>>6;
n=j&63;
if(isNaN(h)){m=n=64;
}else{if(isNaN(j)){n=64;
}}q=q+f.charAt(k)+f.charAt(l)+f.charAt(m)+f.charAt(n);
}return q;
}function c(j){var k="";
for(var h=0;
h<j.length;
h++){var g=j.charCodeAt(h);
if(g<128){k+=d(g);
}else{if(g<2048){k+=d(192|g>>>6);
k+=d(128|g&63);
}else{if(g<65536){k+=d(224|g>>>12);
k+=d(128|g>>>6&63);
k+=d(128|g&63);
}}}}return k;
}a(e.util,{encodeBase64:b,encodeUTF8:c});
}());
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("mixins/observers",["kendo.core"],b);
}(function(){(function(a){var e=Math,d=window.kendo,b=d.deepExtend,c=a.inArray;
var f={observers:function(){this._observers=this._observers||[];
return this._observers;
},addObserver:function(g){if(!this._observers){this._observers=[g];
}else{this._observers.push(g);
}return this;
},removeObserver:function(g){var i=this.observers();
var h=c(g,i);
if(h!=-1){i.splice(h,1);
}return this;
},trigger:function(i,g){var k=this._observers;
var j;
var h;
if(k&&!this._suspended){for(h=0;
h<k.length;
h++){j=k[h];
if(j[i]){j[i](g);
}}}return this;
},optionsChange:function(g){g=g||{};
g.element=this;
this.trigger("optionsChange",g);
},geometryChange:function(){this.trigger("geometryChange",{element:this});
},suspend:function(){this._suspended=(this._suspended||0)+1;
return this;
},resume:function(){this._suspended=e.max((this._suspended||0)-1,0);
return this;
},_observerField:function(g,h){if(this[g]){this[g].removeObserver(this);
}this[g]=h;
h.addObserver(this);
}};
b(d,{mixins:{ObserversMixin:f}});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("kendo.grid",["kendo.data","kendo.columnsorter","kendo.editable","kendo.window","kendo.filtermenu","kendo.columnmenu","kendo.groupable","kendo.pager","kendo.selectable","kendo.sortable","kendo.reorderable","kendo.resizable","kendo.mobile.actionsheet","kendo.mobile.pane","kendo.ooxml","kendo.excel","kendo.progressbar","kendo.pdf"],b);
}(function(){var a={id:"grid",name:"Grid",category:"web",description:"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.",depends:["data","columnsorter"],features:[{id:"grid-editing",name:"Editing",description:"Support for record editing",depends:["editable","window"]},{id:"grid-filtering",name:"Filtering",description:"Support for record filtering",depends:["filtermenu"]},{id:"grid-columnmenu",name:"Column menu",description:"Support for header column menu",depends:["columnmenu"]},{id:"grid-grouping",name:"Grouping",description:"Support for grid grouping",depends:["groupable"]},{id:"grid-filtercell",name:"Row filter",description:"Support for grid header filtering",depends:["filtercell"]},{id:"grid-paging",name:"Paging",description:"Support for grid paging",depends:["pager"]},{id:"grid-selection",name:"Selection",description:"Support for row selection",depends:["selectable"]},{id:"grid-column-reorder",name:"Column reordering",description:"Support for column reordering",depends:["reorderable"]},{id:"grid-column-resize",name:"Column resizing",description:"Support for column resizing",depends:["resizable"]},{id:"grid-mobile",name:"Grid adaptive rendering",description:"Support for adaptive rendering",depends:["mobile.actionsheet","mobile.pane"]},{id:"grid-excel-export",name:"Excel export",description:"Export grid data as Excel spreadsheet",depends:["excel"]},{id:"grid-pdf-export",name:"PDF export",description:"Export grid data as PDF",depends:["pdf","drawing","progressbar"]}]};
(function(b,bm){var aB=window.kendo,bl=aB.ui,F=aB.data.DataSource,bi=aB.support.tbodyInnerHtml,c=aB._activeElement,bw=bl.Widget,aC=aB.keys,ay=b.isPlainObject,P=b.extend,aG=b.map,ad=b.grep,ap=b.isArray,ao=b.inArray,aZ=Array.prototype.push,aY=b.proxy,at=aB.isFunction,ar=b.isEmptyObject,aI=Math,aX="progress",O="error",D=":not(.k-group-cell):not(.k-hierarchy-cell):visible",a8="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",aN="tr:not(.k-footer-template):visible",aL=":not(.k-group-cell):not(.k-hierarchy-cell):visible",U=aN+":first>"+aL+":first",ak="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",aV=".kendoGrid",M="edit",a5="save",a0="remove",L="detailInit",Q="filterMenuInit",p="columnMenuInit",k="change",n="columnHide",v="columnShow",a6="saveChanges",E="dataBound",K="detailExpand",J="detailCollapse",X="k-state-focused",a7="k-state-selected",aR="k-grid-norecords",u="columnResize",t="columnReorder",o="columnLock",x="columnUnlock",aM="navigate",m="click",al="height",bf="tabIndex",ab="function",bc="string",H="Are you sure you want to delete this record?",aQ="No records available.",A="Delete",j="Cancel",aa=/(\}|\#)/gi,bj=/#/gi,bv="[\\x20\\t\\r\\n\\f]",aO=new RegExp("(^|"+bv+")(k-group-cell|k-hierarchy-cell)("+bv+"|$)"),R=new RegExp("(^|"+bv+")(k-filter-row)("+bv+"|$)"),z='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',az=false,i=aB.support.browser,au=i.msie&&i.version==7,av=i.msie&&i.version==8;
var bq=bw.extend({init:function(bx,by){var bz=this;
bw.fn.init.call(bz,bx,by);
bz._refreshHandler=aY(bz.refresh,bz);
bz.setDataSource(by.dataSource);
bz.wrap();
},setDataSource:function(bx){var by=this;
if(by.dataSource){by.dataSource.unbind(k,by._refreshHandler);
}by.dataSource=bx;
by.dataSource.bind(k,by._refreshHandler);
},options:{name:"VirtualScrollable",itemHeight:b.noop,prefetch:true},destroy:function(){var bx=this;
bw.fn.destroy.call(bx);
bx.dataSource.unbind(k,bx._refreshHandler);
bx.wrapper.add(bx.verticalScrollbar).off(aV);
if(bx.drag){bx.drag.destroy();
bx.drag=null;
}bx.wrapper=bx.element=bx.verticalScrollbar=null;
bx._refreshHandler=null;
},wrap:function(){var bz=this,by=aB.support.scrollbar()+1,bx=bz.element,bA;
bx.css({width:"auto",overflow:"hidden"}).css(az?"padding-left":"padding-right",by);
bz.content=bx.children().first();
bA=bz.wrapper=bz.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+aV+" mousewheel"+aV,aY(bz._wheelScroll,bz));
if(aB.support.kineticScrollNeeded){bz.drag=new aB.UserEvents(bz.wrapper,{global:true,start:function(bB){bB.sender.capture();
},move:function(bB){bz.verticalScrollbar.scrollTop(bz.verticalScrollbar.scrollTop()-bB.y.delta);
bA.scrollLeft(bA.scrollLeft()-bB.x.delta);
bB.preventDefault();
}});
}bz.verticalScrollbar=b('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:by}).appendTo(bx).bind("scroll"+aV,aY(bz._scroll,bz));
},_wheelScroll:function(by){if(by.ctrlKey){return;
}var bz=this.verticalScrollbar,bA=bz.scrollTop(),bx=aB.wheelDeltaY(by);
if(bx&&!(bx>0&&bA===0)&&!(bx<0&&bA+bz[0].clientHeight==bz[0].scrollHeight)){by.preventDefault();
this.verticalScrollbar.scrollTop(bA+-bx);
}},_scroll:function(bz){var bI=this,by=!bI.options.prefetch,bF=bz.currentTarget.scrollTop,bx=bI.dataSource,bE=bI.itemHeight,bG=bx.skip()||0,bH=bI._rangeStart||bG,bB=bI.element.innerHeight(),bC=!!(bI._scrollbarTop&&bI._scrollbarTop>bF),bA=aI.max(aI.floor(bF/bE),0),bD=aI.max(bA+aI.floor(bB/bE),0);
bI._scrollTop=bF-bH*bE;
bI._scrollbarTop=bF;
bI._scrolling=by;
if(!bI._fetch(bA,bD,bC)){bI.wrapper[0].scrollTop=bI._scrollTop;
}if(by){if(bI._scrollingTimeout){clearTimeout(bI._scrollingTimeout);
}bI._scrollingTimeout=setTimeout(function(){bI._scrolling=false;
bI._page(bI._rangeStart,bI.dataSource.take());
},100);
}},itemIndex:function(by){var bx=this._rangeStart||this.dataSource.skip()||0;
return bx+by;
},position:function(bx){var bz=this._rangeStart||this.dataSource.skip()||0;
var by=this.dataSource.pageSize();
var bA;
if(bx>bz){bA=bx-bz+1;
}else{bA=bz-bx-1;
}return bA>by?by:bA;
},scrollIntoView:function(bC){var bx=this.wrapper[0];
var by=bx.clientHeight;
var bz=this._scrollTop||bx.scrollTop;
var bB=bC[0].offsetTop;
var bA=bC[0].offsetHeight;
if(bz>bB){this.verticalScrollbar[0].scrollTop-=by/2;
}else{if(bB+bA>=bz+by){this.verticalScrollbar[0].scrollTop+=by/2;
}}},_fetch:function(bA,bC,bF){var bH=this,by=bH.dataSource,bB=bH.itemHeight,bG=by.take(),bE=bH._rangeStart||by.skip()||0,bx=aI.floor(bA/bG)*bG,bz=false,bD=0.33;
if(bA<bE){bz=true;
bE=aI.max(0,bC-bG);
bH._scrollTop=(bA-bE)*bB;
bH._page(bE,bG);
}else{if(bC>=bE+bG&&!bF){bz=true;
bE=bA;
bH._scrollTop=bB;
bH._page(bE,bG);
}else{if(!bH._fetching&&bH.options.prefetch){if(bA<bx+bG-bG*bD&&bA>bG){by.prefetch(bx-bG,bG,b.noop);
}if(bC>bx+bG*bD){by.prefetch(bx+bG,bG,b.noop);
}}}}return bz;
},fetching:function(){return this._fetching;
},_page:function(bz,bA){var bB=this,by=!bB.options.prefetch,bx=bB.dataSource;
clearTimeout(bB._timeout);
bB._fetching=true;
bB._rangeStart=bz;
if(bx.inRange(bz,bA)){bx.range(bz,bA);
}else{if(!by){aB.ui.progress(bB.wrapper.parent(),true);
}bB._timeout=setTimeout(function(){if(!bB._scrolling){if(by){aB.ui.progress(bB.wrapper.parent(),true);
}bx.range(bz,bA);
}},100);
}},repaintScrollbar:function(){var bE=this,bz="",bC=250000,by=bE.dataSource,bD=!aB.support.kineticScrollNeeded?aB.support.scrollbar():0,bG=bE.wrapper[0],bF,bA,bB;
bB=bE.itemHeight=bE.options.itemHeight()||0;
var bx=bG.scrollWidth>bG.offsetWidth?bD:0;
bF=by.total()*bB+bx;
for(bA=0;
bA<aI.floor(bF/bC);
bA++){bz+='<div style="width:1px;height:'+bC+'px"></div>';
}if(bF%bC){bz+='<div style="width:1px;height:'+bF%bC+'px"></div>';
}bE.verticalScrollbar.html(bz);
bG.scrollTop=bE._scrollTop;
},refresh:function(){var bz=this,bx=bz.dataSource,by=bz._rangeStart;
aB.ui.progress(bz.wrapper.parent(),false);
clearTimeout(bz._timeout);
bz.repaintScrollbar();
if(bz.drag){bz.drag.cancel();
}if(by&&!bz._fetching){bz._rangeStart=bx.skip();
if(bx.page()===1){bz.verticalScrollbar[0].scrollTop=0;
}}bz._fetching=false;
}});
function af(bx){return new Array(bx+1).join('<td class="k-group-cell">&nbsp;</td>');
}function bd(by){var bx,bz=" ";
if(by){if(typeof by===bc){return by;
}for(bx in by){bz+=bx+'="'+by[bx]+'"';
}}return bz;
}var G={create:{text:"Add new record",imageClass:"k-i-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-i-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-i-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-i-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-i-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-i-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-i-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}};
function C(bx,by){b("th, th .k-grid-filter, th .k-link",bx).add(document.body).css("cursor",by);
}function a4(bB,bC,bz,bx,by){var bD=bC;
bC=b();
by=by||1;
for(var bA=0;
bA<by;
bA++){bC=bC.add(bB.eq(bD+bA));
}if(typeof bz=="number"){bC[bx?"insertBefore":"insertAfter"](bB.eq(bz));
}else{bC.appendTo(bz);
}}function N(bz,bx,by){return b(bz).add(bx).find(by);
}function h(bB,bA,bz){var bC,bD,bx,by;
bz=!ap(bz)?[bz]:bz;
for(bC=0,bD=bz.length;
bC<bD;
bC++){bx=bz[bC];
if(ay(bx)&&bx.click){by=bx.name||bx.text;
bA.on(m+aV,"a.k-grid-"+(by||"").replace(/\s/g,""),{commandName:by},aY(bx.click,bB));
}}}function aT(bx,by,bz){return aG(bx,function(bA){bA=typeof bA===bc?{field:bA}:bA;
var bB;
if(!aA(bA)||bz){bA.attributes=d(bA.attributes);
bA.footerAttributes=d(bA.footerAttributes);
bA.headerAttributes=d(bA.headerAttributes);
bB=true;
}if(bA.columns){bA.columns=aT(bA.columns,by,bB);
}var bC=aB.guid();
bA.headerAttributes=P({id:bC},bA.headerAttributes);
return P({encoded:by,hidden:bB},bA);
});
}function q(bx,by){var bz=[];
r(bx,by,bz);
return bz[bz.length-1];
}function r(bx,by,bB){bB=bB||[];
for(var bz=0;
bz<by.length;
bz++){if(bx===by[bz]){return true;
}else{if(by[bz].columns){var bA=bB.length;
bB.push(by[bz]);
if(!r(bx,by[bz].columns,bB)){bB.splice(bA,bB.length-bA);
}else{return true;
}}}}return false;
}function ba(bx,bz){var by=bz?a2:d;
bx.hidden=!bz;
bx.attributes=by(bx.attributes);
bx.footerAttributes=by(bx.footerAttributes);
bx.headerAttributes=by(bx.headerAttributes);
}function aq(){return this.style.display!=="none";
}function aA(bx){return br([bx]).length>0;
}function br(bx){return ad(bx,function(by){var bz=!by.hidden;
if(bz&&by.columns){bz=br(by.columns).length>0;
}return bz;
});
}function bk(bx){return b(bx).map(function(){return this.toArray();
});
}function bo(bx,by,bC){var bz=I(aF(by));
var bA=I(aP(by));
var bB=bx.rowSpan;
if(bC){if(bz>bA){bx.rowSpan=bB-(bz-bA)||1;
}else{bx.rowSpan=bB+(bA-bz);
}}else{if(bz>bA){bx.rowSpan=bB+(bz-bA);
}else{bx.rowSpan=bB-(bA-bz)||1;
}}}function aK(bE,bG,bC,bx,by,bz,bB){var bF=I(bE);
var bH=I([bG]);
if(bF>bH){var bA=new Array(bB+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>');
var bD=bz.children(":not(.k-filter-row)");
b(new Array(bF-bH+1).join("<tr>"+bA+"</tr>")).insertAfter(bD.last());
}e(bz,bF-bH);
aJ(bC,bx,by,bz);
}function bn(bH,bA,bE){bE=bE||0;
var bF;
var by;
var bx=bA;
bA=aD(bA);
var bz={};
var bG=bH.find(">tr:not(.k-filter-row)");
var bB=function(){var bI=b(this);
return !bI.hasClass("k-group-cell")&&!bI.hasClass("k-hierarchy-cell");
};
for(var bC=0,bD=bA.length;
bC<bD;
bC++){bF=s(bA[bC],bx);
if(!bz[bF.row]){bz[bF.row]=bG.eq(bF.row).find(".k-header").filter(bB);
}by=bz[bF.row].eq(bF.cell);
by.attr(aB.attr("index"),bE+bC);
}return bA.length;
}function I(bx){var bA=1;
var bz=0;
for(var by=0;
by<bx.length;
by++){if(bx[by].columns){var bB=I(bx[by].columns);
if(bB>bz){bz=bB;
}}}return bA+bz;
}function aJ(bC,by,bz,bA){var bE=y(bC[0],by);
var bG=bz.find(">tr:not(.k-filter-row):eq("+bE.row+")>th.k-header");
var bF=b();
var bD=bE.cell;
var bB;
for(bB=0;
bB<bC.length;
bB++){bF=bF.add(bG.eq(bD+bB));
}bA.find(">tr:not(.k-filter-row)").eq(bE.row).append(bF);
var bx=[];
for(bB=0;
bB<bC.length;
bB++){if(bC[bB].columns){bx=bx.concat(bC[bB].columns);
}}if(bx.length){aJ(bx,by,bz,bA);
}}function s(by,bz,bC,bx){var bB;
var bA;
bC=bC||0;
bx=bx||{};
bx[bC]=bx[bC]||0;
for(bA=0;
bA<bz.length;
bA++){if(bz[bA]==by){bB={cell:bx[bC],row:bC};
break;
}else{if(bz[bA].columns){bB=s(by,bz[bA].columns,bC+1,bx);
if(bB){break;
}}}bx[bC]++;
}return bB;
}function S(bx,by,bB,bA){var bC;
var bz=bB.locked;
do{bC=bx[by];
by+=bA?1:-1;
}while(bC&&by>-1&&by<bx.length&&bC!=bB&&!bC.columns&&bC.locked==bz);
return bC;
}function T(by,bE,bC,bx){if(bE.columns){bE=bE.columns;
return bE[bx?0:bE.length-1];
}else{var bA=q(bE,by);
var bB;
if(bA){bB=bA.columns;
}else{bB=by;
}var bz=ao(bE,bB);
if(bz===0&&bx){bz++;
}else{if(bz==bB.length-1&&!bx){bz--;
}else{if(bz>0||bz===0&&!bx){bz+=bx?-1:1;
}}}var bD=ao(bC,bB);
bE=S(bB,bz,bC,bD>bz);
if(bE&&bE!=bC&&bE.columns){return T(by,bE,bC,bx);
}}return null;
}function y(by,bz,bC,bx){var bB;
var bA;
bC=bC||0;
bx=bx||{};
bx[bC]=bx[bC]||0;
for(bA=0;
bA<bz.length;
bA++){if(bz[bA]==by){bB={cell:bx[bC],row:bC};
break;
}else{if(bz[bA].columns){bB=y(by,bz[bA].columns,bC+1,bx);
if(bB){break;
}}}if(!bz[bA].hidden){bx[bC]++;
}}return bB;
}function W(bx){var by=V(aF(bx));
return by.concat(V(aP(bx)));
}function V(by){var bA=[];
var bx=[];
for(var bz=0;
bz<by.length;
bz++){bA.push(by[bz]);
if(by[bz].columns){bx=bx.concat(by[bz].columns);
}}if(bx.length){bA=bA.concat(V(bx));
}return bA;
}function am(by){var bz=0;
var bx;
for(var bA=0;
bA<by.length;
bA++){bx=by[bA];
if(bx.columns){bz+=am(bx.columns);
}else{if(bx.hidden){bz++;
}}}return bz;
}function w(bx){var by,bB=0;
for(var bz=0,bA=bx.length;
bz<bA;
bz++){by=bx[bz].style.width;
if(by&&by.indexOf("%")==-1){bB+=parseInt(by,10);
}}return bB;
}function a3(by,bz){var bx=by.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");
var bB;
for(var bA=0;
bA<bx.length;
bA++){bB=bx[bA].rowSpan;
if(bB>1){bx[bA].rowSpan=bB-bz||1;
}}}function e(by,bz){var bx=by.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");
for(var bA=0;
bA<bx.length;
bA++){bx[bA].rowSpan+=bz;
}}function a1(by){var bB=by.find("tr:not(.k-filter-row)");
var bz=bB.filter(function(){return !b(this).children().length;
}).remove().length;
var bx=bB.find("th:not(.k-group-cell,.k-hierarchy-cell)");
for(var bA=0;
bA<bx.length;
bA++){if(bx[bA].rowSpan>1){bx[bA].rowSpan-=bz;
}}return bB.length-bz;
}function aH(bz,bx,bF,bE,bC){var bA,bD,bB,by=[];
for(bA=0,bB=bz.length;
bA<bB;
bA++){bD=bF[bE]||[];
bD.push(bx.eq(bC+bA));
bF[bE]=bD;
if(bz[bA].columns){by=by.concat(bz[bA].columns);
}}if(by.length){aH(by,bx,bF,bE+1,bC+bz.length);
}}function aF(bx){return ad(bx,function(by){return by.locked;
});
}function aP(bx){return ad(bx,function(by){return !by.locked;
});
}function bu(bx){return ad(bx,function(by){return !by.locked&&aA(by);
});
}function bt(bx){return ad(bx,function(by){return by.locked&&aA(by);
});
}function bs(bx){var bz=[];
for(var by=0;
by<bx.length;
by++){if(bx[by].hidden){continue;
}if(bx[by].columns){bz=bz.concat(bs(bx[by].columns));
}else{bz.push(bx[by]);
}}return bz;
}function aD(bx){var bz=[];
for(var by=0;
by<bx.length;
by++){if(!bx[by].columns){bz.push(bx[by]);
continue;
}bz=bz.concat(aD(bx[by].columns));
}return bz;
}function aE(by){var bB=by.find(">tr:not(.k-filter-row)");
var bz=function(){var bC=b(this);
return !bC.hasClass("k-group-cell")&&!bC.hasClass("k-hierarchy-cell");
};
var bx=b();
if(bB.length>1){bx=bB.find("th").filter(bz).filter(function(){return this.rowSpan>1;
});
}bx=bx.add(bB.last().find("th").filter(bz));
var bA=aB.attr("index");
bx.sort(function(bC,bD){bC=b(bC);
bD=b(bD);
var bE=bC.attr(bA);
var bF=bD.attr(bA);
if(bE===bm){bE=b(bC).index();
}if(bF===bm){bF=b(bD).index();
}bE=parseInt(bE,10);
bF=parseInt(bF,10);
return bE>bF?1:bE<bF?-1:0;
});
return bx;
}function aW(bx){var by=bx.closest("table");
var bI=b().add(bx);
var bJ=bx.closest("tr");
var bz=by.find("tr:not(.k-filter-row)");
var bC=bz.index(bJ);
if(bC>0){var bE=bz.eq(bC-1);
var bG=bE.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return !b(this).attr("rowspan");
});
var bD=0;
var bB=bJ.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(bx);
var bH=bx.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1;
});
for(var bA=0;
bA<bH.length;
bA++){bD+=bH[bA].colSpan||1;
}bB+=Math.max(bD-1,0);
bD=0;
for(bA=0;
bA<bG.length;
bA++){var bF=bG.eq(bA);
if(bF.attr("colSpan")){bD+=bF[0].colSpan;
}else{bD+=1;
}if(bB>=bA&&bB<bD){bI=aW(bF).add(bI);
break;
}}}return bI;
}function l(bx){var bC=bx.closest("thead");
var bI=b().add(bx);
var bJ=bx.closest("tr");
var bD=bC.find("tr:not(.k-filter-row)");
var bF=bD.index(bJ)+bx[0].rowSpan;
var bB=aB.attr("colspan");
if(bF<=bD.length-1){var bz=bJ.next();
var bH=bx.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");
var bE;
bH=bH.filter(function(){return !this.rowSpan||this.rowSpan===1;
});
var bG=0;
for(bE=0;
bE<bH.length;
bE++){bG+=parseInt(bH.eq(bE).attr(bB),10)||1;
}var by=bz.find("th:not(.k-group-cell,.k-hierarchy-cell)");
var bA=parseInt(bx.attr(bB),10)||1;
bE=0;
while(bE<bA){bz=by.eq(bE+bG);
bI=bI.add(l(bz));
var bK=parseInt(bz.attr(bB),10);
if(bK>1){bA-=bK-1;
}bE++;
}}return bI;
}function g(bB,bA,by,bx){var bz,bC=bB;
if(bx){bB.empty();
}if(bi){bB[0].innerHTML=by;
}else{bz=document.createElement("div");
bz.innerHTML="<table><tbody>"+by+"</tbody></table>";
bB=bz.firstChild.firstChild;
bA[0].replaceChild(bB,bC[0]);
bB=b(bB);
}return bB;
}function d(bx){bx=bx||{};
var by=bx.style;
if(!by){by="display:none";
}else{by=by.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none");
if(by===bx.style){by=by.replace(/(.*)?/i,"display:none;$1");
}}return P({},bx,{style:by});
}function a2(bx){bx=bx||{};
var by=bx.style;
if(by){bx.style=by.replace(/(display\s*:\s*none\s*;?)*/gi,"");
}return bx;
}function aS(bB,bC,bA,bz){var bx=bB.find(">colgroup"),bD,by=aG(bC,function(bE){bD=bE.width;
if(bD&&parseInt(bD,10)!==0){return aB.format('<col style="width:{0}"/>',typeof bD===bc?bD:bD+"px");
}return"<col />";
});
if(bA||bx.find(".k-hierarchy-col").length){by.splice(0,0,'<col class="k-hierarchy-col" />');
}if(bx.length){bx.remove();
}bx=b(new Array(bz+1).join('<col class="k-group-col">')+by.join(""));
if(!bx.is("colgroup")){bx=b("<colgroup/>").append(bx);
}bB.prepend(bx);
if(i.msie&&i.version==8){bB.css("display","inline-table");
window.setTimeout(function(){bB.css("display","");
},1);
}}function aU(by,bx){var bA=0;
var bz,bB;
var bC=by.find("th:not(.k-group-cell)");
for(bz=0,bB=bx.length;
bz<bB;
bz++){if(bx[bz].locked){bC.eq(bz).insertBefore(bC.eq(bA));
bC=by.find("th:not(.k-group-cell)");
bA++;
}}}function B(bx){var bB={},bz,by,bA;
for(by=0,bA=bx.length;
by<bA;
by++){bz=bx[by];
bB[bz.value]=bz.text;
}return bB;
}function Z(bC,bz,bx,by){var bB=bx&&bx.length&&ay(bx[0])&&"value" in bx[0],bA=bB?B(bx)[bC]:bC;
bA=bA!=null?bA:"";
return bz?aB.format(bz,bA):by===false?bA:aB.htmlEncode(bA);
}function a9(by,bz,bC){var bA=0,bB,bx=by[bA];
while(bx){bB=bC?true:bx.style.display!=="none";
if(bB&&!aO.test(bx.className)&&--bz<0){bx.style.display=bC?"":"none";
break;
}bx=by[++bA];
}}function an(bC,by){var bz=0,bA=bC.length,bx,bB;
for(;
bz<bA;
bz+=1){bB=bC.eq(bz);
if(bB.is(".k-grouping-row,.k-detail-row")){bx=bB.children(":not(.k-group-cell):first,.k-detail-cell").last();
bx.attr("colspan",parseInt(bx.attr("colspan"),10)-1);
}else{if(bB.hasClass("k-grid-edit-row")&&(bx=bB.children(".k-edit-container")[0])){bx=b(bx);
bx.attr("colspan",parseInt(bx.attr("colspan"),10)-1);
bx.find("col").eq(by).remove();
bB=bx.find("tr:first");
}a9(bB[0].cells,by,false);
}}}function aj(bx){var bA=[];
var bz;
for(var by=0;
by<bx.length;
by++){bz=bx[by];
if(!("field" in bz&&"value" in bz&&"items" in bz)){break;
}bA.push(bz);
if(bz.hasSubgroups){bA=bA.concat(aj(bz.items));
}}return bA;
}function ag(bx){var bA=[];
var bz;
for(var by=0;
by<bx.length;
by++){bz=bx[by];
if(!("field" in bz&&"value" in bz&&"items" in bz)){break;
}if(bz.hasSubgroups){bA=bA.concat(ag(bz.items));
}bA.push(bz.aggregates);
}return bA;
}function bb(bD,by){var bA=0,bB=bD.length,bx,bC,bz;
for(;
bA<bB;
bA+=1){bC=bD.eq(bA);
if(bC.is(".k-grouping-row,.k-detail-row")){bx=bC.children(":not(.k-group-cell):first,.k-detail-cell").last();
bx.attr("colspan",parseInt(bx.attr("colspan"),10)+1);
}else{if(bC.hasClass("k-grid-edit-row")&&(bx=bC.children(".k-edit-container")[0])){bx=b(bx);
bx.attr("colspan",parseInt(bx.attr("colspan"),10)+1);
aS(bx.find(">form>table"),br(bz),false,0);
bC=bx.find("tr:first");
}a9(bC[0].cells,by,true);
}}}function bp(bB,bC,bA){bA=bA||1;
var by,bx,bz;
for(bx=0,bz=bB.length;
bx<bz;
bx++){by=bB.eq(bx).children().last();
by.attr("colspan",parseInt(by.attr("colspan"),10)+bA);
by=bC.eq(bx).children().last();
by.attr("colspan",parseInt(by.attr("colspan"),10)-bA);
}}function bh(bA){var by,bz,bB=0;
var bx=bA.find(">colgroup>col");
for(by=0,bz=bx.length;
by<bz;
by+=1){bB+=parseInt(bx[by].style.width,10);
}return bB;
}var ae=aB.ui.DataBoundWidget.extend({init:function(bx,bz,by){var bA=this;
bz=ap(bz)?{dataSource:bz}:bz;
bw.fn.init.call(bA,bx,bz);
if(by){bA._events=by;
}az=aB.support.isRtl(bx);
bA._element();
bA._aria();
bA._columns(bA.options.columns);
bA._dataSource();
bA._tbody();
bA._pageable();
bA._thead();
bA._groupable();
bA._toolbar();
bA._setContentHeight();
bA._templates();
bA._navigatable();
bA._selectable();
bA._clipboard();
bA._details();
bA._editable();
bA._attachCustomCommandsEvent();
bA._minScreenSupport();
if(bA.options.autoBind){bA.dataSource.fetch();
}else{bA._group=bA._groups()>0;
bA._footer();
}if(bA.lockedContent){bA.wrapper.addClass("k-grid-lockedcolumns");
bA._resizeHandler=function(){bA.resize();
};
b(window).on("resize"+aV,bA._resizeHandler);
}aB.notify(bA);
},events:[k,"dataBinding","cancel",E,K,J,L,Q,p,M,a5,a0,a6,u,t,v,n,o,x,aM,"page","sort","filter","group"],setDataSource:function(bx){var bz=this;
var by=bz.options.scrollable;
bz.options.dataSource=bx;
bz._dataSource();
bz._pageable();
bz._thead();
if(by){if(by.virtual){bz.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0);
}else{bz.content.scrollLeft(0);
}}if(bz.options.groupable){bz._groupable();
}if(bz.virtualScrollable){bz.virtualScrollable.setDataSource(bz.options.dataSource);
}if(bz.options.navigatable){bz._navigatable();
}if(bz.options.selectable){bz._selectable();
}if(bz.options.autoBind){bx.fetch();
}},options:{name:"Grid",columns:[],toolbar:null,autoBind:true,filterable:false,scrollable:true,sortable:false,selectable:false,allowCopy:false,navigatable:false,pageable:false,editable:false,groupable:false,rowTemplate:"",altRowTemplate:"",noRecords:false,dataSource:{},height:null,resizable:false,reorderable:false,columnMenu:false,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:j,confirmation:H,confirmDelete:A},commands:{create:G.create.text,cancel:G.cancel.text,save:G.save.text,destroy:G.destroy.text,edit:G.edit.text,update:G.update.text,canceledit:G.canceledit.text,excel:G.excel.text,pdf:G.pdf.text},noRecords:aQ}},destroy:function(){var by=this,bx;
by._angularItems("cleanup");
by._destroyColumnAttachments();
bw.fn.destroy.call(by);
this._navigatableTables=null;
if(by._resizeHandler){b(window).off("resize"+aV,by._resizeHandler);
}if(by.pager&&by.pager.element){by.pager.destroy();
}by.pager=null;
if(by.groupable&&by.groupable.element){by.groupable.element.kendoGroupable("destroy");
}by.groupable=null;
if(by.options.reorderable){by.wrapper.data("kendoReorderable").destroy();
}if(by.selectable&&by.selectable.element){by.selectable.destroy();
by.clearArea();
if(by.copyHandler){by.wrapper.off("keydown",by.copyHandler);
by.unbind(by.copyHandler);
}if(by.updateClipBoardState){by.unbind(by.updateClipBoardState);
by.updateClipBoardState=null;
}if(by.clearAreaHandler){by.wrapper.off("keyup",by.clearAreaHandler);
}}by.selectable=null;
if(by.resizable){by.resizable.destroy();
if(by._resizeUserEvents){if(by._resizeHandleDocumentClickHandler){b(document).off("click",by._resizeHandleDocumentClickHandler);
}by._resizeUserEvents.destroy();
by._resizeUserEvents=null;
}by.resizable=null;
}if(by.virtualScrollable&&by.virtualScrollable.element){by.virtualScrollable.destroy();
}by.virtualScrollable=null;
by._destroyEditable();
if(by.dataSource){by.dataSource.unbind(k,by._refreshHandler).unbind(aX,by._progressHandler).unbind(O,by._errorHandler);
by._refreshHandler=by._progressHandler=by._errorHandler=null;
}bx=by.element.add(by.wrapper).add(by.table).add(by.thead).add(by.wrapper.find(">.k-grid-toolbar"));
if(by.content){bx=bx.add(by.content).add(by.content.find(">.k-virtual-scrollable-wrap"));
}if(by.lockedHeader){by._removeLockedContainers();
}if(by.pane){by.pane.destroy();
}if(by.minScreenResizeHandler){b(window).off("resize",by.minScreenResizeHandler);
}if(by._draggableInstance&&by._draggableInstance.element){by._draggableInstance.destroy();
}by._draggableInstance=null;
bx.off(aV);
aB.destroy(by.wrapper);
by.rowTemplate=by.altRowTemplate=by.lockedRowTemplate=by.lockedAltRowTemplate=by.detailTemplate=by.footerTemplate=by.groupFooterTemplate=by.lockedGroupFooterTemplate=by.noRecordsTemplate=null;
by.scrollables=by.thead=by.tbody=by.element=by.table=by.content=by.footer=by.wrapper=by.lockedTable=by.lockedContent=by.lockedHeader=by.lockedFooter=by._groupableClickHandler=by._setContentWidthHandler=null;
},getOptions:function(){var bz=this.options;
bz.dataSource=null;
var bA=P(true,{},this.options);
bA.columns=aB.deepExtend([],this.columns);
var bx=this.dataSource;
var by=bx.options.data&&bx._data;
bx.options.data=null;
bA.dataSource=b.extend(true,{},bx.options);
bx.options.data=by;
bA.dataSource.data=by;
bA.dataSource.page=bx.page();
bA.dataSource.filter=bx.filter();
bA.dataSource.pageSize=bx.pageSize();
bA.dataSource.sort=bx.sort();
bA.dataSource.group=bx.group();
bA.dataSource.aggregate=bx.aggregate();
if(bA.dataSource.transport){bA.dataSource.transport.dataSource=null;
}if(bA.pageable&&bA.pageable.pageSize){bA.pageable.pageSize=bx.pageSize();
}bA.$angular=bm;
return bA;
},setOptions:function(bB){var bx=this.getOptions();
aB.deepExtend(bx,bB);
if(!bB.dataSource){bx.dataSource=this.dataSource;
}var bC=this.wrapper;
var bz=this._events;
var by=this.element;
this.destroy();
this.options=null;
if(this._isMobile){var bA=bC.closest(aB.roleSelector("pane")).parent();
bA.after(bC);
bA.remove();
bC.removeClass("k-grid-mobile");
}if(bC[0]!==by[0]){bC.before(by);
bC.remove();
}by.empty();
this.init(by,bx,bz);
this._setEvents(bx);
},items:function(){if(this.lockedContent){return this._items(this.tbody).add(this._items(this.lockedTable.children("tbody")));
}else{return this._items(this.tbody);
}},_items:function(bx){return bx.children().filter(function(){var by=b(this);
return !by.hasClass("k-grouping-row")&&!by.hasClass("k-detail-row")&&!by.hasClass("k-group-footer");
});
},dataItems:function(){var bx=aB.ui.DataBoundWidget.fn.dataItems.call(this);
if(this.lockedContent){var bz=bx.length,bA=new Array(2*bz);
for(var by=bz;
--by>=0;
){bA[by]=bA[by+bz]=bx[by];
}bx=bA;
}return bx;
},_destroyColumnAttachments:function(){var bx=this;
bx.resizeHandle=null;
if(!bx.thead){return;
}this.angular("cleanup",function(){return{elements:bx.thead.get()};
});
bx.thead.add(bx.lockedHeader).find("th").each(function(){var bB=b(this),bz=bB.data("kendoFilterMenu"),bA=bB.data("kendoColumnSorter"),by=bB.data("kendoColumnMenu");
if(bz){bz.destroy();
}if(bA){bA.destroy();
}if(by){by.destroy();
}});
},_attachCustomCommandsEvent:function(){var bB=this,bx=aD(bB.columns||[]),by,bz,bA;
for(bz=0,bA=bx.length;
bz<bA;
bz++){by=bx[bz].command;
if(by){h(bB,bB.wrapper,by);
}}},_aria:function(){var bx=this.element.attr("id")||"aria";
if(bx){this._cellId=bx+"_active_cell";
}},_element:function(){var by=this,bx=by.element;
if(!bx.is("table")){if(by.options.scrollable){bx=by.element.find("> .k-grid-content > table");
}else{bx=by.element.children("table");
}if(!bx.length){bx=b("<table />").appendTo(by.element);
}}if(au){bx.attr("cellspacing",0);
}by.table=bx.attr("role",by._hasDetails()?"treegrid":"grid");
by._wrapper();
},_createResizeHandle:function(by,bI){var bJ=this;
var bE=bJ.options.columnResizeHandleWidth;
var bH=bJ.options.scrollable;
var bG=bJ.resizeHandle;
var bA=this._groups();
var bF;
if(bG&&bJ.lockedContent&&bG.data("th")[0]!==bI[0]){bG.off(aV).remove();
bG=null;
}if(!bG){bG=bJ.resizeHandle=b('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>');
by.append(bG);
}if(!az){bF=bI[0].offsetWidth;
var bx=aE(bI.closest("thead")).filter(":visible");
for(var bC=0;
bC<bx.length;
bC++){if(bx[bC]==bI[0]){break;
}bF+=bx[bC].offsetWidth;
}if(bA>0){bF+=by.find(".k-group-cell:first").outerWidth()*bA;
}if(bJ._hasDetails()){bF+=by.find(".k-hierarchy-cell:first").outerWidth();
}}else{bF=bI.position().left;
if(bH){var bB=bI.closest(".k-grid-header-wrap, .k-grid-header-locked"),bD=i.msie?bB.scrollLeft():0,bK=i.webkit?bB[0].scrollWidth-bB[0].offsetWidth-bB.scrollLeft():0,bz=i.mozilla?bB[0].scrollWidth-bB[0].offsetWidth-(bB[0].scrollWidth-bB[0].offsetWidth-bB.scrollLeft()):0;
bF-=bK-bz+bD;
}}bG.css({top:bI.position().top,left:bF-bE,height:bI.outerHeight(),width:bE*3}).data("th",bI).show();
bG.off("dblclick"+aV).on("dblclick"+aV,function(){bJ._autoFitLeafColumn(bI.data("index"));
});
},_positionColumnResizeHandle:function(){var bz=this,bx=bz.options.columnResizeHandleWidth,by=bz.lockedHeader?bz.lockedHeader.find("thead:first"):b();
bz.thead.add(by).on("mousemove"+aV,"th",function(bB){var bE=b(this);
if(bE.hasClass("k-group-cell")||bE.hasClass("k-hierarchy-cell")){return;
}function bC(){var bH=parseFloat(b(document.documentElement).css("zoom"));
if(isNaN(bH)){bH=1;
}var bG=parseFloat(b(document.body).css("zoom"));
if(isNaN(bG)){bG=1;
}return bH*bG;
}var bA=bB.clientX/bC(),bF=b(window).scrollLeft(),bD=bE.offset().left+(!az?this.offsetWidth:0);
if(bA+bF>bD-bx&&bA+bF<bD+bx){bz._createResizeHandle(bE.closest("div"),bE);
}else{if(bz.resizeHandle){bz.resizeHandle.hide();
}else{C(bz.wrapper,"");
}}});
},_resizeHandleDocumentClick:function(bx){if(b(bx.target).closest(".k-column-active").length){return;
}b(document).off(bx);
this._hideResizeHandle();
},_hideResizeHandle:function(){if(this.resizeHandle){this.resizeHandle.data("th").removeClass("k-column-active");
if(this.lockedContent&&!this._isMobile){this.resizeHandle.off(aV).remove();
this.resizeHandle=null;
}else{this.resizeHandle.hide();
}}},_positionColumnResizeHandleTouch:function(){var by=this,bx=by.lockedHeader?by.lockedHeader.find("thead:first"):b();
by._resizeUserEvents=new aB.UserEvents(bx.add(by.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(bz){var bA=b(bz.target);
bz.preventDefault();
bA.addClass("k-column-active");
by._createResizeHandle(bA.closest("div"),bA);
if(!by._resizeHandleDocumentClickHandler){by._resizeHandleDocumentClickHandler=aY(by._resizeHandleDocumentClick,by);
}b(document).on("click",by._resizeHandleDocumentClickHandler);
}});
},_resizable:function(){var bH=this,bE=bH.options,bA,by,bz,bB,bD=this._isMobile,bF=!aB.support.mobileOS?aB.support.scrollbar():0,bC,bx,bG;
if(bE.resizable){bA=bE.scrollable?bH.wrapper.find(".k-grid-header-wrap:first"):bH.wrapper;
if(bD){bH._positionColumnResizeHandleTouch(bA);
}else{bH._positionColumnResizeHandle(bA);
}if(bH.resizable){bH.resizable.destroy();
}bH.resizable=new bl.Resizable(bA.add(bH.lockedHeader),{handle:(!!bE.scrollable?"":">")+".k-resize-handle",hint:function(bI){return b('<div class="k-grid-resize-indicator" />').css({height:bI.data("th").outerHeight()+bH.tbody.attr("clientHeight")});
},start:function(bJ){bG=b(bJ.currentTarget).data("th");
if(bD){bH._hideResizeHandle();
}var bL=bG.closest("table"),bM=b.inArray(bG[0],aE(bG.closest("thead")).filter(":visible"));
bC=bL.parent().hasClass("k-grid-header-locked");
var bI=bC?bH.lockedTable:bH.table,bK=bH.footer||b();
if(bH.footer&&bH.lockedContent){bK=bC?bH.footer.children(".k-grid-footer-locked"):bH.footer.children(".k-grid-footer-wrap");
}C(bH.wrapper,"col-resize");
if(bE.scrollable){bx=bL.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bM+")").add(bI.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bM+")")).add(bK.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bM+")"));
}else{bx=bI.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+bM+")");
}by=bJ.x.location;
bz=bG.outerWidth();
bB=bC?bI.children("tbody").outerWidth():bH.tbody.outerWidth();
if(i.webkit){bH.wrapper.addClass("k-grid-column-resizing");
}},resize:function(bL){var bO=az?-1:1,bK=bz+bL.x.location*bO-by*bO;
if(bE.scrollable){var bM;
if(bC&&bH.lockedFooter){bM=bH.lockedFooter.children("table");
}else{if(bH.footer){bM=bH.footer.find(">.k-grid-footer-wrap>table");
}}if(!bM||!bM[0]){bM=b();
}var bN=bG.closest("table");
var bJ=bC?bH.lockedTable:bH.table;
var bI=false;
var bP=bH.wrapper.width()-bF;
var bQ=bK;
if(bC&&bB-bz+bQ>bP){bQ=bz+(bP-bB-bF*2);
if(bQ<0){bQ=bK;
}bI=true;
}if(bQ>10){bx.css("width",bQ);
if(bB){if(bI){bQ=bP-bF*2;
}else{bQ=bB+bL.x.location*bO-by*bO;
}bJ.add(bN).add(bM).css("width",bQ);
if(!bC){bH._footerWidth=bQ;
}}}}else{if(bK>10){bx.css("width",bK);
}}},resizeend:function(){var bL=bG.outerWidth(),bI,bJ;
C(bH.wrapper,"");
if(i.webkit){bH.wrapper.removeClass("k-grid-column-resizing");
}if(bz!=bL){bJ=bH.lockedHeader?bH.lockedHeader.find("thead:first tr:first").add(bH.thead.find("tr:first")):bG.parent();
var bK=bG.attr(aB.attr("index"));
if(!bK){bK=bJ.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(bG);
}bI=aD(bH.columns)[bK];
bI.width=bL;
bH.trigger(u,{column:bI,oldWidth:bz,newWidth:bL});
bH._applyLockedContainersWidth();
bH._syncLockedContentHeight();
bH._syncLockedHeaderHeight();
}bH._hideResizeHandle();
bG=null;
}});
}},_draggable:function(){var by=this;
if(by.options.reorderable){if(by._draggableInstance){by._draggableInstance.destroy();
}var bx=by.wrapper.children(".k-grid-header");
by._draggableInstance=by.wrapper.kendoDraggable({group:aB.guid(),autoScroll:true,filter:by.content?".k-grid-header:first "+ak:"table:first>.k-grid-header "+ak,dragstart:function(){bx.children(".k-grid-header-wrap").unbind("scroll"+aV+"scrolling").bind("scroll"+aV+"scrolling",function(bz){if(by.virtualScrollable){by.content.find(">.k-virtual-scrollable-wrap").scrollLeft(this.scrollLeft);
}else{by.scrollables.not(bz.currentTarget).scrollLeft(this.scrollLeft);
}});
},dragend:function(){bx.children(".k-grid-header-wrap").unbind("scroll"+aV+"scrolling");
},drag:function(){by._hideResizeHandle();
},hint:function(bz){var bA=bz.attr(aB.attr("title"));
if(bA){bA=aB.htmlEncode(bA);
}return b('<div class="k-header k-drag-clue" />').css({width:bz.width(),paddingLeft:bz.css("paddingLeft"),paddingRight:bz.css("paddingRight"),lineHeight:bz.height()+"px",paddingTop:bz.css("paddingTop"),paddingBottom:bz.css("paddingBottom")}).html(bA||bz.attr(aB.attr("field"))||bz.text()).prepend('<span class="k-icon k-drag-status k-i-denied" />');
}}).data("kendoDraggable");
}},_reorderable:function(){var by=this;
if(by.options.reorderable){if(by.wrapper.data("kendoReorderable")){by.wrapper.data("kendoReorderable").destroy();
}var bx=function(bA,bC,bE){var bz=bA[bC];
var bD=bA[bE];
var bB=q(bz,by.columns);
bA=bB?bB.columns:by.columns;
return ao(bD,bA);
};
by.wrapper.kendoReorderable({draggable:by._draggableInstance,dragOverContainers:function(bA,bB){var bz=W(by.columns);
return bz[bA].lockable!==false&&bx(bz,bA,bB)>-1;
},inSameContainer:function(bz){return b(bz.source).parent()[0]===b(bz.target).parent()[0]&&bx(W(by.columns),bz.sourceIndex,bz.targetIndex)>-1;
},change:function(bB){var bA=W(by.columns);
var bz=bA[bB.oldIndex];
var bC=bx(bA,bB.oldIndex,bB.newIndex);
by.trigger(t,{newIndex:bC,oldIndex:ao(bz,bA),column:bz});
by.reorderColumn(bC,bz,bB.position==="before");
}});
}},_reorderHeader:function(bD,bE,bx){var bG=this;
var bC=s(bD[0],bG.columns);
var by=s(bE,bG.columns);
var bA=[];
for(var bz=0;
bz<bD.length;
bz++){if(bD[bz].columns){bA=bA.concat(bD[bz].columns);
}}var bH=N(bG.lockedHeader,bG.thead,"tr:eq("+bC.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");
var bB=aF(bD).length;
var bF=aF([bE]).length;
if(bA.length){if(bB>0&&bF===0){aK(bD,bE,bA,bG.columns,bG.lockedHeader.find("thead"),bG.thead,this._groups());
}else{if(bB===0&&bF>0){aK(bD,bE,bA,bG.columns,bG.thead,bG.lockedHeader.find("thead"),this._groups());
}}if(bE.columns||bC.cell-by.cell>1||by.cell-bC.cell>1){bE=T(bG.columns,bE,bD[0],bx);
if(bE){bG._reorderHeader(bA,bE,bx);
}}}else{if(bB!==bF){bo(bH[bC.cell],bG.columns,bB);
}}a4(bH,bC.cell,by.cell,bx,bD.length);
},_reorderContent:function(bN,bA,bx){var bO=this;
var bJ=b();
var bL=bN[0];
var bP=br(bN);
var bM=ao(bL,aD(bO.columns));
var bB=ao(bA,aD(bO.columns));
var bz=ao(bL,bs(bO.columns));
var by=ao(bA,bs(bO.columns));
var bI=aF(bO.columns).length;
var bG=!!bA.locked;
var bC=bO.footer||bO.wrapper.find(".k-grid-footer");
var bE,bD;
bE=bD=by;
if(bA.hidden){if(bG){by=bO.lockedTable.find("colgroup");
bE=bO.lockedHeader.find("colgroup");
bD=b(bO.lockedFooter).find(">table>colgroup");
}else{by=bO.tbody.prev();
bE=bO.thead.prev();
bD=bC.find(".k-grid-footer-wrap").find(">table>colgroup");
}}if(bO._hasFilterRow()){a4(bO.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),bM,bB,bx,bN.length);
}a4(N(bO.lockedHeader,bO.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),bz,bE,bx,bP.length);
if(bO.options.scrollable){a4(N(bO.lockedTable,bO.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),bz,by,bx,bP.length);
}if(bC&&bC.length){a4(N(bO.lockedFooter,bC.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),bz,bD,bx,bP.length);
a4(bC.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),bM,bB,bx,bN.length);
}var bK=bO.tbody.children(":not(.k-grouping-row,.k-detail-row)");
if(bO.lockedTable){if(bI>bB){if(bI<=bM){bp(bO.lockedTable.find(">tbody>tr.k-grouping-row"),bO.table.find(">tbody>tr.k-grouping-row"),bN.length);
}}else{if(bI>bM){bp(bO.table.find(">tbody>tr.k-grouping-row"),bO.lockedTable.find(">tbody>tr.k-grouping-row"),bN.length);
}}bJ=bO.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)");
}for(var bF=0,bH=bK.length;
bF<bH;
bF+=1){a4(N(bJ[bF],bK[bF],">td:not(.k-group-cell,.k-hierarchy-cell)"),bM,bB,bx,bN.length);
}},_autoFitLeafColumn:function(bx){this.autoFitColumn(aD(this.columns)[bx]);
},autoFitColumn:function(bz){var bU=this,bQ=bU.options,bA=bU.columns,bI,bT,bG,bJ,bW=bU.lockedHeader?aE(bU.lockedHeader.find(">table>thead")).filter(aq).length:0,bx,bC,bR,bN="col:not(.k-group-col):not(.k-hierarchy-col)",bO="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";
if(typeof bz=="number"){bz=bA[bz];
}else{if(ay(bz)){bz=ad(V(bA),function(bX){return bX===bz;
})[0];
}else{bz=ad(V(bA),function(bX){return bX.field===bz;
})[0];
}}if(!bz||!aA(bz)){return;
}bI=ao(bz,aD(bA));
bJ=bz.locked;
if(bJ){bG=bU.lockedHeader.children("table");
}else{bG=bU.thead.parent();
}bT=bG.find("[data-index='"+bI+"']");
var bD=bJ?bU.lockedTable:bU.table,bE=bU.footer||b();
if(bU.footer&&bU.lockedContent){bE=bJ?bU.footer.children(".k-grid-footer-locked"):bU.footer.children(".k-grid-footer-wrap");
}var bF=bE.find("table").first();
if(bU.lockedHeader&&!bJ){bI-=bW;
}for(var bK=0;
bK<bA.length;
bK++){if(bA[bK]===bz){break;
}else{if(bA[bK].hidden){bI--;
}}}if(bQ.scrollable){bx=bG.find(bN).eq(bI).add(bD.children("colgroup").find(bN).eq(bI)).add(bF.find("colgroup").find(bN).eq(bI));
if(!bJ){bC=bD.parent();
bR=bC.scrollLeft();
}}else{bx=bD.children("colgroup").find(bN).eq(bI);
}var bS=bG.add(bD).add(bF);
var bP=bT.outerWidth();
bx.width("");
bS.css("table-layout","fixed");
bx.width("auto");
bS.addClass("k-autofitting");
bS.css("table-layout","");
var bM=Math.ceil(Math.max(bT.outerWidth(),bD.find("tr:not(.k-grouping-row)").eq(0).children(bO).eq(bI).outerWidth(),bF.find("tr").eq(0).children(bO).eq(bI).outerWidth()))+1;
bx.width(bM);
bz.width=bM;
if(bQ.scrollable){var by=bG.find("col"),bB,bV=0;
for(var bH=0,bL=by.length;
bH<bL;
bH+=1){bB=by[bH].style.width;
if(bB&&bB.indexOf("%")==-1){bV+=parseInt(bB,10);
}else{bV=0;
break;
}}if(bV){bS.each(function(){this.style.width=bV+"px";
});
}}if(i.msie&&i.version==8){bS.css("display","inline-table");
setTimeout(function(){bS.css("display","table");
},1);
}bS.removeClass("k-autofitting");
if(bR){bC.scrollLeft(bR);
}bU.trigger(u,{column:bz,oldWidth:bP,newWidth:bM});
bU._applyLockedContainersWidth();
bU._syncLockedContentHeight();
bU._syncLockedHeaderHeight();
},reorderColumn:function(bB,by,bx){var bI=this,bF=q(by,bI.columns),bz=bF?bF.columns:bI.columns,bH=ao(by,bz),bA=bz[bB],bD,bC=!!bA.locked,bE=aF(bI.columns).length;
if(bH===bB){return;
}if(!by.locked&&bC&&aP(bI.columns).length==1){return;
}if(by.locked&&!bC&&bE==1){return;
}bI._hideResizeHandle();
if(bx===bm){bx=bB<bH;
}var bG=[by];
bI._reorderHeader(bG,bA,bx);
if(bI.lockedHeader){a1(bI.thead);
a1(bI.lockedHeader);
}if(bA.columns){bA=aD(bA.columns);
bA=bA[bx?0:bA.length-1];
}if(by.columns){bG=aD(by.columns);
}bI._reorderContent(bG,bA,bx);
bD=!!by.locked;
bD=bD!=bC;
by.locked=bC;
bz.splice(bx?bB:bB+1,0,by);
bz.splice(bH<bB?bH:bH+1,1);
bI._templates();
bI._updateColumnCellIndex();
bI._updateTablesWidth();
bI._applyLockedContainersWidth();
bI._syncLockedHeaderHeight();
bI._syncLockedContentHeight();
bI._updateFirstColumnClass();
if(!bD){return;
}if(bC){bI.trigger(o,{column:by});
}else{bI.trigger(x,{column:by});
}},_updateColumnCellIndex:function(){var bx;
var by=0;
if(this.lockedHeader){bx=this.lockedHeader.find("thead");
by=bn(bx,aF(this.columns));
}bn(this.thead,aP(this.columns),by);
},lockColumn:function(bx){var by=this.columns;
if(typeof bx=="number"){bx=by[bx];
}else{bx=ad(by,function(bA){return bA.field===bx;
})[0];
}if(!bx||bx.locked||bx.hidden){return;
}var bz=aF(by).length-1;
this.reorderColumn(bz,bx,false);
},unlockColumn:function(bx){var by=this.columns;
if(typeof bx=="number"){bx=by[bx];
}else{bx=ad(by,function(bA){return bA.field===bx;
})[0];
}if(!bx||!bx.locked||bx.hidden){return;
}var bz=aF(by).length;
this.reorderColumn(bz,bx,true);
},cellIndex:function(by){var bx=0;
if(this.lockedTable&&!b.contains(this.lockedTable[0],by[0])){bx=aD(aF(this.columns)).length;
}return b(by).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(by)+bx;
},_modelForContainer:function(bx){bx=b(bx);
if(!bx.is("tr")&&this._editMode()!=="popup"){bx=bx.closest("tr");
}var by=bx.attr(aB.attr("uid"));
return this.dataSource.getByUid(by);
},_editable:function(){var bB=this,bA=bB.selectable&&bB.selectable.options.multiple,bx=bB.options.editable,by=function(){var bD=c(),bC=bB._editContainer;
if(bC&&!b.contains(bC[0],bD)&&bC[0]!==bD&&!b(bD).closest(".k-animation-container").length){if(bB.editable.end()){bB.closeCell();
}}};
if(bx){this.wrapper.addClass("k-editable");
var bz=bB._editMode();
if(bz==="incell"){if(bx.update!==false){bB.wrapper.on(m+aV,"tr:not(.k-grouping-row) > td",function(bC){var bE=b(this),bD=bB.lockedTable&&bE.closest("table")[0]===bB.lockedTable[0];
if(bE.hasClass("k-hierarchy-cell")||bE.hasClass("k-detail-cell")||bE.hasClass("k-group-cell")||bE.hasClass("k-edit-cell")||bE.has("a.k-grid-delete").length||bE.has("button.k-grid-delete").length||bE.closest("tbody")[0]!==bB.tbody[0]&&!bD||b(bC.target).is(":input")){return;
}if(bB.editable){if(bB.editable.end()){if(bA){b(c()).blur();
}bB.closeCell();
bB.editCell(bE);
}}else{bB.editCell(bE);
}}).on("focusin"+aV,function(){if(!b.contains(this,c())){clearTimeout(bB.timer);
bB.timer=null;
}}).on("focusout"+aV,function(){bB.timer=setTimeout(by,1);
});
}}else{if(bx.update!==false){bB.wrapper.on(m+aV,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(bC){bC.preventDefault();
bB.editRow(b(this).closest("tr"));
});
}}if(bx.destroy!==false){bB.wrapper.on(m+aV,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(bC){bC.preventDefault();
bC.stopPropagation();
bB.removeRow(b(this).closest("tr"));
});
}else{bB.wrapper.on(m+aV,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(bC){bC.stopPropagation();
if(!bB._confirmation()){bC.preventDefault();
}});
}}},editCell:function(bx){bx=b(bx);
var bA=this,by=aD(bA.columns)[bA.cellIndex(bx)],bz=bA._modelForContainer(bx);
bA.closeCell();
if(bz&&(!bz.editable||bz.editable(by.field))&&!by.command&&by.field){bA._attachModelChange(bz);
bA._editContainer=bx;
bA.editable=bx.addClass("k-edit-cell").kendoEditable({fields:{field:by.field,format:by.format,editor:by.editor,values:by.values},model:bz,target:bA,change:function(bC){if(bA.trigger(a5,{values:bC.values,container:bx,model:bz})){bC.preventDefault();
}}}).data("kendoEditable");
var bB=bx.parent().addClass("k-grid-edit-row");
if(bA.lockedContent){f(bB[0],bA._relatedRow(bB).addClass("k-grid-edit-row")[0]);
}bA.trigger(M,{container:bx,model:bz});
}},_adjustLockedHorizontalScrollBar:function(){var bz=this.table,bx=bz.parent();
var by=bz[0].offsetWidth>bx[0].clientWidth?aB.support.scrollbar():0;
this.lockedContent.height(bx.height()-by);
},_syncLockedContentHeight:function(){if(this.lockedTable){if(!this.touchScroller){this._adjustLockedHorizontalScrollBar();
}this._adjustRowsHeight(this.table,this.lockedTable);
}},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var bx=this.lockedHeader.children("table");
var by=this.thead.parent();
this._adjustRowsHeight(bx,by);
be(bx,by);
}},_syncLockedFooterHeight:function(){if(this.lockedFooter&&this.footer&&this.footer.length){this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"));
}},_destroyEditable:function(){var by=this;
var bx=function(){if(by.editable){var bz=by.editView?by.editView.element:by._editContainer;
if(bz){bz.off(m+aV,"a.k-grid-cancel",by._editCancelClickHandler);
bz.off(m+aV,"a.k-grid-update",by._editUpdateClickHandler);
}by._detachModelChange();
by.editable.destroy();
by.editable=null;
by._editContainer=null;
by._destroyEditView();
}};
if(by.editable){if(by._editMode()==="popup"&&!by._isMobile){by._editContainer.data("kendoWindow").bind("deactivate",bx).close();
}else{bx();
}}if(by._actionSheet){by._actionSheet.destroy();
by._actionSheet=null;
}},_destroyEditView:function(){if(this.editView){this.editView.purge();
this.editView=null;
this.pane.navigate("");
}},_attachModelChange:function(bx){var by=this;
by._modelChangeHandler=function(bz){by._modelChange({field:bz.field,model:this});
};
bx.bind("change",by._modelChangeHandler);
},_detachModelChange:function(){var bz=this,bx=bz._editContainer,by=bz._modelForContainer(bx);
if(by){by.unbind(k,bz._modelChangeHandler);
}},closeCell:function(bA){var bC=this,bx=bC._editContainer,bz,by,bD,bB;
if(!bx){return;
}bz=bx.closest("tr").attr(aB.attr("uid"));
bB=bC.dataSource.getByUid(bz);
if(bA&&bC.trigger("cancel",{container:bx,model:bB})){return;
}bx.removeClass("k-edit-cell");
by=aD(bC.columns)[bC.cellIndex(bx)];
bD=bx.parent().removeClass("k-grid-edit-row");
bC._destroyEditable();
bC._displayCell(bx,by,bB);
if(bx.hasClass("k-dirty-cell")){b('<span class="k-dirty"/>').prependTo(bx);
}bC.trigger("itemChange",{item:bD,data:bB,ns:bl});
if(bC.lockedContent){f(bD.css("height","")[0],bC._relatedRow(bD).css("height","")[0]);
}},_displayCell:function(bx,by,bz){var bC=this,bB={storage:{},count:0},bA=P({},aB.Template,bC.options.templateSettings),bD=aB.template(bC._cellTmpl(by,bB),bA);
if(bB.count>0){bD=aY(bD,bB.storage);
}bx.empty().html(bD(bz));
bC.angular("compile",function(){return{elements:bx,data:[{dataItem:bz}]};
});
},removeRow:function(bx){if(!this._confirmation(bx)){return;
}this._removeRow(bx);
},_removeRow:function(bz){var bA=this,by,bx=bA._editMode();
if(bx!=="incell"){bA.cancelRow();
}bz=b(bz);
if(bA.lockedContent){bz=bz.add(bA._relatedRow(bz));
}bz=bz.hide();
by=bA._modelForContainer(bz);
if(by&&!bA.trigger(a0,{row:bz,model:by})){bA.dataSource.remove(by);
if(bx==="inline"||bx==="popup"){bA.dataSource.sync();
}}else{if(bx==="incell"){bA._destroyEditable();
}}},_editMode:function(){var by="incell",bx=this.options.editable;
if(bx!==true){if(typeof bx=="string"){by=bx;
}else{by=bx.mode||by;
}}return by;
},editRow:function(bA){var bz;
var bB=this;
if(bA instanceof aB.data.ObservableObject){bz=bA;
}else{bA=b(bA);
bz=bB._modelForContainer(bA);
}var by=bB._editMode();
var bx;
bB.cancelRow();
if(bz){bA=bB.tbody.children("["+aB.attr("uid")+"="+bz.uid+"]");
bB._attachModelChange(bz);
if(by==="popup"){bB._createPopupEditor(bz);
}else{if(by==="inline"){bB._createInlineEditor(bA,bz);
}else{if(by==="incell"){b(bA).children(D).each(function(){var bC=b(this);
var bD=aD(bB.columns)[bB.cellIndex(bC)];
bz=bB._modelForContainer(bC);
if(bz&&(!bz.editable||bz.editable(bD.field))&&bD.field){bB.editCell(bC);
return false;
}});
}}}bx=bB.editView?bB.editView.element:bB._editContainer;
if(bx){if(!this._editCancelClickHandler){this._editCancelClickHandler=aY(this._editCancelClick,this);
}bx.on(m+aV,"a.k-grid-cancel",this._editCancelClickHandler);
if(!this._editUpdateClickHandler){this._editUpdateClickHandler=aY(this._editUpdateClick,this);
}bx.on(m+aV,"a.k-grid-update",this._editUpdateClickHandler);
}}},_editUpdateClick:function(bx){bx.preventDefault();
bx.stopPropagation();
this.saveRow();
},_editCancelClick:function(bz){var bC=this;
var bB=bC.options.navigatable;
var bA=bC.editable.options.model;
var bx=bC.editView?bC.editView.element:bC._editContainer;
bz.preventDefault();
bz.stopPropagation();
if(bC.trigger("cancel",{container:bx,model:bA})){return;
}var by=bC.items().index(b(bC.current()).parent());
bC.cancelRow();
if(bB){bC._setCurrent(bC.items().eq(by).children().filter(aL).first());
Y(bC.table,true);
}},_createPopupEditor:function(bI){var bO=this,bF="<div "+aB.attr("uid")+'="'+bI.uid+'" class="k-popup-edit-form'+(bO._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',bz,bB,bE=[],bG,bH,bP,bQ,by,bM,bA=aD(bO.columns),bx,bD=bO.options.editable,bN=bD.template,bJ=ay(bD)?bD.window:{},bK=P({},aB.Template,bO.options.templateSettings);
bJ=bJ||{};
if(bN){if(typeof bN===bc){bN=window.unescape(bN);
}bF+=aB.template(bN,bK)(bI);
for(bG=0,bH=bA.length;
bG<bH;
bG++){bz=bA[bG];
if(bz.command){bM=ac(bz.command,"edit");
if(bM){bB=bM;
}}}}else{for(bG=0,bH=bA.length;
bG<bH;
bG++){bz=bA[bG];
if(!bz.command){bF+='<div class="k-edit-label"><label for="'+bz.field+'">'+(bz.title||bz.field||"")+"</label></div>";
if((!bI.editable||bI.editable(bz.field))&&bz.field){bE.push({field:bz.field,format:bz.format,editor:bz.editor,values:bz.values});
bF+="<div "+aB.attr("container-for")+'="'+bz.field+'" class="k-edit-field"></div>';
}else{var bL={storage:{},count:0};
bP=aB.template(bO._cellTmpl(bz,bL),bK);
if(bL.count>0){bP=aY(bP,bL.storage);
}bF+='<div class="k-edit-field">'+bP(bI)+"</div>";
}}else{if(bz.command){bM=ac(bz.command,"edit");
if(bM){bB=bM;
}}}}}if(bB){if(ay(bB)){if(bB.text&&ay(bB.text)){bQ=bB.text.update;
by=bB.text.cancel;
}if(bB.attr){bx=bB.attr;
}}}var bC;
if(!bO._isMobile){bF+='<div class="k-edit-buttons k-state-default">';
bF+=bO._createButton({name:"update",text:bQ,attr:bx})+bO._createButton({name:"canceledit",text:by,attr:bx});
bF+="</div></div></div>";
bC=bO._editContainer=b(bF).appendTo(bO.wrapper).eq(0).kendoWindow(P({modal:true,resizable:false,draggable:true,title:"Edit",visible:false,close:function(bS){if(bS.userTriggered){bS.sender.element.focus();
if(bO.trigger("cancel",{container:bC,model:bI})){bS.preventDefault();
return;
}var bR=bO.items().index(b(bO.current()).parent());
bO.cancelRow();
if(bO.options.navigatable){bO._setCurrent(bO.items().eq(bR).children().filter(aL).first());
Y(bO.table,true);
}}}},bJ));
}else{bF+="</div></div>";
bO.editView=bO.pane.append("<div data-"+aB.ns+'role="view" data-'+aB.ns+'use-native-scrolling="true" data-'+aB.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+aB.ns+'role="header" class="k-header">'+bO._createButton({name:"update",text:bQ,attr:bx})+(bJ.title||"Edit")+bO._createButton({name:"canceledit",text:by,attr:bx})+"</div>"+bF+"</div>");
bC=bO._editContainer=bO.editView.element.find(".k-popup-edit-form");
}bO.editable=bO._editContainer.kendoEditable({fields:bE,model:bI,clearContainer:false,target:bO}).data("kendoEditable");
if(bO._isMobile){bC.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){b(this).next().children("input").click();
});
}bO._openPopUpEditor();
bO.trigger(M,{container:bC,model:bI});
},_openPopUpEditor:function(){if(!this._isMobile){this._editContainer.data("kendoWindow").center().open();
}else{this.pane.navigate(this.editView,this._editAnimation);
}},_createInlineEditor:function(bC,bB){var bD=this,by,bx,bz,bA=[];
if(bD.lockedContent){bC=bC.add(bD._relatedRow(bC));
}bC.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){bx=b(this);
by=aD(bD.columns)[bD.cellIndex(bx)];
if(!by.command&&by.field&&(!bB.editable||bB.editable(by.field))){bA.push({field:by.field,format:by.format,editor:by.editor,values:by.values});
bx.attr(aB.attr("container-for"),by.field);
bx.empty();
}else{if(by.command){bz=ac(by.command,"edit");
if(bz){bx.empty();
var bG,bF,bE;
if(ay(bz)){if(bz.text&&ay(bz.text)){bG=bz.text.update;
bF=bz.text.cancel;
}if(bz.attr){bE=bz.attr;
}}b(bD._createButton({name:"update",text:bG,attr:bE})+bD._createButton({name:"canceledit",text:bF,attr:bE})).appendTo(bx);
}}}});
bD._editContainer=bC;
bD.editable=new aB.ui.Editable(bC.addClass("k-grid-edit-row"),{target:bD,fields:bA,model:bB,clearContainer:false});
if(bC.length>1){f(bC[0],bC[1]);
bD._applyLockedContainersWidth();
}bD.trigger(M,{container:bC,model:bB});
},cancelRow:function(bz){var bA=this,bx=bA._editContainer,by;
if(bx){by=bA._modelForContainer(bx);
if(bz&&bA.trigger("cancel",{container:bx,model:by})){return;
}bA._destroyEditable();
bA.dataSource.cancelChanges(by);
if(bA._editMode()!=="popup"){bA._displayRow(bx);
}else{bA._displayRow(bA.tbody.find("["+aB.attr("uid")+"="+by.uid+"]"));
}}},saveRow:function(){var bA=this,bx=bA._editContainer,bz=bA._modelForContainer(bx),by=bA.editable;
if(bx&&by&&by.end()&&!bA.trigger(a5,{container:bx,model:bz})){bA.dataSource.sync();
}},_displayRow:function(bF){var bG=this,bB=bG._modelForContainer(bF),bE,bC,bD,bA=bF.hasClass("k-state-selected"),bz=bF.hasClass("k-alt");
if(bB){if(bG.lockedContent){bE=b((bz?bG.lockedAltRowTemplate:bG.lockedRowTemplate)(bB));
bG._relatedRow(bF.last()).replaceWith(bE);
}bG.angular("cleanup",function(){return{elements:bF.get()};
});
bC=b((bz?bG.altRowTemplate:bG.rowTemplate)(bB));
bF.replaceWith(bC);
bG.trigger("itemChange",{item:bC,data:bB,ns:bl});
if(bE&&bE.length){bG.trigger("itemChange",{item:bE,data:bB,ns:bl});
}var by=bC;
var bx=[{dataItem:bB}];
if(bE&&bE.length){by=bC.add(bE);
bx.push({dataItem:bB});
}bG.angular("compile",function(){return{elements:by.get(),data:bx};
});
if(bA&&bG.options.selectable){bG.select(bC.add(bE));
}if(bE){f(bC[0],bE[0]);
}bD=bC.next();
if(bD.hasClass("k-detail-row")&&bD.is(":visible")){bC.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse");
}}},_showMessage:function(bz,bA){var bC=this;
if(!bC._isMobile){return window.confirm(bz.title);
}var bB=aB.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>');
var by=b(bB(bz)).appendTo(bC.view.element);
var bx=bC._actionSheet=new aB.mobile.ui.ActionSheet(by,{cancel:bz.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy();
},command:function(bD){var bE=b(bD.currentTarget).parent();
if(!bE.hasClass("km-actionsheet-cancel")){bC._removeRow(bA);
}},popup:bC._actionSheetPopupOptions});
bx.open(bA);
return false;
},_confirmation:function(bz){var bA=this,by=bA.options.editable,bx=by===true||typeof by===bc?bA.options.messages.editable.confirmation:by.confirmation;
if(bx!==false&&bx!=null){if(typeof bx===ab){bx=bx(bA._modelForContainer(bz));
}return bA._showMessage({confirmDelete:by.confirmDelete||bA.options.messages.editable.confirmDelete,cancelDelete:by.cancelDelete||bA.options.messages.editable.cancelDelete,title:bx===true?bA.options.messages.editable.confirmation:bx},bz);
}return true;
},cancelChanges:function(){this.dataSource.cancelChanges();
},saveChanges:function(){var bx=this;
if((bx.editable&&bx.editable.end()||!bx.editable)&&!bx.trigger(a6)){bx.dataSource.sync();
}},addRow:function(){var bH=this,bB,bz=bH.dataSource,bC=bH._editMode(),by=bH.options.editable.createAt||"",bE=bz.pageSize(),bI=bz.view()||[];
if(bH.editable&&bH.editable.end()||!bH.editable){if(bC!="incell"){bH.cancelRow();
}bB=bz.indexOf(bI[0]);
if(by.toLowerCase()=="bottom"){bB+=bI.length;
if(bE&&!bz.options.serverPaging&&bE<=bI.length){bB-=1;
}}if(bB<0){if(bz.page()>bz.totalPages()){bB=(bz.page()-1)*bE;
}else{bB=0;
}}var bD=bz.insert(bB,{}),bA=bD.uid,bG=bH.lockedContent?bH.lockedTable:bH.table,bF=bG.find("tr["+aB.attr("uid")+"="+bA+"]"),bx=bF.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(bH._firstEditableColumnIndex(bF));
if(bC==="inline"&&bF.length){bH.editRow(bF);
}else{if(bC==="popup"){bH.editRow(bD);
}else{if(bx.length){bH.editCell(bx);
}}}if(by.toLowerCase()=="bottom"&&bH.lockedContent){bH.lockedContent[0].scrollTop=bH.content[0].scrollTop=bH.table[0].offsetHeight;
}}},_firstEditableColumnIndex:function(bz){var bD=this,bx,by=aD(bD.columns),bA,bB,bC=bD._modelForContainer(bz);
for(bA=0,bB=by.length;
bA<bB;
bA++){bx=by[bA];
if(bC&&(!bC.editable||bC.editable(bx.field))&&!bx.command&&bx.field&&bx.hidden!==true){return bA;
}}return -1;
},_toolbar:function(){var bz=this,bB=bz.wrapper,bA=bz.options.toolbar,by=bz.options.editable,bx;
if(bA){bx=bz.wrapper.find(".k-grid-toolbar");
if(!bx.length){if(!at(bA)){bA=typeof bA===bc?bA:bz._toolbarTmpl(bA).replace(bj,"\\#");
bA=aY(aB.template(bA),bz);
}bx=b('<div class="k-header k-grid-toolbar" />').html(bA({})).prependTo(bB);
bz.angular("compile",function(){return{elements:bx.get()};
});
}if(by&&by.create!==false){bx.on(m+aV,".k-grid-add",function(bC){bC.preventDefault();
bz.addRow();
}).on(m+aV,".k-grid-cancel-changes",function(bC){bC.preventDefault();
bz.cancelChanges();
}).on(m+aV,".k-grid-save-changes",function(bC){bC.preventDefault();
bz.saveChanges();
});
}bx.on(m+aV,".k-grid-excel",function(bC){bC.preventDefault();
bz.saveAsExcel();
});
bx.on(m+aV,".k-grid-pdf",function(bC){bC.preventDefault();
bz.saveAsPDF();
});
}},_toolbarTmpl:function(bx){var bB=this,bz,bA,by="";
if(ap(bx)){for(bz=0,bA=bx.length;
bz<bA;
bz++){by+=bB._createButton(bx[bz]);
}}return by;
},_createButton:function(bz){var bD=bz.template||z,bA=typeof bz===bc?bz:bz.name||bz.text,by=G[bA]?G[bA].className:"k-grid-"+(bA||"").replace(/\s/g,""),bC={className:by,text:bA,imageClass:"",attr:"",iconClass:""},bB=this.options.messages.commands,bx;
if(!bA&&!(ay(bz)&&bz.template)){throw new Error("Custom commands should have name specified");
}if(ay(bz)){bz=P(true,{},bz);
if(bz.className&&ao(bC.className,bz.className.split(" "))<0){bz.className+=" "+bC.className;
}else{if(bz.className===bm){bz.className=bC.className;
}}if(bA==="edit"&&ay(bz.text)){bz=P(true,{},bz);
bz.text=bz.text.edit;
}if(bz.attr){if(ay(bz.attr)){bz.attr=bd(bz.attr);
}if(typeof bz.attr===bc){bx=bz.attr.match(/class="(.+?)"/);
if(bx&&ao(bx[1],bz.className.split(" "))<0){bz.className+=" "+bx[1];
}}}bC=P(true,bC,G[bA],{text:bB[bA]},bz);
}else{bC=P(true,bC,G[bA],{text:bB[bA]});
}return aB.template(bD)(bC);
},_hasFooters:function(){return !!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0;
},_groupable:function(){var bx=this;
if(bx._groupableClickHandler){bx.table.add(bx.lockedTable).off(m+aV,bx._groupableClickHandler);
}else{bx._groupableClickHandler=function(by){var bz=b(this),bA=bz.closest("tr");
if(bz.hasClass("k-i-collapse")){bx.collapseGroup(bA);
}else{bx.expandGroup(bA);
}by.preventDefault();
by.stopPropagation();
};
}if(bx._isLocked()){bx.lockedTable.on(m+aV,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",bx._groupableClickHandler);
}else{bx.table.on(m+aV,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",bx._groupableClickHandler);
}bx._attachGroupable();
},_attachGroupable:function(){var bA=this,bB=bA.wrapper,bz=bA.options.groupable,bx=ak+"["+aB.attr("field")+"]",by=bA.content?".k-grid-header:first "+bx:"table:first>.k-grid-header "+bx;
if(bz&&bz.enabled!==false){if(!bB.has("div.k-grouping-header")[0]){b("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(bB);
}if(bA.groupable){bA.groupable.destroy();
}bA.groupable=new bl.Groupable(bB,P({},bz,{draggable:bA._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:bA.dataSource,draggableElements:by,filter:by,allowDrag:bA.options.reorderable,change:function(bC){if(bA.trigger("group",{groups:bC.groups})){bC.preventDefault();
}}}));
}},_continuousItems:function(bA,bx){if(!this.lockedContent){return;
}var bG=this;
var bz=bG.table.add(bG.lockedTable);
var bC=b(bA,bz[0]);
var bE=b(bA,bz[1]);
var by=bx?aF(bG.columns).length:1;
var bD=bx?bG.columns.length-by:1;
var bF=[];
for(var bB=0;
bB<bC.length;
bB+=by){aZ.apply(bF,bC.slice(bB,bB+by));
aZ.apply(bF,bE.splice(0,bD));
}return bF;
},_selectable:function(){var bE=this,bB,bx,bC=[],bA=bE._isLocked(),bD=bE.options.selectable;
if(bD){if(bE.selectable){bE.selectable.destroy();
}bD=aB.ui.Selectable.parseOptions(bD);
bB=bD.multiple;
bx=bD.cell;
if(bE._hasDetails()){bC[bC.length]=".k-detail-row";
}if(bE.options.groupable||bE._hasFooters()){bC[bC.length]=".k-grouping-row,.k-group-footer";
}bC=bC.join(",");
if(bC!==""){bC=":not("+bC+")";
}var by=bE.table;
if(bA){by=by.add(bE.lockedTable);
}var bz=">"+(bx?a8:"tbody>tr"+bC);
bE.selectable=new aB.ui.Selectable(by,{filter:bz,aria:true,multiple:bB,change:function(){bE.trigger(k);
},useAllItems:bA&&bB&&bx,relatedTarget:function(bG){if(bx||!bA){return;
}var bI;
var bJ=b();
for(var bF=0,bH=bG.length;
bF<bH;
bF++){bI=bE._relatedRow(bG[bF]);
if(ao(bI[0],bG)<0){bJ=bJ.add(bI);
}}return bJ;
},continuousItems:function(){return bE._continuousItems(bz,bx);
}});
if(bE.options.navigatable){by.on("keydown"+aV,function(bG){var bF=bE.current();
var bH=bG.target;
if(bG.keyCode===aC.SPACEBAR&&b.inArray(bH,by)>-1&&!bF.is(".k-edit-cell,.k-header")&&bF.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){bG.preventDefault();
bG.stopPropagation();
bF=bx?bF:bF.parent();
if(bA&&!bx){bF=bF.add(bE._relatedRow(bF));
}if(bB){if(!bG.ctrlKey){bE.selectable.clear();
}else{if(bF.hasClass(a7)){bF.removeClass(a7);
bE.trigger(k);
return;
}}}else{bE.selectable.clear();
}bE.selectable.value(bF);
}});
}}},_clipboard:function(){var by=this.options;
var bz=by.selectable;
if(bz&&by.allowCopy){var bx=this;
if(!by.navigatable){bx.table.add(bx.lockedTable).attr("tabindex",0).on("mousedown"+aV+" keydown"+aV,".k-detail-cell",function(bA){if(bA.target!==bA.currentTarget){bA.stopImmediatePropagation();
}}).on("mousedown"+aV,aN+">"+aL,aY(bg,bx));
}bx.copyHandler=aY(bx.copySelection,bx);
bx.updateClipBoardState=function(){if(bx.areaClipBoard){bx.areaClipBoard.val(bx.getTSV()).focus().select();
}};
bx.bind("change",bx.updateClipBoardState);
bx.wrapper.on("keydown",bx.copyHandler);
bx.clearAreaHandler=aY(bx.clearArea,bx);
bx.wrapper.on("keyup",bx.clearAreaHandler);
}},copySelection:function(bx){if(bx instanceof jQuery.Event&&!(bx.ctrlKey||bx.metaKey)||b(bx.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text){return;
}if(!this.areaClipBoard){this.areaClipBoard=b("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper);
}this.areaClipBoard.val(this.getTSV()).focus().select();
},getTSV:function(){var bA=this;
var bG=bA.select();
var bz="\t";
var bx=bA.options.allowCopy;
var bD=true;
if(b.isPlainObject(bx)&&bx.delimeter){bz=bx.delimeter;
}var bH="";
if(bG.length){if(bG.eq(0).is("tr")){bG=bG.find("td:not(.k-group-cell)");
}if(bD){bG.filter(":visible");
}var bE=[];
var by=this.columns.length;
var bC=bA._isLocked()&&aF(bA.columns).length;
var bB=true;
b.each(bG,function(bL,bI){bI=b(bI);
var bN=bI.closest("tr");
var bM=bN.index();
var bJ=bI.index();
if(bD){bJ-=bI.prevAll(":hidden").length;
}if(bC&&bB){bB=b.contains(bA.lockedTable[0],bI[0]);
}if(bA._groups()&&bB){bJ-=bA._groups();
}bJ=bB?bJ:bJ+bC;
if(by>bJ){by=bJ;
}var bK=bI.text();
if(!bE[bM]){bE[bM]=[];
}bE[bM][bJ]=bK;
});
var bF=bE.length;
bE=b.each(bE,function(bI,bJ){if(bJ){bE[bI]=bJ.slice(by);
if(bF>bI){bF=bI;
}}});
b.each(bE.slice(bF),function(bI,bJ){if(bJ){bH+=bJ.join(bz)+"\r\n";
}else{bH+="\r\n";
}});
}return bH;
},clearArea:function(bx){var by;
if(this.areaClipBoard&&bx&&bx.target===this.areaClipBoard[0]){if(this.options.navigatable){by=b(this.current()).closest("table");
}else{by=this.table;
}Y(by,true);
}if(this.areaClipBoard){this.areaClipBoard.remove();
this.areaClipBoard=null;
}},_minScreenSupport:function(){var bx=this.hideMinScreenCols();
if(bx){this.minScreenResizeHandler=aY(this.hideMinScreenCols,this);
b(window).on("resize",this.minScreenResizeHandler);
}},hideMinScreenCols:function(){var bx=this.columns,by=window.innerWidth>0?window.innerWidth:screen.width;
return this._iterateMinScreenCols(bx,by);
},_iterateMinScreenCols:function(bz,bC){var bx=false;
for(var bA=0;
bA<bz.length;
bA++){var by=bz[bA];
var bB=by.minScreenWidth;
if(bB!==bm&&bB!==null){bx=true;
if(bB>bC){this.hideColumn(by);
}else{this.showColumn(by);
}}if(!by.hidden&&by.columns){bx=this._iterateMinScreenCols(by.columns,bC)||bx;
}}return bx;
},_relatedRow:function(bz){var by=this.lockedTable;
bz=b(bz);
if(!by){return bz;
}var bA=bz.closest(this.table.add(this.lockedTable));
var bx=bA.find(">tbody>tr").index(bz);
bA=bA[0]===this.table[0]?by:this.table;
return bA.find(">tbody>tr").eq(bx);
},clearSelection:function(){var bx=this;
bx.selectable.clear();
bx.trigger(k);
},select:function(bx){var bz=this,by=bz.selectable;
bx=bz.table.add(bz.lockedTable).find(bx);
if(bx.length){if(!by.options.multiple){by.clear();
bx=bx.first();
}if(bz._isLocked()){bx=bx.add(bx.map(function(){return bz._relatedRow(this);
}));
}by.value(bx);
return;
}return by.value();
},_updateCurrentAttr:function(by,bA){var bz=b(by).data("headerId");
b(by).removeClass(X).removeAttr("aria-describedby").closest("table").removeAttr("aria-activedescendant");
if(bz){bz=bz.replace(this._cellId,"");
b(by).attr("id",bz);
}else{b(by).removeAttr("id");
}bA.data("headerId",bA.attr("id")).attr("id",this._cellId).addClass(X).closest("table").attr("aria-activedescendant",this._cellId);
if(!bA.closest("tr").hasClass("k-grouping-row")&&!bA.hasClass("k-header")){var bx=this.columns[this.cellIndex(bA)];
if(bx){bz=bx.headerAttributes.id;
}bA.attr("aria-describedby",bz+" "+this._cellId);
}else{bA.attr("aria-describedby",this._cellId);
}this._current=bA;
},_scrollCurrent:function(){var bx=this._current;
var bC=this.options.scrollable;
if(!bx||!bC){return;
}var bA=bx.parent();
var bE=bA.closest("table").parent();
var bz=bE.is(".k-grid-content-locked,.k-grid-header-locked");
var by=bE.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap");
var bD=b(this.content).find(">.k-virtual-scrollable-wrap").andSelf().last()[0];
if(by){if(bC.virtual){var bB=Math.max(ao(bA[0],this._items(bA.parent())),0);
this._rowVirtualIndex=this.virtualScrollable.itemIndex(bB);
this.virtualScrollable.scrollIntoView(bA);
}else{this._scrollTo(this._relatedRow(bA)[0],bD);
}}if(this.lockedContent){this.lockedContent[0].scrollTop=bD.scrollTop;
}if(!bz){this._scrollTo(bx[0],bD);
}},current:function(bx){return this._setCurrent(bx,true);
},_setCurrent:function(by,bz){var bx=this._current;
by=b(by);
if(by.length){if(!bx||bx[0]!==by[0]){this._updateCurrentAttr(bx,by);
this._scrollCurrent();
if(!bz){this.trigger(aM,{element:by});
}}}return this._current;
},_removeCurrent:function(){if(this._current){this._current.removeClass(X);
this._current=null;
}},_scrollTo:function(bB,by){var bE=bB.tagName.toLowerCase();
var bH=bE==="td"||bE==="th";
var bC=bB[bH?"offsetLeft":"offsetTop"];
var bD=bB[bH?"offsetWidth":"offsetHeight"];
var bA=by[bH?"scrollLeft":"scrollTop"];
var bz=by[bH?"clientWidth":"clientHeight"];
var bx=bC+bD;
var bI=0;
var bG=0;
var bF=0;
if(az&&bH){var bJ=b(bB).closest("table")[0];
if(i.msie){bG=bJ.offsetLeft;
}else{if(i.mozilla){bF=bJ.offsetLeft-aB.support.scrollbar();
}}}bA=Math.abs(bA+bG-bF);
if(bA>bC){bI=bC;
}else{if(bx>bA+bz){if(bD<=bz){bI=bx-bz;
}else{bI=bC;
}}else{bI=bA;
}}bI=Math.abs(bI+bG)+bF;
by[bH?"scrollLeft":"scrollTop"]=bI;
},_navigatable:function(){var bA=this;
if(!bA.options.navigatable){return;
}var bx=bA.table.add(bA.lockedTable);
var by=bA.thead.parent().add(b(">table",bA.lockedHeader));
var bz=bx;
if(bA.options.scrollable){bz=bz.add(by);
by.attr(bf,-1);
}this._navigatableTables=bz;
bz.off("mousedown"+aV+" focus"+aV+" focusout"+aV+" keydown"+aV);
by.on("keydown"+aV,aY(bA._openHeaderMenu,bA)).find("a.k-link").attr("tabIndex",-1);
bx.attr(bf,aI.max(bx.attr(bf)||0,0)).on("mousedown"+aV+" keydown"+aV,".k-detail-cell",function(bB){if(bB.target!==bB.currentTarget){bB.stopImmediatePropagation();
}});
bz.on(aB.support.touch?"touchstart"+aV:"mousedown"+aV,aN+">"+aL,aY(bg,bA)).on("focus"+aV,aY(bA._tableFocus,bA)).on("focusout"+aV,aY(bA._tableBlur,bA)).on("keydown"+aV,aY(bA._tableKeyDown,bA));
},_openHeaderMenu:function(bx){if(bx.altKey&&bx.keyCode==aC.DOWN){this.current().find(".k-grid-filter, .k-header-column-menu").click();
bx.stopImmediatePropagation();
}},_setTabIndex:function(bx){this._navigatableTables.attr(bf,-1);
bx.attr(bf,0);
},_tableFocus:function(by){if(aB.support.touch){return;
}var bx=this.current();
var bz=b(by.currentTarget);
if(bx&&bx.is(":visible")){bx.addClass(X);
}else{this._setCurrent(bz.find(U));
}this._setTabIndex(bz);
},_tableBlur:function(){var bx=this.current();
if(bx){bx.removeClass(X);
}},_tableKeyDown:function(bz){var by=this.current();
var bB=this.virtualScrollable&&this.virtualScrollable.fetching();
var bC=b(bz.target);
var bx=!bz.isDefaultPrevented()&&!bC.is(":button,a,:input,a>.k-icon");
if(bB){bz.preventDefault();
return;
}by=by?by:b(this.lockedTable).add(this.table).find(U);
if(!by.length){return;
}var bA=false;
if(bx&&bz.keyCode==aC.UP){bA=this._moveUp(by);
}if(bx&&bz.keyCode==aC.DOWN){bA=this._moveDown(by);
}if(bx&&bz.keyCode==(az?aC.LEFT:aC.RIGHT)){bA=this._moveRight(by,bz.altKey);
}if(bx&&bz.keyCode==(az?aC.RIGHT:aC.LEFT)){bA=this._moveLeft(by,bz.altKey);
}if(bx&&bz.keyCode==aC.PAGEDOWN){bA=this._handlePageDown();
}if(bx&&bz.keyCode==aC.PAGEUP){bA=this._handlePageUp();
}if(bz.keyCode==aC.ENTER||bz.keyCode==aC.F2){bA=this._handleEnterKey(by,bz.currentTarget,bC);
}if(bz.keyCode==aC.ESC){bA=this._handleEscKey(by,bz.currentTarget);
}if(bz.keyCode==aC.TAB){bA=this._handleTabKey(by,bz.currentTarget,bz.shiftKey);
}if(bA){bz.preventDefault();
bz.stopPropagation();
}},_moveLeft:function(bz,bx){var bB,bA;
var bC=bz.parent();
var by=bC.parent();
if(bx){this.collapseRow(bC);
}else{bA=by.find(aN).index(bC);
bB=this._prevHorizontalCell(by,bz,bA);
if(!bB[0]){by=this._horizontalContainer(by);
bB=this._prevHorizontalCell(by,bz,bA);
if(bB[0]!==bz[0]){Y(by.parent(),true);
}}this._setCurrent(bB);
}return true;
},_moveRight:function(bz,bx){var bB,bA;
var bC=bz.parent();
var by=bC.parent();
if(bx){this.expandRow(bC);
}else{bA=by.find(aN).index(bC);
bB=this._nextHorizontalCell(by,bz,bA);
if(!bB[0]){by=this._horizontalContainer(by,true);
bB=this._nextHorizontalCell(by,bz,bA);
if(bB[0]!==bz[0]){Y(by.parent(),true);
}}this._setCurrent(bB);
}return true;
},_moveUp:function(by){var bx=by.parent().parent();
var bz=this._prevVerticalCell(bx,by);
if(!bz[0]){bx=this._verticalContainer(bx,true);
bz=this._prevVerticalCell(bx,by);
if(bz[0]){Y(bx.parent(),true);
}}this._setCurrent(bz);
return true;
},_moveDown:function(by){var bx=by.parent().parent();
var bz=this._nextVerticalCell(bx,by);
if(!bz[0]){bx=this._verticalContainer(bx);
bz=this._nextVerticalCell(bx,by);
if(bz[0]){Y(bx.parent(),true);
}}this._setCurrent(bz);
return true;
},_handlePageDown:function(){if(!this.options.pageable){return false;
}this.dataSource.page(this.dataSource.page()+1);
return true;
},_handlePageUp:function(){if(!this.options.pageable){return false;
}this.dataSource.page(this.dataSource.page()-1);
return true;
},_handleTabKey:function(by,bz,bB){var bA=this.options.editable&&this._editMode()=="incell";
var bx;
if(!bA||by.is("th")){return false;
}bx=b(c()).closest(".k-edit-cell");
if(bx[0]&&bx[0]!==by[0]){by=bx;
}bx=this._tabNext(by,bz,bB);
if(bx.length){this._handleEditing(by,bx,bx.closest("table"));
return true;
}return false;
},_handleEscKey:function(by,bA){var bx=c();
var bB=this._editMode()=="incell";
if(!aw(by)){if(by.has(bx).length){Y(bA,true);
return true;
}return false;
}if(bB){this.closeCell(true);
}else{var bz=b(by).parent().index();
if(bx){bx.blur();
}this.cancelRow(true);
if(bz>=0){this._setCurrent(this.items().eq(bz).children(aL).first());
}}if(i.msie&&i.version<9){document.body.focus();
}Y(bA,true);
return true;
},_toggleCurrent:function(bx,by){var bz=bx.parent();
if(bz.is(".k-grouping-row")){bz.find(".k-icon:first").click();
return true;
}if(!by&&bz.is(".k-master-row")){bz.find(".k-icon:first").click();
return true;
}return false;
},_handleEnterKey:function(by,bz,bC){var bA=this.options.editable&&this.options.editable.update!==false;
var bx=bC.closest("[role=gridcell]");
if(!bC.is("table")&&!b.contains(by[0],bC[0])){by=bx;
}if(by.is("th")){by.find(".k-link").click();
return true;
}if(this._toggleCurrent(by,bA)){return true;
}var bB=by.find(":kendoFocusable:first");
if(bB[0]&&!by.hasClass("k-edit-cell")&&by.hasClass("k-state-focused")){bB.focus();
return true;
}if(bA&&!bC.is(":button,.k-button,textarea")){if(!bx[0]){bx=by;
}this._handleEditing(bx,false,bz);
return true;
}return false;
},_nextHorizontalCell:function(bD,by,bA){var bx=by.nextAll(D);
if(!bx.length){var bC=bD.find(aN);
var bB=bC.index(by.parent());
if(bB==-1){if(by.hasClass("k-header")){var bz=[];
aH([aF(this.columns)[0]],l(bC.eq(0).children().first()),bz,0,0);
if(bz[bA]){return bz[bA][0];
}return by;
}if(by.parent().hasClass("k-filter-row")){return bC.last().children(D).first();
}return bC.eq(bA).children(D).first();
}}return bx.first();
},_prevHorizontalCell:function(bE,bz,bB){var bx=bz.prevAll(D);
if(!bx.length){var bD=bE.find(aN);
var bC=bD.index(bz.parent());
if(bC==-1){if(bz.hasClass("k-header")){var bA=[];
var by=aF(this.columns);
aH([by[by.length-1]],l(bD.eq(0).children().last()),bA,0,0);
if(bA[bB]){return bA[bB][0];
}return bz;
}if(bz.parent().hasClass("k-filter-row")){return bD.last().children(D).last();
}return bD.eq(bB).children(D).last();
}}return bx.first();
},_currentDataIndex:function(bA,bx){var by=bx.attr("data-index");
if(!by){return bm;
}var bz=aF(this.columns).length;
if(bz&&!bA.closest("div").hasClass("k-grid-content-locked")[0]){return by-bz;
}return by;
},_prevVerticalCell:function(by,bz){var bx;
var bB=bz.parent();
var bD=by.children(aN);
var bC=bD.index(bB);
var bA=this._currentDataIndex(by,bz);
if(bA||bz.hasClass("k-header")){bx=aW(bz);
return bx.eq(bx.length-2);
}bA=bB.children(D).index(bz);
if(bB.hasClass("k-filter-row")){return aE(by).eq(bA);
}if(bC==-1){bB=by.find(".k-filter-row");
if(!bB[0]){return aE(by).eq(bA);
}}else{bB=bC===0?b():bD.eq(bC-1);
}bx=bB.children(D);
if(bx.length>bA){return bx.eq(bA);
}return bx.eq(0);
},_nextVerticalCell:function(by,bz){var bx;
var bB=bz.parent();
var bD=by.children(aN);
var bC=bD.index(bB);
var bA=this._currentDataIndex(by,bz);
if(bC!=-1&&bA===bm&&bz.hasClass("k-header")){return l(bz).eq(1);
}bA=bA?parseInt(bA,10):bB.children(D).index(bz);
if(bC==-1){bB=bD.eq(0);
}else{bB=bD.eq(bC+bz[0].rowSpan);
}bx=bB.children(D);
if(bx.length>bA){return bx.eq(bA);
}return bx.eq(0);
},_verticalContainer:function(bx,bC){var bB=bx.parent();
var bz=this._navigatableTables.length;
var bA=Math.floor(bz/2);
var by=ao(bB[0],this._navigatableTables);
if(bC){bA*=-1;
}by+=bA;
if(by>=0||by<bz){bB=this._navigatableTables.eq(by);
}return bB.find(bC?"thead":"tbody");
},_horizontalContainer:function(bx,bA){var bz=this._navigatableTables.length;
if(bz<=2){return bx;
}var bB=bx.parent();
var by=ao(bB[0],this._navigatableTables);
by+=bA?1:-1;
if(bA&&(by==2||by==bz)){return bx;
}if(!bA&&(by==1||by<0)){return bx;
}return this._navigatableTables.eq(by).find("thead, tbody");
},_tabNext:function(by,bz,bx){var bB=true;
var bA=bx?by.prevAll(D+":first"):by.nextAll(":visible:first");
if(!bA.length){bA=by.parent();
if(this.lockedTable){bB=bx&&bz==this.lockedTable[0]||!bx&&bz==this.table[0];
bA=this._relatedRow(bA);
}if(bB){bA=bA[bx?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first");
}bA=bA.children(D+(bx?":last":":first"));
}return bA;
},_handleEditing:function(by,bF,bH){var bI=this,bx=b(c()),bE=bI._editMode(),bD=i.msie,bG=bD&&i.version<9,bA=bI._editContainer,bB,bz=bI.options.editable&&bI.options.editable.update!==false,bC;
bH=b(bH);
if(bE=="incell"){bC=by.hasClass("k-edit-cell");
}else{bC=by.parent().hasClass("k-grid-edit-row");
}if(bI.editable){if(b.contains(bA[0],bx[0])){if(i.opera||bG){bx.blur().change().triggerHandler("blur");
}else{bx.blur();
if(bD){bx.blur();
}}}if(!bI.editable){Y(bH);
return;
}if(bI.editable.end()){if(bE=="incell"){bI.closeCell();
}else{bI.saveRow();
bC=true;
}}else{if(bE=="incell"){bI._setCurrent(bA);
}else{bI._setCurrent(bA.children().filter(D).first());
}bB=bA.find(":kendoFocusable:first")[0];
if(bB){bB.focus();
}return;
}}if(bF){bI._setCurrent(bF);
}if(bG){document.body.focus();
}Y(bH,true);
if(!bz){return;
}if(!bC&&!bF||bF){if(bE=="incell"){bI.editCell(bI.current());
}else{bI.editRow(bI.current().parent());
}}},_wrapper:function(){var bz=this,by=bz.table,bx=bz.options.height,bA=bz.element;
if(!bA.is("div")){bA=bA.wrap("<div/>").parent();
}bz.wrapper=bA.addClass("k-grid k-widget");
if(bx){bz.wrapper.css(al,bx);
by.css(al,"auto");
}bz._initMobile();
},_initMobile:function(){var by=this.options;
var bz=this;
this._isMobile=by.mobile===true&&aB.support.mobileOS||by.mobile==="phone"||by.mobile==="tablet";
if(this._isMobile){var bx=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+aB.ns+'stretch="true" data-'+aB.ns+'role="view" data-'+aB.ns+'init-widgets="false"></div>').parent();
this.pane=aB.mobile.ui.Pane.wrap(bx);
this.view=this.pane.view();
this._actionSheetPopupOptions=b(document.documentElement).hasClass("km-root")?{modal:false}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"};
if(by.height){this.pane.element.parent().css(al,by.height);
}this._editAnimation="slide";
this.view.bind("show",function(){if(bz._isLocked()){bz._updateTablesWidth();
bz._applyLockedContainersWidth();
bz._syncLockedContentHeight();
bz._syncLockedHeaderHeight();
bz._syncLockedFooterHeight();
}});
}},_tbody:function(){var bz=this,bx=bz.table,by;
by=bx.find(">tbody");
if(!by.length){by=b("<tbody/>").appendTo(bx);
}bz.tbody=by.attr("role","rowgroup");
},_scrollable:function(){var bE=this,bz,bD,bA=bE.options,bB=bA.scrollable,by=bB!==true&&bB.virtual&&!bE.virtualScrollable,bC=!aB.support.kineticScrollNeeded||by?aB.support.scrollbar():0;
if(bB){bz=bE.wrapper.children(".k-grid-header");
if(!bz[0]){bz=b('<div class="k-grid-header" />').insertBefore(bE.table);
}bz.css(az?"padding-left":"padding-right",bB.virtual?bC+1:bC);
bD=b('<table role="grid" />');
if(au){bD.attr("cellspacing",0);
}bD.width(bE.table[0].style.width);
bD.append(bE.thead);
bz.empty().append(b('<div class="k-grid-header-wrap k-auto-scrollable" />').append(bD));
bE.content=bE.table.parent();
if(bE.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")){bE.content=bE.content.parent();
}if(!bE.content.is(".k-grid-content, .k-virtual-scrollable-wrap")){bE.content=bE.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent();
}if(by){bE.virtualScrollable=new bq(bE.content,{dataSource:bE.dataSource,itemHeight:function(){return bE._averageRowHeight();
}});
}bE.scrollables=bz.children(".k-grid-header-wrap").add(bE.content);
var bx=bE.wrapper.find(".k-grid-footer");
if(bx.length){bE.scrollables=bE.scrollables.add(bx.children(".k-grid-footer-wrap"));
}if(bB.virtual){bE.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+aV).bind("scroll"+aV,function(){bE.scrollables.scrollLeft(this.scrollLeft);
if(bE.lockedContent){bE.lockedContent[0].scrollTop=this.scrollTop;
}});
}else{bE.content.unbind("scroll"+aV).bind("scroll"+aV,function(bG){bE.scrollables.not(bG.currentTarget).scrollLeft(this.scrollLeft);
if(bE.lockedContent&&bG.currentTarget==bE.content[0]){bE.lockedContent[0].scrollTop=this.scrollTop;
}});
var bF=bE.content.data("kendoTouchScroller");
if(bF){bF.destroy();
}bF=aB.touchScroller(bE.content);
if(bF&&bF.movable){bE.touchScroller=bF;
bF.movable.bind("change",function(bG){bE.scrollables.scrollLeft(-bG.sender.x);
if(bE.lockedContent){bE.lockedContent.scrollTop(-bG.sender.y);
}});
bE.one(E,function(bG){bG.sender.wrapper.addClass("k-grid-backface");
});
}}}},_renderNoRecordsContent:function(){var by=this;
if(by.options.noRecords){var bx=by.table.parent().children("."+aR);
if(bx.length){by.angular("cleanup",function(){return{elements:bx.get()};
});
bx.remove();
}if(!by.dataSource||!by.dataSource.view().length){bx=b(by.noRecordsTemplate({})).insertAfter(by.table);
by.angular("compile",function(){return{elements:bx.get(),data:[{}]};
});
}}},_setContentWidth:function(bB){var bC=this,bz="k-grid-content-expander",by='<div class="'+bz+'"></div>',bA=bC.resizable,bx;
if(bC.options.scrollable&&bC.wrapper.is(":visible")){bx=bC.table.parent().children("."+bz);
bC._setContentWidthHandler=aY(bC._setContentWidth,bC);
if(!bC.dataSource||!bC.dataSource.view().length){if(!bx[0]){bx=b(by).appendTo(bC.table.parent());
if(bA){bA.bind("resize",bC._setContentWidthHandler);
}}if(bC.thead){bx.width(bC.thead.width());
if(bB){bC.content.scrollLeft(bB);
}}}else{if(bx[0]){bx.remove();
if(bA){bA.unbind("resize",bC._setContentWidthHandler);
}}}bC._applyLockedContainersWidth();
if(bC.lockedHeader&&bC.table[0].clientWidth===0){bC.table[0].style.width="1px";
}}},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var bB=this.thead.parent(),bC=bB.parent(),by=this.wrapper[0].clientWidth,bA=this._groups(),bF=aB.support.scrollbar(),bx=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),bD=bB.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),bG=w(bx),bE=w(bD),bz;
if(bA>0){bG+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*bA;
}if(bG>=by){bG=by-3*bF;
}this.lockedHeader.add(this.lockedContent).width(bG);
bC[0].style.width=bC.parent().width()-bG-2+"px";
bB.add(this.table).width(bE);
if(this.virtualScrollable){by-=bF;
}this.content[0].style.width=by-bG-2+"px";
if(this.lockedFooter&&this.lockedFooter.length){this.lockedFooter.width(bG);
bz=this.footer.find(".k-grid-footer-wrap");
bz[0].style.width=bC[0].clientWidth+"px";
bz.children().first().width(bE);
}}},_setContentHeight:function(){var bC=this,bA=bC.options,by=bC.wrapper.innerHeight(),bx=bC.wrapper.children(".k-grid-header"),bB=aB.support.scrollbar();
if(bA.scrollable&&bC.wrapper.is(":visible")){by-=bx.outerHeight();
if(bC.pager){by-=bC.pager.element.outerHeight();
}if(bA.groupable){by-=bC.wrapper.children(".k-grouping-header").outerHeight();
}if(bA.toolbar){by-=bC.wrapper.children(".k-grid-toolbar").outerHeight();
}if(bC.footerTemplate){by-=bC.wrapper.children(".k-grid-footer").outerHeight();
}var bz=function(bD){var bE,bF;
if(bD[0].style.height){return true;
}else{bE=bD.height();
}bD.height("auto");
bF=bD.height();
if(bE!=bF){bD.height("");
return true;
}bD.height("");
return false;
};
if(bz(bC.wrapper)){if(by>bB*2){if(bC.lockedContent){bB=bC.table[0].offsetWidth>bC.table.parent()[0].clientWidth?bB:0;
bC.lockedContent.height(by-bB);
}bC.content.height(by);
}else{bC.content.height(bB*2+1);
}}}},_averageRowHeight:function(){var bA=this,by=bA._items(bA.tbody).length,bz=bA._rowHeight;
if(by===0){return bz;
}if(!bA._rowHeight){bA._rowHeight=bz=bA.table.outerHeight()/by;
bA._sum=bz;
bA._measures=1;
}var bx=bA.table.outerHeight()/by;
if(bz!==bx){bA._measures++;
bA._sum+=bx;
bA._rowHeight=bA._sum/bA._measures;
}return bz;
},_dataSource:function(){var bA=this,by=bA.options,bz,bx=by.dataSource;
bx=ap(bx)?{data:bx}:bx;
if(ay(bx)){P(bx,{table:bA.table,fields:bA.columns});
bz=by.pageable;
if(ay(bz)&&bz.pageSize!==bm){bx.pageSize=bz.pageSize;
}}if(bA.dataSource&&bA._refreshHandler){bA.dataSource.unbind(k,bA._refreshHandler).unbind(aX,bA._progressHandler).unbind(O,bA._errorHandler);
}else{bA._refreshHandler=aY(bA.refresh,bA);
bA._progressHandler=aY(bA._requestStart,bA);
bA._errorHandler=aY(bA._error,bA);
}bA.dataSource=F.create(bx).bind(k,bA._refreshHandler).bind(aX,bA._progressHandler).bind(O,bA._errorHandler);
},_error:function(){this._progress(false);
},_requestStart:function(){this._progress(true);
},_modelChange:function(bB){var bN=this,bM=bN.tbody,bG=bB.model,bJ=bN.tbody.find("tr["+aB.attr("uid")+"="+bG.uid+"]"),bI,by,bA,bD=bJ.hasClass("k-alt"),bO,bC=bN._items(bM).index(bJ),bE=bN.lockedContent,bK,bL,bz,bH,bF;
if(bE){bI=bN._relatedRow(bJ);
}if(bJ.add(bI).children(".k-edit-cell").length&&!bN.options.rowTemplate){bJ.add(bI).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){by=b(this);
bA=aD(bN.columns)[bN.cellIndex(by)];
if(bA.field===bB.field){if(!by.hasClass("k-edit-cell")){bN._displayCell(by,bA,bG);
b('<span class="k-dirty"/>').prependTo(by);
}else{by.addClass("k-dirty-cell");
}}});
}else{if(!bJ.hasClass("k-grid-edit-row")){bL=b().add(bJ);
if(bE){bO=(bD?bN.lockedAltRowTemplate:bN.lockedRowTemplate)(bG);
bL=bL.add(bI);
bI.replaceWith(bO);
}bN.angular("cleanup",function(){return{elements:bL.get()};
});
bO=(bD?bN.altRowTemplate:bN.rowTemplate)(bG);
bJ.replaceWith(bO);
bO=bN._items(bM).eq(bC);
var bx=[{dataItem:bG}];
if(bE){bJ=bJ.add(bI);
bI=bN._relatedRow(bO)[0];
f(bO[0],bI);
bO=bO.add(bI);
bx.push({dataItem:bG});
}bN.angular("compile",function(){return{elements:bO.get(),data:bx};
});
bK=bN.options.selectable;
if(bK&&bJ.hasClass("k-state-selected")){bN.select(bO);
}bH=bL.children(":not(.k-group-cell,.k-hierarchy-cell)");
bz=bO.children(":not(.k-group-cell,.k-hierarchy-cell)");
for(bC=0,bF=bN.columns.length;
bC<bF;
bC++){bA=bN.columns[bC];
by=bz.eq(bC);
if(bK&&bH.eq(bC).hasClass("k-state-selected")){by.addClass("k-state-selected");
}if(bA.field===bB.field){b('<span class="k-dirty"/>').prependTo(by);
}}bN.trigger("itemChange",{item:bO,data:bG,ns:bl});
}}},_pageable:function(){var by=this,bz,bx=by.options.pageable;
if(bx){bz=by.wrapper.children("div.k-grid-pager");
if(!bz.length){bz=b('<div class="k-pager-wrap k-grid-pager"/>').appendTo(by.wrapper);
}if(by.pager){by.pager.destroy();
}if(typeof bx==="object"&&bx instanceof aB.ui.Pager){by.pager=bx;
}else{by.pager=new aB.ui.Pager(bz,P({},bx,{dataSource:by.dataSource}));
}by.pager.bind("pageChange",function(bA){if(by.trigger("page",{page:bA.index})){bA.preventDefault();
}});
}},_footer:function(){var bE=this,bx=bE.dataSource.aggregates(),bB="",bz=bE.footerTemplate,bD=bE.options,bA,by=bE.footer||bE.wrapper.find(".k-grid-footer");
if(bz){bB=b(bE._wrapFooter(bz(bx)));
if(by.length){var bF=bB;
bE.angular("cleanup",function(){return{elements:by.get()};
});
by.replaceWith(bF);
by=bE.footer=bF;
}else{if(bD.scrollable){by=bE.footer=bD.pageable?bB.insertBefore(bE.wrapper.children("div.k-grid-pager")):bB.appendTo(bE.wrapper);
}else{by=bE.footer=bB.insertBefore(bE.tbody);
}}bE.angular("compile",function(){return{elements:by.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:aG(bE.columns,function(bG){return{column:bG,aggregate:bx[bG.field]};
})};
});
}else{if(by&&!bE.footer){bE.footer=by;
}}if(by.length){if(bD.scrollable){bA=by.attr("tabindex",-1).children(".k-grid-footer-wrap");
bE.scrollables=bE.scrollables.filter(function(){return !b(this).is(".k-grid-footer-wrap");
}).add(bA);
}if(bE._footerWidth){by.find("table").css("width",bE._footerWidth);
}if(bA){var bC=bE.content.scrollLeft();
if(bD.scrollable!==true&&bD.scrollable.virtual){bC=bE.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft();
}bA.scrollLeft(bC);
}}if(bE.lockedContent){bE._appendLockedColumnFooter();
bE._applyLockedContainersWidth();
bE._syncLockedFooterHeight();
}},_wrapFooter:function(bx){var bA=this,by="",bz=!aB.support.mobileOS?aB.support.scrollbar():0;
if(bA.options.scrollable){by=b('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(au?' cellspacing="0"':"")+"><tbody>"+bx+"</tbody></table></div></div>");
bA._appendCols(by.find("table"));
by.css(az?"padding-left":"padding-right",bz);
return by;
}return'<tfoot class="k-grid-footer">'+bx+"</tfoot>";
},_columnMenu:function(){var bQ=this,bL,bD=aD(bQ.columns),bB,bN=bQ.options,bC=bN.columnMenu,bM,bO,bE,bz,bG=ad(bQ.columns,function(bR){return bR.columns!==bm;
}).length>0,bJ=this._isMobile,bI=function(bR){bQ.trigger(p,{field:bR.field,container:bR.container});
},bA=function(bR){Y(bR.closest("table"),true);
},bP=function(bR){if(bQ.trigger("sort",{sort:bR.sort})){bR.preventDefault();
}},bF=function(bR){if(bQ.trigger("filter",{filter:bR.filter,field:bR.field})){bR.preventDefault();
}},bx=bN.$angular;
if(bC){if(typeof bC=="boolean"){bC={};
}bz=aE(bQ.thead);
for(var bH=0,bK=bz.length;
bH<bK;
bH++){bB=bD[bH];
var by=bz.eq(bH);
if(!bB.command&&(bB.field||by.attr("data-"+aB.ns+"field"))){bL=by.data("kendoColumnMenu");
if(bL){bL.destroy();
}bO=bB.sortable!==false&&bC.sortable!==false&&bN.sortable!==false?P({},bN.sortable,{compare:(bB.sortable||{}).compare}):false;
bE=bN.filterable&&bB.filterable!==false&&bC.filterable!==false?P({pane:bQ.pane},bN.filterable,bB.filterable):false;
if(bB.filterable&&bB.filterable.dataSource){bE.forceUnique=false;
bE.checkSource=bB.filterable.dataSource;
}if(bE){bE.format=bB.format;
}bM={dataSource:bQ.dataSource,values:bB.values,columns:bC.columns,sortable:bO,filterable:bE,messages:bC.messages,owner:bQ,closeCallback:bA,init:bI,pane:bQ.pane,sort:bP,filtering:bF,filter:bJ?":not(.k-column-active)":"",lockedColumns:!bG&&bB.lockable!==false&&aF(bD).length>0};
if(bx){bM.$angular=bx;
}by.kendoColumnMenu(bM);
}}}},_headerCells:function(){return this.thead.find("th").filter(function(){var bx=b(this);
return !bx.hasClass("k-group-cell")&&!bx.hasClass("k-hierarchy-cell");
});
},_filterable:function(){var bJ=this,bB=aD(bJ.columns),bF,by,bx,bE=function(bK){bJ.trigger(Q,{field:bK.field,container:bK.container});
},bz=function(bK){Y(bK.closest("table"),true);
},bD=function(bK){if(bJ.trigger("filter",{filter:bK.filter,field:bK.field})){bK.preventDefault();
}},bC=bJ.options.filterable;
if(bC&&typeof bC.mode==bc&&bC.mode.indexOf("menu")==-1){bC=false;
}if(bC&&!bJ.options.columnMenu){by=aE(bJ.thead);
for(var bG=0,bH=by.length;
bG<bH;
bG++){bx=by.eq(bG);
if(bB[bG].filterable!==false&&!bB[bG].command&&(bB[bG].field||bx.attr("data-"+aB.ns+"field"))){bF=bx.data("kendoFilterMenu");
if(bF){bF.destroy();
}bF=bx.data("kendoFilterMultiCheck");
if(bF){bF.destroy();
}var bA=bB[bG].filterable;
var bI=P({},bC,bA,{dataSource:bJ.dataSource,values:bB[bG].values,format:bB[bG].format,closeCallback:bz,title:bB[bG].title||bB[bG].field,init:bE,pane:bJ.pane,change:bD});
if(bA&&bA.messages){bI.messages=P(true,{},bC.messages,bA.messages);
}if(bA&&bA.dataSource){bI.forceUnique=false;
bI.checkSource=bA.dataSource;
}if(bA&&bA.multi){bx.kendoFilterMultiCheck(bI);
}else{bx.kendoFilterMenu(bI);
}}}}},_filterRow:function(){var bM=this;
if(!bM._hasFilterRow()){return;
}var bJ;
var bx=bM.options.$angular;
var bA=aD(bM.columns),bD=bM.options.filterable,bI=bM.thead.find(".k-filter-row"),bE=function(bN){if(bM.trigger("filter",{filter:bN.filter,field:bN.field})){bN.preventDefault();
}};
this._updateHeader(this.dataSource.group().length);
for(var bF=0;
bF<bA.length;
bF++){var bK,bz=bA[bF],bH=bM.options.filterable.operators,bB=false,bL=b("<th/>"),bC=bz.field;
if(bz.hidden){bL.hide();
}bI.append(bL);
if(bC&&bz.filterable!==false){var by=bz.filterable&&bz.filterable.cell||{};
bK=bM.options.dataSource;
if(bK instanceof F){bK=bM.options.dataSource.options;
}var bG=P(true,{},bD.messages);
if(bz.filterable){P(true,bG,bz.filterable.messages);
}if(by.enabled===false){bL.html("&nbsp;");
continue;
}if(by.dataSource){bK=by.dataSource;
bB=true;
}if(bz.filterable&&bz.filterable.operators){bH=bz.filterable.operators;
}bJ={column:bz,dataSource:bM.dataSource,suggestDataSource:bK,customDataSource:bB,field:bC,messages:bG,values:bz.values,template:by.template,delay:by.delay,inputWidth:by.inputWidth,suggestionOperator:by.suggestionOperator,minLength:by.minLength,dataTextField:by.dataTextField,operator:by.operator,operators:bH,showOperators:by.showOperators,change:bE};
if(bx){bJ.$angular=bx;
}b("<span/>").attr(aB.attr("field"),bC).appendTo(bL).kendoFilterCell(bJ);
}else{bL.html("&nbsp;");
}}},_sortable:function(){var bG=this,bA=aD(bG.columns),bz,bE,bx,bD=bG.options.sortable,bF=function(bH){if(bG.trigger("sort",{sort:bH.sort})){bH.preventDefault();
}};
if(bD){var by=aE(bG.thead);
for(var bB=0,bC=by.length;
bB<bC;
bB++){bz=bA[bB];
if(bz.sortable!==false&&!bz.command&&bz.field){bx=by.eq(bB);
bE=bx.data("kendoColumnSorter");
if(bE){bE.destroy();
}bx.attr("data-"+aB.ns+"field",bz.field).kendoColumnSorter(P({},bD,bz.sortable,{dataSource:bG.dataSource,aria:true,filter:":not(.k-column-active)",change:bF}));
}}by=null;
}},_columns:function(by){var bE=this,bD=bE.table,bA,bx=bD.find("col"),bC,bz=bE.options.dataSource;
by=by.length?by:aG(bD.find("th"),function(bL,bI){bL=b(bL);
var bK=bL.attr(aB.attr("sortable")),bG=bL.attr(aB.attr("filterable")),bN=bL.attr(aB.attr("type")),bH=bL.attr(aB.attr("groupable")),bF=bL.attr(aB.attr("field")),bM=bL.attr(aB.attr("title")),bJ=bL.attr(aB.attr("menu"));
if(!bF){bF=bL.text().replace(/\s|[^A-z0-9]/g,"");
}return{field:bF,type:bN,title:bM,sortable:bK!=="false",filterable:bG!=="false",groupable:bH!=="false",menu:bJ,template:bL.attr(aB.attr("template")),width:bx.eq(bI).css("width")};
});
bA=!(bE.table.find("tbody tr").length>0&&(!bz||!bz.transport));
if(bE.options.scrollable){var bB=by;
bC=aF(by);
by=aP(by);
if(bC.length>0&&by.length===0){throw new Error("There should be at least one non locked column");
}aU(bE.element.find("tr:has(th):first"),bB);
by=bC.concat(by);
}bE.columns=aT(by,bA);
},_groups:function(){var bx=this.dataSource.group();
return bx?bx.length:0;
},_tmpl:function(bF,bA,bx,bH){var bK=this,bG=P({},aB.Template,bK.options.templateSettings),bD,bE=bA.length,bJ,bI={storage:{},count:0},bz,bL,bC=bK._hasDetails(),by=[],bB=bK._groups();
if(!bF){bF="<tr";
if(bx){by.push("k-alt");
}if(bC){by.push("k-master-row");
}if(by.length){bF+=' class="'+by.join(" ")+'"';
}if(bE){bF+=" "+aB.attr("uid")+'="#='+aB.expr("uid",bG.paramName)+'#"';
}bF+=" role='row'>";
if(bB>0&&!bH){bF+=af(bB);
}if(bC){bF+='<td class="k-hierarchy-cell"><a class="k-icon k-i-expand" href="\\#" tabindex="-1"></a></td>';
}for(bD=0;
bD<bE;
bD++){bz=bA[bD];
bJ=bz.template;
bL=typeof bJ;
bF+="<td"+bd(bz.attributes)+" role='gridcell'>";
bF+=bK._cellTmpl(bz,bI);
bF+="</td>";
}bF+="</tr>";
}bF=aB.template(bF,bG);
if(bI.count>0){return aY(bF,bI.storage);
}return bF;
},_headerCellText:function(bx){var bB=this,by=P({},aB.Template,bB.options.templateSettings),bz=bx.headerTemplate,bC=typeof bz,bA=bx.title||bx.field||"";
if(bC===ab){bA=aB.template(bz,by)({});
}else{if(bC===bc){bA=bz;
}}return bA;
},_cellTmpl:function(bx,bG){var bI=this,bF=P({},aB.Template,bI.options.templateSettings),bH=bx.template,bE=bF.paramName,bz=bx.field,bB="",bC,bD,bA=bx.format,bJ=typeof bH,by=bx.values;
if(bx.command){if(ap(bx.command)){for(bC=0,bD=bx.command.length;
bC<bD;
bC++){bB+=bI._createButton(bx.command[bC]);
}return bB.replace(bj,"\\#");
}return bI._createButton(bx.command).replace(bj,"\\#");
}if(bJ===ab){bG.storage["tmpl"+bG.count]=bH;
bB+="#=this.tmpl"+bG.count+"("+bE+")#";
bG.count++;
}else{if(bJ===bc){bB+=bH;
}else{if(by&&by.length&&ay(by[0])&&"value" in by[0]&&bz){bB+="#var v ="+aB.stringify(B(by)).replace(bj,"\\#")+"#";
bB+="#var f = v[";
if(!bF.useWithBlock){bB+=bE+".";
}bB+=bz+"]#";
bB+="${f != null ? f : ''}";
}else{bB+=bx.encoded?"#:":"#=";
if(bA){bB+='kendo.format("'+bA.replace(aa,"\\$1")+'",';
}if(bz){bz=aB.expr(bz,bE);
bB+=bz+"==null?'':"+bz;
}else{bB+="''";
}if(bA){bB+=")";
}bB+="#";
}}}return bB;
},_templates:function(){var bF=this,bE=bF.options,bB=bF.dataSource,bD=bB.group(),bC=bF.footer||bF.wrapper.find(".k-grid-footer"),bx=bB.aggregate(),by=aD(bF.columns),bA=aD(aF(bF.columns)),bz=bE.scrollable?aD(aP(bF.columns)):by;
if(bE.scrollable&&bA.length){if(bE.rowTemplate||bE.altRowTemplate){throw new Error("Having both row template and locked columns is not supported");
}bF.rowTemplate=bF._tmpl(bE.rowTemplate,bz,false,true);
bF.altRowTemplate=bF._tmpl(bE.altRowTemplate||bE.rowTemplate,bz,true,true);
bF.lockedRowTemplate=bF._tmpl(bE.rowTemplate,bA);
bF.lockedAltRowTemplate=bF._tmpl(bE.altRowTemplate||bE.rowTemplate,bA,true);
}else{bF.rowTemplate=bF._tmpl(bE.rowTemplate,bz);
bF.altRowTemplate=bF._tmpl(bE.altRowTemplate||bE.rowTemplate,bz,true);
}if(bF._hasDetails()){bF.detailTemplate=bF._detailTmpl(bE.detailTemplate||"");
}if(bF._group&&!ar(bx)||!ar(bx)&&!bC.length||ad(by,function(bG){return bG.footerTemplate;
}).length){bF.footerTemplate=bF._footerTmpl(by,bx,"footerTemplate","k-footer-template");
}if(bD&&ad(by,function(bG){return bG.groupFooterTemplate;
}).length){bx=b.map(bD,function(bG){return bG.aggregates;
});
bF.groupFooterTemplate=bF._footerTmpl(bz,bx,"groupFooterTemplate","k-group-footer",bA.length);
if(bE.scrollable&&bA.length){bF.lockedGroupFooterTemplate=bF._footerTmpl(bA,bx,"groupFooterTemplate","k-group-footer");
}}if(bF.options.noRecords){bF.noRecordsTemplate=bF._noRecordsTmpl();
}},_noRecordsTmpl:function(){var bG='<div class="{0}">{1}</div>';
var bx='<div class="k-grid-norecords-template"{1}>{0}</div>';
var bA=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"";
var bC={storage:{},count:0};
var bB=b.extend({},aB.Template,this.options.templateSettings);
var bz=bB.paramName;
var bD;
var by="";
var bF;
var bE;
if(this.options.noRecords.template){bD=this.options.noRecords.template;
}else{bD=aB.format(bx,this.options.messages.noRecords,bA);
}bF=typeof bD;
if(bF==="function"){bC.storage["tmpl"+bC.count]=bD;
by+="#=this.tmpl"+bC.count+"("+bz+")#";
bC.count++;
}else{if(bF==="string"){by+=bD;
}}bE=aB.template(aB.format(bG,aR,by),bB);
if(bC.count>0){bE=b.proxy(bE,bC.storage);
}return bE;
},_footerTmpl:function(bz,bx,bN,bH,bK){var bO=this,bJ=P({},aB.Template,bO.options.templateSettings),bG=bJ.paramName,bD="",bE,bF,bM,bP,bL={},bA=0,bI={},bC=bO._groups(),bB=bO.dataSource._emptyAggregates(bx),by;
bD+='<tr class="'+bH+'">';
if(bC>0&&!bK){bD+=af(bC);
}if(bO._hasDetails()){bD+='<td class="k-hierarchy-cell">&nbsp;</td>';
}for(bE=0,bF=bz.length;
bE<bF;
bE++){by=bz[bE];
bM=by[bN];
bP=typeof bM;
bD+="<td"+bd(by.footerAttributes)+">";
if(bM){if(bP!==ab){bI=bB[by.field]?P({},bJ,{paramName:bG+"['"+by.field+"']"}):{};
bM=aB.template(bM,bI);
}bL["tmpl"+bA]=bM;
bD+="#=this.tmpl"+bA+"("+bG+")#";
bA++;
}else{bD+="&nbsp;";
}bD+="</td>";
}bD+="</tr>";
bD=aB.template(bD,bJ);
if(bA>0){return aY(bD,bL);
}return bD;
},_detailTmpl:function(bC){var bF=this,bz="",bB=P({},aB.Template,bF.options.templateSettings),bA=bB.paramName,bE={},bD=0,by=bF._groups(),bx=br(aD(bF.columns)).length,bG=typeof bC;
bz+='<tr class="k-detail-row">';
if(by>0){bz+=af(by);
}bz+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(bx?' colspan="'+bx+'"':"")+">";
if(bG===ab){bE["tmpl"+bD]=bC;
bz+="#=this.tmpl"+bD+"("+bA+")#";
bD++;
}else{bz+=bC;
}bz+="</td></tr>";
bz=aB.template(bz,bB);
if(bD>0){return aY(bz,bE);
}return bz;
},_hasDetails:function(){var bx=this;
return bx.options.detailTemplate!==null||(bx._events[L]||[]).length;
},_hasFilterRow:function(){var bz=this.options.filterable;
var bA=bz&&typeof bz.mode==bc&&bz.mode.indexOf("row")!=-1;
var bx=this.columns;
var by=b.grep(bx,function(bB){return bB.filterable===false;
});
if(bx.length&&by.length==bx.length){bA=false;
}return bA;
},_details:function(){var bx=this;
if(bx.options.scrollable&&bx._hasDetails()&&aF(bx.columns).length){throw new Error("Having both detail template and locked columns is not supported");
}bx.table.on(m+aV,".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse",function(bC){var by=b(this),bD=by.hasClass("k-i-expand"),bF=by.closest("tr.k-master-row"),bA,bB=bx.detailTemplate,bz,bE=bx._hasDetails();
by.toggleClass("k-i-expand",!bD).toggleClass("k-i-collapse",bD);
bA=bF.next();
if(bE&&!bA.hasClass("k-detail-row")){bz=bx.dataItem(bF);
bA=b(bB(bz)).addClass(bF.hasClass("k-alt")?"k-alt":"").insertAfter(bF);
bx.angular("compile",function(){return{elements:bA.get(),data:[{dataItem:bz}]};
});
bx.trigger(L,{masterRow:bF,detailRow:bA,data:bz,detailCell:bA.find(".k-detail-cell")});
}bx.trigger(bD?K:J,{masterRow:bF,detailRow:bA});
bA.toggle(bD);
if(bx._current){bx._current.attr("aria-expanded",bD);
}bC.preventDefault();
return false;
});
},dataItem:function(bC){bC=b(bC)[0];
if(!bC){return null;
}var bB=this.tbody.children(),bx=/k-grouping-row|k-detail-row|k-group-footer/,bz=bC.sectionRowIndex,bA,by;
by=bz;
for(bA=0;
bA<bz;
bA++){if(bx.test(bB[bA].className)){by--;
}}return this._data[by];
},expandRow:function(bx){b(bx).find("> td .k-i-expand").click();
},collapseRow:function(bx){b(bx).find("> td .k-i-collapse").click();
},_createHeaderCells:function(bx,bE){var bH=this,bA,bG,bF,bz="",bD,bC=aD(bH.columns),by;
for(bA=0,bD=bx.length;
bA<bD;
bA++){bG=bx[bA].column||bx[bA];
bF=bH._headerCellText(bG);
by="";
var bB=ao(bG,bC);
if(!bG.command){if(bG.field){by=aB.attr("field")+"='"+bG.field+"' ";
}bz+="<th scope='col' role='columnheader' "+by;
if(bE&&!bx[bA].colSpan){bz+=" rowspan='"+bE+"'";
}if(bx[bA].colSpan>1){bz+='colspan="'+(bx[bA].colSpan-am(bG.columns))+'" ';
bz+=aB.attr("colspan")+"='"+bx[bA].colSpan+"'";
}if(bG.title){bz+=aB.attr("title")+'="'+bG.title.replace('"',"&quot;").replace(/'/g,"'")+'" ';
}if(bG.groupable!==bm){bz+=aB.attr("groupable")+"='"+bG.groupable+"' ";
}if(bG.aggregates&&bG.aggregates.length){bz+=aB.attr("aggregates")+"='"+bG.aggregates+"'";
}if(bB>-1){bz+=aB.attr("index")+"='"+bB+"'";
}bz+=bd(bG.headerAttributes);
bz+=">"+bF+"</th>";
}else{bz+="<th scope='col'"+bd(bG.headerAttributes);
if(bE&&!bx[bA].colSpan){bz+=" rowspan='"+bE+"'";
}if(bB>-1){bz+=aB.attr("index")+"='"+bB+"'";
}bz+=">"+bF+"</th>";
}}return bz;
},_appendLockedColumnContent:function(){var bB=this.columns,bD,bx=this.table.find("colgroup"),bz=bx.find("col:not(.k-group-col,.k-hierarchy-col)"),bE,bF=b(),bG=0,bC,bA,bH,by=0;
for(bD=0,bE=bB.length;
bD<bE;
bD++){if(bB[bD].locked){if(aA(bB[bD])){bA=1;
if(bB[bD].columns){bA=aD(bB[bD].columns).length-am(bB[bD].columns);
}bA=bA||1;
for(bH=0;
bH<bA;
bH++){bF=bF.add(bz.eq(bD+by+bH-bG));
}by+=bA-1;
}else{bG++;
}}}bC=b('<div class="k-grid-content-locked"><table'+(au?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>");
bx.detach();
bC.find("colgroup").append(bF);
bx.insertBefore(this.table.find("tbody"));
this.lockedContent=bC.insertBefore(this.content);
this.lockedTable=bC.children("table");
},_appendLockedColumnFooter:function(){var bG=this;
var bz=bG.footer;
var bx=bz.find(".k-footer-template>td");
var by=bz.find(".k-grid-footer-wrap>table>colgroup>col");
var bB=b('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>');
var bC,bD;
var bA=bG._groups();
var bE=b(),bF=b();
bE=bE.add(bx.filter(".k-group-cell"));
for(bC=0,bD=aD(aF(bG.columns)).length;
bC<bD;
bC++){bE=bE.add(bx.eq(bC+bA));
}bF=bF.add(by.filter(".k-group-col"));
for(bC=0,bD=br(aD(bt(bG.columns))).length;
bC<bD;
bC++){bF=bF.add(by.eq(bC+bA));
}bE.appendTo(bB.find("tr"));
bF.appendTo(bB.find("colgroup"));
bG.lockedFooter=bB.prependTo(bz);
},_appendLockedColumnHeader:function(bE){var bU=this,bD=this.columns,bM,bL,bP,bz,bV,bW,bT,bK,bG,bQ=[],bR=0,bB=b(),bJ=bU._hasFilterRow(),bH=0,bI=b(),bx,bO=0,by=b();
bz=bU.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)");
bK=bU.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)");
bG=bU.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");
var bA=0;
for(bM=0,bP=bD.length;
bM<bP;
bM++){if(bD[bM].locked){bx=bK.eq(bM);
bO=aD(bD[bM].columns||[]).length;
if(aA(bD[bM])){var bC=null;
if(bD[bM].columns){bC=bO-am(bD[bM].columns);
}bC=bC||1;
for(var bS=0;
bS<bC;
bS++){bB=bB.add(bz.eq(bM+bA+bS-bR));
}bA+=bC-1;
}aH([bD[bM]],l(bx),bQ,0,0);
bO=bO||1;
for(var bN=0;
bN<bO;
bN++){bI=bI.add(bG.eq(bH+bN));
}bH+=bO;
}if(bD[bM].columns){bR+=am(bD[bM].columns);
}if(!aA(bD[bM])){bR++;
}}if(bQ.length){bL='<div class="k-grid-header-locked" style="width:1px"><table'+(au?' cellspacing="0"':"")+"><colgroup/><thead>";
bL+=new Array(bQ.length+1).join("<tr></tr>");
bL+=(bJ?'<tr class="k-filter-row" />':"")+"</thead></table></div>";
bT=b(bL);
bz=bT.find("colgroup");
bz.append(bU.thead.prev().find("col.k-group-col").add(bB));
bV=bT.find("thead tr:not(.k-filter-row)");
for(bM=0,bP=bQ.length;
bM<bP;
bM++){by=bk(bQ[bM]);
bV.eq(bM).append(bU.thead.find("tr:eq("+bM+") .k-group-cell").add(by));
}var bF=a1(this.thead);
if(bQ.length<bF){a3(bT,bF-bQ.length);
}bW=bT.find(".k-filter-row");
bW.append(bU.thead.find(".k-filter-row .k-group-cell").add(bI));
this.lockedHeader=bT.prependTo(bE);
this.thead.find(".k-group-cell").remove();
return true;
}return false;
},_removeLockedContainers:function(){var bx=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);
aB.destroy(bx);
bx.off(aV).remove();
this.lockedHeader=this.lockedContent=this.lockedFooter=null;
this.selectable=null;
},_thead:function(){var bI=this,bx=bI.columns,bA=bI._hasDetails()&&bx.length,bB=bI._hasFilterRow(),bF,bE="",bJ=bI.table.find(">thead"),bD=bI.element.find("thead:first").length>0,bK;
if(!bJ.length){bJ=b("<thead/>").insertBefore(bI.tbody);
}if(bI.lockedHeader&&bI.thead){bK=bI.thead.find("tr:has(th):not(.k-filter-row)").html("");
bK.remove();
bK=b();
bI._removeLockedContainers();
}else{if(bD){bK=bI.element.find("thead:first tr:has(th):not(.k-filter-row)");
}else{bK=bI.element.find("tr:has(th):first");
}}if(!bK.length){bK=bJ.children().first();
if(!bK.length){var bG=[{rowSpan:1,cells:[],index:0}];
bI._prepareColumns(bG,bx);
for(bF=0;
bF<bG.length;
bF++){bE+="<tr>";
if(bA){bE+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>';
}bE+=bI._createHeaderCells(bG[bF].cells,bG[bF].rowSpan);
bE+="</tr>";
}bK=b(bE);
}}if(bB){var bz=b("<tr/>");
bz.addClass("k-filter-row");
if(bA||bK.find(".k-hierarchy-cell").length){bz.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>');
}var by=(bI.thead||bJ).find(".k-filter-row");
if(by.length){aB.destroy(by);
by.remove();
}bJ.append(bz);
}if(!bK.children().length){bE="";
if(bA){bE+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>';
}bE+=bI._createHeaderCells(bx);
bK.html(bE);
}else{if(bA&&!bK.find(".k-hierarchy-cell")[0]){bK.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>');
}}bK.attr("role","row").find("th").addClass("k-header");
if(!bI.options.scrollable){bJ.addClass("k-grid-header");
}bK.find("script").remove().end().prependTo(bJ);
if(bI.thead){bI._destroyColumnAttachments();
}this.angular("cleanup",function(){return{elements:bJ.find("th").get()};
});
this.angular("compile",function(){return{elements:bJ.find("th").get(),data:aG(bx,function(bL){return{column:bL};
})};
});
bI.thead=bJ.attr("role","rowgroup");
bI._sortable();
bI._filterable();
bI._filterRow();
bI._scrollable();
bI._updateCols();
bI._columnMenu();
var bH;
var bC=this.options.scrollable&&aF(this.columns).length;
if(bC){bH=bI._appendLockedColumnHeader(bI.thead.closest(".k-grid-header"));
bI._appendLockedColumnContent();
bI.lockedContent.bind("DOMMouseScroll"+aV+" mousewheel"+aV,aY(bI._wheelScroll,bI));
}bI._updateColumnCellIndex();
bI._updateFirstColumnClass();
bI._resizable();
bI._draggable();
bI._reorderable();
bI._updateHeader(bI._groups());
if(bC){if(bH){bI._syncLockedHeaderHeight();
}bI._applyLockedContainersWidth();
}if(bI.groupable){bI._attachGroupable();
}},_retrieveFirstColumn:function(by,bA){var bz=b();
if(bA.length&&by[0]){var bx=by[0];
while(bx.columns&&bx.columns.length){bx=bx.columns[0];
bA=bA.filter(":not(:first())");
}bz=bz.add(bA);
}return bz;
},_updateFirstColumnClass:function(){var bA=this,bx=bA.columns||[],by=bA._hasDetails()&&bx.length;
if(!by&&!bA._groups()){var bB=bA.thead.find(">tr:not(.k-filter-row):not(:first)");
bx=aP(bx);
var bz=bA._retrieveFirstColumn(bx,bB);
if(bA._isLocked()){bB=bA.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)");
bx=aF(bA.columns);
bz=bz.add(bA._retrieveFirstColumn(bx,bB));
}bz.each(function(){var bC=b(this).find("th");
bC.removeClass("k-first");
bC.eq(0).addClass("k-first");
});
}},_prepareColumns:function(bE,bz,bB,bC){var bD=bC||bE[bE.length-1];
var by=bE[bD.index+1];
var bF=0;
for(var bA=0;
bA<bz.length;
bA++){var bx={column:bz[bA],colSpan:0};
bD.cells.push(bx);
if(bz[bA].columns&&bz[bA].columns.length){if(!by){by={rowSpan:0,cells:[],index:bE.length};
bE.push(by);
}bx.colSpan=bz[bA].columns.length;
this._prepareColumns(bE,bz[bA].columns,bx,by);
bF+=bx.colSpan-1;
bD.rowSpan=bE.length-bD.index;
}}if(bB){bB.colSpan+=bF;
}},_wheelScroll:function(bz){if(bz.ctrlKey){return;
}var bx=this.content;
if(this.options.scrollable.virtual){bx=this.virtualScrollable.verticalScrollbar;
}var bA=bx.scrollTop(),by=aB.wheelDeltaY(bz);
if(by){bz.preventDefault();
bx.scrollTop(bA+-by);
}},_isLocked:function(){return this.lockedHeader!=null;
},_updateHeaderCols:function(){var bx=this.thead.parent().add(this.table);
if(this._isLocked()){aS(bx,bs(bu(this.columns)),this._hasDetails(),0);
}else{aS(bx,bs(br(this.columns)),this._hasDetails(),0);
}},_updateCols:function(bx){bx=bx||this.thead.parent().add(this.table);
this._appendCols(bx,this._isLocked());
},_updateLockedCols:function(bx){if(this._isLocked()){bx=bx||this.lockedHeader.find("table").add(this.lockedTable);
aS(bx,bs(bt(this.columns)),this._hasDetails(),this._groups());
}},_appendCols:function(by,bx){if(bx){aS(by,bs(bu(this.columns)),this._hasDetails(),0);
}else{aS(by,bs(br(this.columns)),this._hasDetails(),this._groups());
}},_autoColumns:function(bz){if(bz&&bz.toJSON){var bA=this,by,bx;
bz=bz.toJSON();
bx=!(bA.table.find("tbody tr").length>0&&(!bA.dataSource||!bA.dataSource.transport));
for(by in bz){bA.columns.push({field:by,encoded:bx,headerAttributes:{id:aB.guid()}});
}bA._thead();
bA._templates();
}},_rowsHtml:function(by,bD){var bE=this,bz="",bA,bC=bD.rowTemplate,bx=bD.altRowTemplate,bB;
for(bA=0,bB=by.length;
bA<bB;
bA++){if(bA%2){bz+=bx(by[bA]);
}else{bz+=bC(by[bA]);
}bE._data.push(by[bA]);
}return bz;
},_groupRowHtml:function(bE,bz,bM,bG,bP,bN){var bR=this,bJ="",bK,bL,bB=bE.field,bA=ad(aD(bR.columns),function(bS){return bS.field==bB;
})[0]||{},bO=bA.groupHeaderTemplate,bQ=(bA.title||bB)+": "+Z(bE.value,bA.format,bA.values,bA.encoded),bD=bR._groupAggregatesDefaultObject||{},by=P({},bD,bE.aggregates),bI=P({},{field:bE.field,value:bE.value,aggregates:by},bE.aggregates[bE.field]),bF=bP.groupFooterTemplate,bH=bE.items;
if(bO){bQ=typeof bO===ab?bO(bI):aB.template(bO)(bI);
}bJ+=bG(bz,bM,bQ);
if(bE.hasSubgroups){for(bK=0,bL=bH.length;
bK<bL;
bK++){bJ+=bR._groupRowHtml(bH[bK],bN?bz:bz-1,bM+1,bG,bP,bN);
}}else{bJ+=bR._rowsHtml(bH,bP);
}if(bF){var bC={};
for(var bx in by){bC[bx]=P({},by[bx],{group:{field:bE.field,value:bE.value}});
}bJ+=bF(bC);
}return bJ;
},collapseGroup:function(by){by=b(by);
var bC,bz=this.options.groupable,bF=bz.showFooter,bx=bF?0:1,bD,bE=b(),bA,bB,bH;
if(this._isLocked()){if(!by.closest("div").hasClass("k-grid-content-locked")){bE=by.nextAll("tr");
by=this.lockedTable.find(">tbody>tr:eq("+by.index()+")");
}else{bE=this.tbody.children("tr:eq("+by.index()+")").nextAll("tr");
}}bC=by.find(".k-group-cell").length;
by.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse");
by.find("td[aria-expanded='true']:first").attr("aria-expanded",false);
by=by.nextAll("tr");
var bG=[];
for(bA=0,bB=by.length;
bA<bB;
bA++){bH=by.eq(bA);
bD=bH.find(".k-group-cell").length;
if(bH.hasClass("k-grouping-row")){bx++;
}else{if(bH.hasClass("k-group-footer")){bx--;
}}if(bD<=bC||bH.hasClass("k-group-footer")&&bx<0){break;
}if(bE.length){bG.push(bE[bA]);
}bG.push(bH[0]);
}b(bG).hide();
},expandGroup:function(by){by=b(by);
var bG=this,bF=bG.options.groupable.showFooter,bC,bH,bD,bE=b(),bA,bB,bx=[],bz=1;
if(this._isLocked()){if(!by.closest("div").hasClass("k-grid-content-locked")){bE=by.nextAll("tr");
by=this.lockedTable.find(">tbody>tr:eq("+by.index()+")");
}else{bE=this.tbody.children("tr:eq("+by.index()+")").nextAll("tr");
}}bC=by.find(".k-group-cell").length;
by.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand");
by.find("td[aria-expanded='false']:first").attr("aria-expanded",true);
by=by.nextAll("tr");
for(bA=0,bB=by.length;
bA<bB;
bA++){bH=by.eq(bA);
bD=bH.find(".k-group-cell").length;
if(bD<=bC){break;
}if(bD==bC+1&&!bH.hasClass("k-detail-row")){bH.show();
bE.eq(bA).show();
if(bH.hasClass("k-grouping-row")&&bH.find(".k-icon").hasClass("k-i-collapse")){bG.expandGroup(bH);
}if(bH.hasClass("k-master-row")&&bH.find(".k-icon").hasClass("k-i-collapse")){bH.next().show();
bE.eq(bA+1).show();
}}if(bH.hasClass("k-grouping-row")){if(bF){bx.push(bH.is(":visible"));
}bz++;
}if(bH.hasClass("k-group-footer")){if(bF){bH.toggle(bx.pop());
}if(bz==1){bH.show();
bE.eq(bA).show();
}else{bz--;
}}}},_updateHeader:function(bz){var bC=this,bx=bC._isLocked()?bC.lockedHeader.find("thead"):bC.thead,by=bx.find("tr.k-filter-row").find("th.k-group-cell").length,bA=bx.find("tr:first").find("th.k-group-cell").length,bB=bx.children("tr:not(:first)").filter(function(){return !b(this).children(":visible").length;
});
if(bz>bA){b(new Array(bz-bA+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(bx.children("tr:not(.k-filter-row)"));
if(bC.element.is(":visible")){bB.find("th.k-group-cell").hide();
}}else{if(bz<bA){bx.find("tr").each(function(){b(this).find("th.k-group-cell").filter(":eq("+bz+"),:gt("+bz+")").remove();
});
}}if(bz>by){b(new Array(bz-by+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(bx.find(".k-filter-row"));
}},_firstDataItem:function(bx,by){if(bx&&by){if(bx.hasSubgroups){bx=this._firstDataItem(bx.items[0],by);
}else{bx=bx.items[0];
}}return bx;
},_updateTablesWidth:function(){var by=this,bx;
if(!by._isLocked()){return;
}bx=b(">.k-grid-footer>.k-grid-footer-wrap>table",by.wrapper).add(by.thead.parent()).add(by.table);
by._footerWidth=bh(bx.eq(0));
bx.width(by._footerWidth);
bx=b(">.k-grid-footer>.k-grid-footer-locked>table",by.wrapper).add(by.lockedHeader.find(">table")).add(by.lockedTable);
bx.width(bh(bx.eq(0)));
},hideColumn:function(bz){var bK=this,bx,bJ,bG,by,bC,bI,bM=0,bF,bH,bE=bK.footer||bK.wrapper.find(".k-grid-footer"),bB=bK.columns,bL=bK.lockedHeader?aE(bK.lockedHeader.find(">table>thead")).filter(aq).length:0,bA;
if(typeof bz=="number"){bz=bB[bz];
}else{if(ay(bz)){bz=ad(V(bB),function(bN){return bN===bz;
})[0];
}else{bz=ad(V(bB),function(bN){return bN.field===bz;
})[0];
}}if(!bz||!aA(bz)){return;
}if(bz.columns&&bz.columns.length){bI=y(bz,bB);
ba(bz,false);
a9(N(b(">table>thead",bK.lockedHeader),bK.thead,">tr:eq("+bI.row+")>th"),bI.cell,false);
for(bG=0;
bG<bz.columns.length;
bG++){this.hideColumn(bz.columns[bG]);
}bK.trigger(n,{column:bz});
return;
}bA=ao(bz,br(aD(bB)));
ba(bz,false);
bK._setParentsVisibility(bz,false);
bK._templates();
bK._updateCols();
bK._updateLockedCols();
var bD=bK.thead;
bF=bA;
if(bK.lockedHeader&&bL>bA){bD=bK.lockedHeader.find(">table>thead");
}else{bF-=bL;
}bx=aE(bD).filter(aq).eq(bF);
bx[0].style.display="none";
a9(N(b(">table>thead",bK.lockedHeader),bK.thead,">tr.k-filter-row>th"),bA,false);
if(bE[0]){bK._updateCols(bE.find(">.k-grid-footer-wrap>table"));
bK._updateLockedCols(bE.find(">.k-grid-footer-locked>table"));
a9(bE.find(".k-footer-template>td"),bA,false);
}if(bK.lockedTable&&bL>bA){an(bK.lockedTable.find(">tbody>tr"),bA);
}else{an(bK.tbody.children(),bA-bL);
}if(bK.lockedTable){bK._updateTablesWidth();
bK._applyLockedContainersWidth();
bK._syncLockedContentHeight();
bK._syncLockedHeaderHeight();
bK._syncLockedFooterHeight();
}else{by=bK.thead.prev().find("col");
for(bG=0,bH=by.length;
bG<bH;
bG+=1){bC=by[bG].style.width;
if(bC&&bC.indexOf("%")==-1){bM+=parseInt(bC,10);
}else{bM=0;
break;
}}bJ=b(">.k-grid-header table:first,>.k-grid-footer table:first",bK.wrapper).add(bK.table);
bK._footerWidth=null;
if(bM){bJ.each(function(){this.style.width=bM+"px";
});
bK._footerWidth=bM;
}if(i.msie&&i.version==8){bJ.css("display","inline-table");
setTimeout(function(){bJ.css("display","table");
},1);
}}bK._updateFirstColumnClass();
bK.trigger(n,{column:bz});
},_setParentsVisibility:function(bz,bG){var bA=this.columns;
var bB;
var bD=[];
var bC;
var bE;
var bx;
var by;
var bF=bG?function(bH){return br(bH.columns).length&&bH.hidden;
}:function(bH){return !br(bH.columns).length&&!bH.hidden;
};
if(r(bz,bA,bD)&&bD.length){for(bB=bD.length-1;
bB>=0;
bB--){bC=bD[bB];
bE=s(bC,bA);
bx=N(b(">table>thead",this.lockedHeader),this.thead,">tr:eq("+bE.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(bE.cell);
if(bF(bC)){ba(bC,bG);
bx[0].style.display=bG?"":"none";
}if(bx.filter("["+aB.attr("colspan")+"]").length){by=parseInt(bx.attr(aB.attr("colspan")),10);
bx[0].colSpan=by-am(bC.columns)||1;
}}}},showColumn:function(bz){var bL=this,bG,bH,bx,bK,bM,bF,bJ,bC,by,bB=bL.columns,bE=bL.footer||bL.wrapper.find(".k-grid-footer"),bI=bL.lockedHeader?aE(bL.lockedHeader.find(">table>thead")).length:0,bA;
if(typeof bz=="number"){bz=bB[bz];
}else{if(ay(bz)){bz=ad(V(bB),function(bN){return bN===bz;
})[0];
}else{bz=ad(V(bB),function(bN){return bN.field===bz;
})[0];
}}if(!bz||aA(bz)){return;
}if(bz.columns&&bz.columns.length){bJ=s(bz,bB);
ba(bz,true);
a9(N(b(">table>thead",bL.lockedHeader),bL.thead,">tr:eq("+bJ.row+")>th"),bJ.cell,true);
for(bG=0;
bG<bz.columns.length;
bG++){this.showColumn(bz.columns[bG]);
}bL.trigger(v,{column:bz});
return;
}bA=ao(bz,aD(bB));
ba(bz,true);
bL._setParentsVisibility(bz,true);
bL._templates();
bL._updateCols();
bL._updateLockedCols();
var bD=bL.thead;
bF=bA;
if(bL.lockedHeader&&bI>bA){bD=bL.lockedHeader.find(">table>thead");
}else{bF-=bI;
}bx=aE(bD).eq(bF);
bx[0].style.display="";
a9(N(b(">table>thead",bL.lockedHeader),bL.thead,">tr.k-filter-row>th"),bA,true);
if(bE[0]){bL._updateCols(bE.find(">.k-grid-footer-wrap>table"));
bL._updateLockedCols(bE.find(">.k-grid-footer-locked>table"));
a9(bE.find(".k-footer-template>td"),bA,true);
}if(bL.lockedTable&&bI>bA){bb(bL.lockedTable.find(">tbody>tr"),bA);
}else{bb(bL.tbody.children(),bA-bI);
}if(bL.lockedTable){bL._updateTablesWidth();
bL._applyLockedContainersWidth();
bL._syncLockedContentHeight();
bL._syncLockedHeaderHeight();
}else{bK=b(">.k-grid-header table:first,>.k-grid-footer table:first",bL.wrapper).add(bL.table);
if(!bz.width){bK.width("");
}else{bM=0;
by=bL.thead.prev().find("col");
for(bG=0,bH=by.length;
bG<bH;
bG+=1){bC=by[bG].style.width;
if(bC.indexOf("%")>-1){bM=0;
break;
}bM+=parseInt(bC,10);
}bL._footerWidth=null;
if(bM){bK.each(function(){this.style.width=bM+"px";
});
bL._footerWidth=bM;
}}}bL._updateFirstColumnClass();
bL.trigger(v,{column:bz});
},_progress:function(by){var bx=this.element;
if(this.lockedContent){bx=this.wrapper;
}else{if(this.element.is("table")){bx=this.element.parent();
}else{if(this.content&&this.content.length){bx=this.content;
}}}aB.ui.progress(bx,by);
},_resize:function(by,bx){this._syncLockedHeaderHeight();
if(this.content){this._setContentWidth();
this._setContentHeight();
}if(this.virtualScrollable&&(bx||this._rowHeight)){if(bx){this._rowHeight=null;
}this.virtualScrollable.repaintScrollbar();
}},_isActiveInTable:function(){var bx=c();
if(!bx){return false;
}return this.table[0]===bx||b.contains(this.table[0],bx)||this._isLocked()&&(this.lockedTable[0]===bx||b.contains(this.lockedTable[0],bx));
},refresh:function(bB){var bF=this,bA=bF.dataSource.view(),bE=bF.options.navigatable,bz,by=b(bF.current()),bD=false,bC=(bF.dataSource.group()||[]).length,bx=bC+bs(br(bF.columns)).length;
if(bB&&bB.action==="itemchange"&&bF.editable){return;
}if(bB&&bB.action==="remove"&&bF.editable&&bF.editable.options.model&&ao(bF.editable.options.model,bB.items)>-1){bF.editable.options.model.unbind(k,bF._modelChangeHandler);
}bB=bB||{};
if(bF.trigger("dataBinding",{action:bB.action||"rebind",index:bB.index,items:bB.items})){return;
}bF._angularItems("cleanup");
if(bE&&(bF._isActiveInTable()||bF._editContainer&&bF._editContainer.data("kendoWindow"))){bD=by.is("th");
bz=Math.max(bF.cellIndex(by),0);
}bF._destroyEditable();
bF._progress(false);
bF._hideResizeHandle();
bF._data=[];
if(!bF.columns.length){bF._autoColumns(bF._firstDataItem(bA[0],bC));
bx=bC+bF.columns.length;
}bF._group=bC>0||bF._group;
if(bF._group){bF._templates();
bF._updateCols();
bF._updateLockedCols();
bF._updateHeader(bC);
bF._group=bC>0;
}bF._renderContent(bA,bx,bC);
bF._renderLockedContent(bA,bx,bC);
bF._footer();
bF._renderNoRecordsContent();
bF._setContentHeight();
bF._setContentWidth(bF.content&&bF.content.scrollLeft());
if(bF.lockedTable){if(bF.options.scrollable.virtual){bF.content.find(">.k-virtual-scrollable-wrap").trigger("scroll");
}else{if(bF.touchScroller){bF.touchScroller.movable.trigger("change");
}else{bF.wrapper.one("scroll",function(bG){bG.stopPropagation();
});
bF.content.trigger("scroll");
}}}bF._restoreCurrent(bz,bD);
if(bF.touchScroller){bF.touchScroller.contentResized();
}if(bF.selectable){bF.selectable.resetTouchEvents();
}bF._muteAngularRebind(function(){bF._angularItems("compile");
});
bF.trigger(E);
},_restoreCurrent:function(bx,by){if(bx===bm||bx<0){return;
}this._removeCurrent();
if(by){this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(bx));
}else{var bA=0;
if(this._rowVirtualIndex){bA=this.virtualScrollable.position(this._rowVirtualIndex);
}else{bx=0;
}var bz=b();
if(this.lockedTable){bz=this.lockedTable.find(">tbody>tr").eq(bA);
}bz=bz.add(this.tbody.children().eq(bA));
var bB=bz.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(bx);
this._setCurrent(bB);
}if(this._current){Y(this._current.closest("table")[0],true);
}},_angularItems:function(bx){aB.ui.DataBoundWidget.fn._angularItems.call(this,bx);
if(bx==="cleanup"){this._cleanupDetailItems();
}this._angularGroupItems(bx);
this._angularGroupFooterItems(bx);
},_cleanupDetailItems:function(){var bx=this;
if(bx._hasDetails()){bx.angular("cleanup",function(){return{elements:bx.tbody.children(".k-detail-row")};
});
bx.tbody.find(".k-detail-cell").empty();
}},_angularGroupItems:function(bx){var bz=this,by=bz.tbody;
if(bz.lockedContent){by=bz.lockedTable.find("tbody");
}if(bz._group){bz.angular(bx,function(){return{elements:by.children(".k-grouping-row"),data:b.map(aj(bz.dataSource.view()),function(bA){return{dataItem:bA};
})};
});
}},_angularGroupFooterItems:function(bx){var bz=this,by=bz.tbody;
if(bz.lockedContent){by=bz.element;
}if(bz._group&&bz.groupFooterTemplate){bz.angular(bx,function(){return{elements:by.find(".k-group-footer"),data:b.map(ag(bz.dataSource.view()),function(bA){return{dataItem:bA};
})};
});
}},_renderContent:function(by,bx,bz){var bF=this,bB,bD,bA="",bC=bF.lockedContent!=null,bE={rowTemplate:bF.rowTemplate,altRowTemplate:bF.altRowTemplate,groupFooterTemplate:bF.groupFooterTemplate};
bx=bC?bx-bs(bt(bF.columns)).length:bx;
if(bz>0){bx=bC?bx-bz:bx;
if(bF.detailTemplate){bx++;
}if(bF.groupFooterTemplate){bF._groupAggregatesDefaultObject=bF.dataSource.aggregates();
}for(bB=0,bD=by.length;
bB<bD;
bB++){bA+=bF._groupRowHtml(by[bB],bx,0,bC?ai:ah,bE,bC);
}}else{bA+=bF._rowsHtml(by,bE);
}bF.tbody=g(bF.tbody,bF.table,bA,this.options.$angular);
},_renderLockedContent:function(by,bx,bz){var bA="",bB,bC,bE={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};
if(this.lockedContent){var bD=this.lockedTable;
if(bz>0){bx=bx-br(aD(aP(this.columns))).length;
for(bB=0,bC=by.length;
bB<bC;
bB++){bA+=this._groupRowHtml(by[bB],bx,0,ah,bE);
}}else{bA=this._rowsHtml(by,bE);
}g(bD.children("tbody"),bD,bA,this.options.$angular);
this._syncLockedContentHeight();
}},_adjustRowsHeight:function(bH,bI){var bF=bH[0].rows,bC=bF.length,bB,bG=bI[0].rows,bx=bH.add(bI),by=bx.length,bA=[];
for(bB=0;
bB<bC;
bB++){if(!bG[bB]){break;
}if(bF[bB].style.height){bF[bB].style.height=bG[bB].style.height="";
}}for(bB=0;
bB<bC;
bB++){if(!bG[bB]){break;
}var bD=bF[bB].offsetHeight;
var bE=bG[bB].offsetHeight;
var bz=0;
if(bD>bE){bz=bD;
}else{if(bD<bE){bz=bE;
}}bA.push(bz);
}for(bB=0;
bB<by;
bB++){bx[bB].style.display="none";
}for(bB=0;
bB<bC;
bB++){if(bA[bB]){bF[bB].style.height=bG[bB].style.height=bA[bB]+1+"px";
}}for(bB=0;
bB<by;
bB++){bx[bB].style.display="";
}}});
if(aB.ExcelMixin){aB.ExcelMixin.extend(ae.prototype);
}if(aB.PDFMixin){aB.PDFMixin.extend(ae.prototype);
ae.prototype._drawPDF_autoPageBreak=function(bF){var bD=this;
var bI=new b.Deferred();
var bB=bD.dataSource;
var bx=bD.options.pdf.allPages;
var bE=bD.wrapper.find(".k-grid-content tbody");
var bA=b("<div>").css({position:"absolute",left:-10000,top:-10000});
var bz=bD.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(bA);
bz.find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"});
bz.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove();
bz.find(".k-grid-header").css({paddingRight:0});
this._initPDFProgress(bF);
var by=bz.find(".k-grid-content tbody").empty();
var bJ=bB.page();
function bH(){if(bx&&bJ!==bm){bB.one("change",bC);
bB.page(bJ);
}else{bD.refresh();
bC();
}}function bC(){bA.appendTo(document.body);
var bK=b.extend({},bD.options.pdf,{_destructive:true,progress:function(bL){bF.notify({page:bL.page,pageNumber:bL.pageNum,progress:0.5+bL.pageNum/bL.totalPages/2,totalPages:bL.totalPages});
}});
aB.drawing.drawDOM(bz,bK).always(function(){bA.remove();
}).then(function(bL){bI.resolve(bL);
}).fail(function(bL){bI.reject(bL);
});
}function bG(){var bK=bB.page();
var bL=bx?bB.totalPages():1;
by.append(bE.find("tr"));
if(bK<bL){bB.page(bK+1);
}else{bB.unbind("change",bG);
bH();
}}if(bx){bB.bind("change",bG);
bB.page(1);
}else{bG();
}return bI.promise();
};
ae.prototype._drawPDF=function(bC){var bB=this;
if(bB.options.pdf.paperSize&&bB.options.pdf.paperSize!="auto"){return bB._drawPDF_autoPageBreak(bC);
}var bE=new b.Deferred();
var by=bB.dataSource;
var bx=bB.options.pdf.allPages;
this._initPDFProgress(bC);
var bz=new aB.drawing.Group();
var bF=by.page();
function bD(){if(bx&&bF!==bm){by.unbind("change",bA);
by.one("change",function(){bE.resolve(bz);
});
by.page(bF);
}else{bE.resolve(bz);
}}function bA(){bB._drawPDFShadow({width:bB.wrapper.width()},{avoidLinks:bB.options.pdf.avoidLinks}).done(function(bH){var bI=by.page();
var bJ=bx?by.totalPages():1;
var bG={page:bH,pageNumber:bI,progress:bI/bJ,totalPages:bJ};
bC.notify(bG);
bz.append(bG.page);
if(bI<bJ){by.page(bI+1);
}else{bD();
}}).fail(function(bG){bE.reject(bG);
});
}if(bx){by.bind("change",bA);
by.page(1);
}else{bA();
}return bE.promise();
};
ae.prototype._initPDFProgress=function(bx){var by=b("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");
by.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0}));
this.wrapper.append(by);
var bz=b("<div class='k-loading-pdf-progress'>").appendTo(by).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");
bx.progress(function(bA){bz.value(bA.progress);
}).always(function(){aB.destroy(by);
by.remove();
});
};
}function be(bA,bB){bA=bA[0];
bB=bB[0];
if(bA.rows.length!==bB.rows.length){var by=bA.offsetHeight;
var bC=bB.offsetHeight;
var bz;
var bx;
if(by>bC){bz=bB.rows[bB.rows.length-1];
if(R.test(bz.className)){bz=bB.rows[bB.rows.length-2];
}bx=by-bC;
}else{bz=bA.rows[bA.rows.length-1];
if(R.test(bz.className)){bz=bA.rows[bA.rows.length-2];
}bx=bC-by;
}bz.style.height=bz.offsetHeight+bx+"px";
}}function f(bA,bB){var bx;
var by=bA.offsetHeight;
var bz=bB.offsetHeight;
if(by>bz){bx=by+"px";
}else{if(by<bz){bx=bz+"px";
}}if(bx){bA.style.height=bB.style.height=bx;
}}function ac(by,bB){var bz,bA,bx;
if(typeof by===bc&&by===bB){return by;
}if(ay(by)&&by.name===bB){return by;
}if(ap(by)){for(bz=0,bA=by.length;
bz<bA;
bz++){bx=by[bz];
if(typeof bx===bc&&bx===bB||bx.name===bB){return bx;
}}}return null;
}function Y(bC,bx){var bz=i.msie||i.edge;
if(bx===true){bC=b(bC);
var bB,bA;
bB=bC.parent().scrollTop();
bA=bC.parent().scrollLeft();
if(bz){try{bC[0].setActive();
}catch(by){bC[0].focus();
}}else{bC[0].focus();
}bC.parent().scrollTop(bB).scrollLeft(bA);
}else{b(bC).one("focusin",function(bD){bD.preventDefault();
}).focus();
}}function ax(bx){return b(bx).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon");
}function bg(bz){var by=b(bz.currentTarget),bB=by.is("th"),bD=this.table.add(this.lockedTable),bA=this.thead.parent().add(b(">table",this.lockedHeader)),bC=ax(bz.target),bx=by.closest("table")[0];
if(aB.support.touch){return;
}if(bC&&by.find(aB.roleSelector("filtercell")).length){this._setCurrent(by);
return;
}if(bx!==bD[0]&&bx!==bD[1]&&bx!==bA[0]&&bx!==bA[1]){return;
}if(b(bz.target).is("a.k-i-collapse, a.k-i-expand")){return;
}if(this.options.navigatable){this._setCurrent(by);
}if(bB||!bC){setTimeout(function(){if(!(av&&b(aB._activeElement()).hasClass("k-widget"))){if(!ax(aB._activeElement())){Y(bx,true);
}}});
}if(bB){bz.preventDefault();
}}function aw(bx){return bx&&(bx.hasClass("k-edit-cell")||bx.parent().hasClass("k-grid-edit-row"));
}function ah(bx,by,bz){return'<tr role="row" class="k-grouping-row">'+af(by)+'<td colspan="'+bx+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+bz+"</p></td></tr>";
}function ai(bx){return'<tr role="row" class="k-grouping-row"><td colspan="'+bx+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>';
}bl.plugin(ae);
bl.plugin(bq);
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
