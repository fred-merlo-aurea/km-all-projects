(function(b,a){a("kendo.data",["kendo.core","kendo.data.odata","kendo.data.xml"],b);
}(function(){var a={id:"data",name:"Data source",category:"framework",description:"Powerful component for using local and remote data.Fully supports CRUD, Sorting, Paging, Filtering, Grouping, and Aggregates.",depends:["core"],features:[{id:"data-odata",name:"OData",description:"Support for accessing Open Data Protocol (OData) services.",depends:["data.odata"]},{id:"data-signalr",name:"SignalR",description:"Support for binding to SignalR hubs.",depends:["data.signalr"]},{id:"data-XML",name:"XML",description:"Support for binding to XML.",depends:["data.xml"]}]};
(function(b,a0){var D=b.extend,aC=b.proxy,ab=b.isPlainObject,Y=b.isEmptyObject,W=b.isArray,M=b.grep,c=b.ajax,ag,y=b.each,am=b.noop,ad=window.kendo,Z=ad.isFunction,au=ad.Observable,i=ad.Class,aU="string",H="function",q="create",aG="read",a2="update",x="destroy",h="change",aW="sync",J="get",B="error",aN="requestStart",aB="progress",aM="requestEnd",r=[q,aG,a2,x],P=function(a5){return a5;
},L=ad.getter,aV=ad.stringify,ah=Math,aD=[].push,ac=[].join,aA=[].pop,aR=[].splice,aP=[].shift,aQ=[].slice,a1=[].unshift,aY={}.toString,aT=ad.support.stableSort,v=/^\/Date\((.*?)\)\/$/,ak=/(\r+|\n+)/g,aF=/(?=['\\])/g;
var av=au.extend({init:function(a5,a7){var a6=this;
a6.type=a7||aw;
au.fn.init.call(a6);
a6.length=a5.length;
a6.wrapAll(a5,a6);
},at:function(a5){return this[a5];
},toJSON:function(){var a5,a7=this.length,a8,a6=new Array(a7);
for(a5=0;
a5<a7;
a5++){a8=this[a5];
if(a8 instanceof aw){a8=a8.toJSON();
}a6[a5]=a8;
}return a6;
},parent:am,wrapAll:function(a8,a9){var ba=this,a5,a6,a7=function(){return ba;
};
a9=a9||[];
for(a5=0,a6=a8.length;
a5<a6;
a5++){a9[a5]=ba.wrap(a8[a5],a7);
}return a9;
},wrap:function(a5,a7){var a8=this,a6;
if(a5!==null&&aY.call(a5)==="[object Object]"){a6=a5 instanceof a8.type||a5 instanceof aj;
if(!a6){a5=a5 instanceof aw?a5.toJSON():a5;
a5=new a8.type(a5);
}a5.parent=a7;
a5.bind(h,function(a9){a8.trigger(h,{field:a9.field,node:a9.node,index:a9.index,items:a9.items||[this],action:a9.node?a9.action||"itemloaded":"itemchange"});
});
}return a5;
},push:function(){var a5=this.length,a6=this.wrapAll(arguments),a7;
a7=aD.apply(this,a6);
this.trigger(h,{action:"add",index:a5,items:a6});
return a7;
},slice:aQ,sort:[].sort,join:ac,pop:function(){var a5=this.length,a6=aA.apply(this);
if(a5){this.trigger(h,{action:"remove",index:a5-1,items:[a6]});
}return a6;
},splice:function(a7,a5,a8){var a9=this.wrapAll(aQ.call(arguments,2)),bb,a6,ba;
bb=aR.apply(this,[a7,a5].concat(a9));
if(bb.length){this.trigger(h,{action:"remove",index:a7,items:bb});
for(a6=0,ba=bb.length;
a6<ba;
a6++){if(bb[a6]&&bb[a6].children){bb[a6].unbind(h);
}}}if(a8){this.trigger(h,{action:"add",index:a7,items:a9});
}return bb;
},shift:function(){var a5=this.length,a6=aP.apply(this);
if(a5){this.trigger(h,{action:"remove",index:0,items:[a6]});
}return a6;
},unshift:function(){var a5=this.wrapAll(arguments),a6;
a6=a1.apply(this,a5);
this.trigger(h,{action:"add",index:0,items:a5});
return a6;
},indexOf:function(a6){var a8=this,a5,a7;
for(a5=0,a7=a8.length;
a5<a7;
a5++){if(a8[a5]===a6){return a5;
}}return -1;
},forEach:function(a5){var a6=0,a7=this.length;
for(;
a6<a7;
a6++){a5(this[a6],a6,this);
}},map:function(a5){var a6=0,a8=[],a7=this.length;
for(;
a6<a7;
a6++){a8[a6]=a5(this[a6],a6,this);
}return a8;
},reduce:function(a5){var a6=0,a8,a7=this.length;
if(arguments.length==2){a8=arguments[1];
}else{if(a6<a7){a8=this[a6++];
}}for(;
a6<a7;
a6++){a8=a5(a8,this[a6],a6,this);
}return a8;
},reduceRight:function(a5){var a6=this.length-1,a7;
if(arguments.length==2){a7=arguments[1];
}else{if(a6>0){a7=this[a6--];
}}for(;
a6>=0;
a6--){a7=a5(a7,this[a6],a6,this);
}return a7;
},filter:function(a5){var a6=0,a9=[],a7,a8=this.length;
for(;
a6<a8;
a6++){a7=this[a6];
if(a5(a7,a6,this)){a9[a9.length]=a7;
}}return a9;
},find:function(a5){var a6=0,a7,a8=this.length;
for(;
a6<a8;
a6++){a7=this[a6];
if(a5(a7,a6,this)){return a7;
}}},every:function(a5){var a6=0,a7,a8=this.length;
for(;
a6<a8;
a6++){a7=this[a6];
if(!a5(a7,a6,this)){return false;
}}return true;
},some:function(a5){var a6=0,a7,a8=this.length;
for(;
a6<a8;
a6++){a7=this[a6];
if(a5(a7,a6,this)){return true;
}}return false;
},remove:function(a6){var a5=this.indexOf(a6);
if(a5!==-1){this.splice(a5,1);
}},empty:function(){this.splice(0,this.length);
}});
if(typeof Symbol!=="undefined"&&Symbol.iterator&&!av.prototype[Symbol.iterator]){av.prototype[Symbol.iterator]=[][Symbol.iterator];
}var ae=av.extend({init:function(a5,a7){au.fn.init.call(this);
this.type=a7||aw;
for(var a6=0;
a6<a5.length;
a6++){this[a6]=a5[a6];
}this.length=a6;
this._parent=aC(function(){return this;
},this);
},at:function(a5){var a6=this[a5];
if(!(a6 instanceof this.type)){a6=this[a5]=this.wrap(a6,this._parent);
}else{a6.parent=this._parent;
}return a6;
}});
function C(a5,a8,a6,a7){return function(a9){var ba={},bb;
for(bb in a9){ba[bb]=a9[bb];
}if(a7){ba.field=a6+"."+a9.field;
}else{ba.field=a6;
}if(a8==h&&a5._notifyChange){a5._notifyChange(ba);
}a5.trigger(a8,ba);
};
}var aw=au.extend({init:function(a9){var a8=this,a6,a5,a7=function(){return a8;
};
au.fn.init.call(this);
this._handlers={};
for(a5 in a9){a6=a9[a5];
if(typeof a6==="object"&&a6&&!a6.getTime&&a5.charAt(0)!="_"){a6=a8.wrap(a6,a5,a7);
}a8[a5]=a6;
}a8.uid=ad.guid();
},shouldSerialize:function(a5){return this.hasOwnProperty(a5)&&a5!=="_handlers"&&a5!=="_events"&&typeof this[a5]!==H&&a5!=="uid";
},forEach:function(a5){for(var a6 in this){if(this.shouldSerialize(a6)){a5(this[a6],a6);
}}},toJSON:function(){var a6={},a7,a5;
for(a5 in this){if(this.shouldSerialize(a5)){a7=this[a5];
if(a7 instanceof aw||a7 instanceof av){a7=a7.toJSON();
}a6[a5]=a7;
}}return a6;
},get:function(a5){var a7=this,a6;
a7.trigger(J,{field:a5});
if(a5==="this"){a6=a7;
}else{a6=ad.getter(a5,true)(a7);
}return a6;
},_set:function(a6,bb){var ba=this;
var a5=a6.indexOf(".")>=0;
if(a5){var a9=a6.split("."),a8="";
while(a9.length>1){a8+=a9.shift();
var a7=ad.getter(a8,true)(ba);
if(a7 instanceof aw){a7.set(a9.join("."),bb);
return a5;
}a8+=".";
}}ad.setter(a6)(ba,bb);
return a5;
},set:function(a7,ba){var a9=this,a8=false,a5=a7.indexOf(".")>=0,a6=ad.getter(a7,true)(a9);
if(a6!==ba){if(a6 instanceof au&&this._handlers[a7]){if(this._handlers[a7].get){a6.unbind(J,this._handlers[a7].get);
}a6.unbind(h,this._handlers[a7].change);
}a8=a9.trigger("set",{field:a7,value:ba});
if(!a8){if(!a5){ba=a9.wrap(ba,a7,function(){return a9;
});
}if(!a9._set(a7,ba)||a7.indexOf("(")>=0||a7.indexOf("[")>=0){a9.trigger(h,{field:a7});
}}}return a8;
},parent:am,wrap:function(ba,a6,bb){var bc=this;
var a7;
var a5;
var bd=aY.call(ba);
if(ba!=null&&(bd==="[object Object]"||bd==="[object Array]")){var a9=ba instanceof av;
var a8=ba instanceof u;
if(bd==="[object Object]"&&!a8&&!a9){if(!(ba instanceof aw)){ba=new aw(ba);
}a7=C(bc,J,a6,true);
ba.bind(J,a7);
a5=C(bc,h,a6,true);
ba.bind(h,a5);
bc._handlers[a6]={get:a7,change:a5};
}else{if(bd==="[object Array]"||a9||a8){if(!a9&&!a8){ba=new av(ba);
}a5=C(bc,h,a6,false);
ba.bind(h,a5);
bc._handlers[a6]={change:a5};
}}ba.parent=bb;
}return ba;
}});
function A(a6,a8){if(a6===a8){return true;
}var a7=b.type(a6),a9=b.type(a8),a5;
if(a7!==a9){return false;
}if(a7==="date"){return a6.getTime()===a8.getTime();
}if(a7!=="object"&&a7!=="array"){return false;
}for(a5 in a6){if(!A(a6[a5],a8[a5])){return false;
}}return true;
}var az={number:function(a5){return ad.parseFloat(a5);
},date:function(a5){return ad.parseDate(a5);
},"boolean":function(a5){if(typeof a5===aU){return a5.toLowerCase()==="true";
}return a5!=null?!!a5:a5;
},string:function(a5){return a5!=null?a5+"":a5;
},"default":function(a5){return a5;
}};
var w={string:"",number:0,date:new Date(),"boolean":false,"default":""};
function K(a8,a7){var a5,a6;
for(a6 in a8){a5=a8[a6];
if(ab(a5)&&a5.field&&a5.field===a7){return a5;
}else{if(a5===a7){return a5;
}}}return null;
}var aj=aw.extend({init:function(a5){var a8=this;
if(!a5||b.isEmptyObject(a5)){a5=b.extend({},a8.defaults,a5);
if(a8._initializers){for(var a6=0;
a6<a8._initializers.length;
a6++){var a7=a8._initializers[a6];
a5[a7]=a8.defaults[a7]();
}}}aw.fn.init.call(a8,a5);
a8.dirty=false;
if(a8.idField){a8.id=a8.get(a8.idField);
if(a8.id===a0){a8.id=a8._defaultId;
}}},shouldSerialize:function(a5){return aw.fn.shouldSerialize.call(this,a5)&&a5!=="uid"&&!(this.idField!=="id"&&a5==="id")&&a5!=="dirty"&&a5!=="_accessors";
},_parse:function(a5,ba){var a9=this,a6=a5,a7=a9.fields||{},a8;
a5=a7[a5];
if(!a5){a5=K(a7,a6);
}if(a5){a8=a5.parse;
if(!a8&&a5.type){a8=az[a5.type.toLowerCase()];
}}return a8?a8(ba):ba;
},_notifyChange:function(a6){var a5=a6.action;
if(a5=="add"||a5=="remove"){this.dirty=true;
}},editable:function(a5){a5=(this.fields||{})[a5];
return a5?a5.editable!==false:true;
},set:function(a6,a9,a7){var a8=this;
var a5=a8.dirty;
if(a8.editable(a6)){a9=a8._parse(a6,a9);
if(!A(a9,a8.get(a6))){a8.dirty=true;
if(aw.fn.set.call(a8,a6,a9,a7)&&!a5){a8.dirty=a5;
}}}},accept:function(a5){var a8=this,a7=function(){return a8;
},a6;
for(a6 in a5){var a9=a5[a6];
if(a6.charAt(0)!="_"){a9=a8.wrap(a5[a6],a6,a7);
}a8._set(a6,a9);
}if(a8.idField){a8.id=a8.get(a8.idField);
}a8.dirty=false;
},isNew:function(){return this.id===this._defaultId;
}});
aj.define=function(a5,be){if(be===a0){be=a5;
a5=aj;
}var bc,bg=D({defaults:{}},be),bd,a6,bh,bi,ba,bb,a7={},bf,a9=bg.id,a8=[];
if(a9){bg.idField=a9;
}if(bg.id){delete bg.id;
}if(a9){bg.defaults[a9]=bg._defaultId="";
}if(aY.call(bg.fields)==="[object Array]"){for(ba=0,bb=bg.fields.length;
ba<bb;
ba++){a6=bg.fields[ba];
if(typeof a6===aU){a7[a6]={};
}else{if(a6.field){a7[a6.field]=a6;
}}}bg.fields=a7;
}for(bd in bg.fields){a6=bg.fields[bd];
bh=a6.type||"default";
bi=null;
bf=bd;
bd=typeof a6.field===aU?a6.field:bd;
if(!a6.nullable){bi=bg.defaults[bf!==bd?bf:bd]=a6.defaultValue!==a0?a6.defaultValue:w[bh.toLowerCase()];
if(typeof bi==="function"){a8.push(bd);
}}if(be.id===bd){bg._defaultId=bi;
}bg.defaults[bf!==bd?bf:bd]=bi;
a6.parse=a6.parse||az[bh];
}if(a8.length>0){bg._initializers=a8;
}bc=a5.extend(bg);
bc.define=function(bj){return aj.define(bc,bj);
};
if(bg.fields){bc.fields=bg.fields;
bc.idField=bg.idField;
}return bc;
};
var l={selector:function(a5){return Z(a5)?a5:L(a5);
},compare:function(a5){var a6=this.selector(a5);
return function(a7,a8){a7=a6(a7);
a8=a6(a8);
if(a7==null&&a8==null){return 0;
}if(a7==null){return -1;
}if(a8==null){return 1;
}if(a7.localeCompare){return a7.localeCompare(a8);
}return a7>a8?1:a7<a8?-1:0;
};
},create:function(a6){var a5=a6.compare||this.compare(a6.field);
if(a6.dir=="desc"){return function(a7,a8){return a5(a8,a7,true);
};
}return a5;
},combine:function(a5){return function(a6,a7){var ba=a5[0](a6,a7),a8,a9;
for(a8=1,a9=a5.length;
a8<a9;
a8++){ba=ba||a5[a8](a6,a7);
}return ba;
};
}};
var aS=D({},l,{asc:function(a5){var a6=this.selector(a5);
return function(a7,a8){var a9=a6(a7);
var ba=a6(a8);
if(a9&&a9.getTime&&ba&&ba.getTime){a9=a9.getTime();
ba=ba.getTime();
}if(a9===ba){return a7.__position-a8.__position;
}if(a9==null){return -1;
}if(ba==null){return 1;
}if(a9.localeCompare){return a9.localeCompare(ba);
}return a9>ba?1:-1;
};
},desc:function(a5){var a6=this.selector(a5);
return function(a7,a8){var a9=a6(a7);
var ba=a6(a8);
if(a9&&a9.getTime&&ba&&ba.getTime){a9=a9.getTime();
ba=ba.getTime();
}if(a9===ba){return a7.__position-a8.__position;
}if(a9==null){return 1;
}if(ba==null){return -1;
}if(ba.localeCompare){return ba.localeCompare(a9);
}return a9<ba?1:-1;
};
},create:function(a5){return this[a5.dir](a5.field);
}});
ag=function(a5,a6){var a7,a8=a5.length,a9=new Array(a8);
for(a7=0;
a7<a8;
a7++){a9[a7]=a6(a5[a7],a7,a5);
}return a9;
};
var ay=function(){function a6(a7){return a7.replace(aF,"\\").replace(ak,"");
}function a5(bb,a7,a8,ba){var a9;
if(a8!=null){if(typeof a8===aU){a8=a6(a8);
a9=v.exec(a8);
if(a9){a8=new Date(+a9[1]);
}else{if(ba){a8="'"+a8.toLowerCase()+"'";
a7="(("+a7+" || '')+'').toLowerCase()";
}else{a8="'"+a8+"'";
}}}if(a8.getTime){a7="("+a7+"&&"+a7+".getTime?"+a7+".getTime():"+a7+")";
a8=a8.getTime();
}}return a7+" "+bb+" "+a8;
}return{quote:function(a7){if(a7&&a7.getTime){return"new Date("+a7.getTime()+")";
}if(typeof a7=="string"){return"'"+a6(a7)+"'";
}return""+a7;
},eq:function(a7,a8,a9){return a5("==",a7,a8,a9);
},neq:function(a7,a8,a9){return a5("!=",a7,a8,a9);
},gt:function(a7,a8,a9){return a5(">",a7,a8,a9);
},gte:function(a7,a8,a9){return a5(">=",a7,a8,a9);
},lt:function(a7,a8,a9){return a5("<",a7,a8,a9);
},lte:function(a7,a8,a9){return a5("<=",a7,a8,a9);
},startswith:function(a7,a8,a9){if(a9){a7="("+a7+" || '').toLowerCase()";
if(a8){a8=a8.toLowerCase();
}}if(a8){a8=a6(a8);
}return a7+".lastIndexOf('"+a8+"', 0) == 0";
},doesnotstartwith:function(a7,a8,a9){if(a9){a7="("+a7+" || '').toLowerCase()";
if(a8){a8=a8.toLowerCase();
}}if(a8){a8=a6(a8);
}return a7+".lastIndexOf('"+a8+"', 0) == -1";
},endswith:function(a7,a8,a9){if(a9){a7="("+a7+" || '').toLowerCase()";
if(a8){a8=a8.toLowerCase();
}}if(a8){a8=a6(a8);
}return a7+".indexOf('"+a8+"', "+a7+".length - "+(a8||"").length+") >= 0";
},doesnotendwith:function(a7,a8,a9){if(a9){a7="("+a7+" || '').toLowerCase()";
if(a8){a8=a8.toLowerCase();
}}if(a8){a8=a6(a8);
}return a7+".indexOf('"+a8+"', "+a7+".length - "+(a8||"").length+") < 0";
},contains:function(a7,a8,a9){if(a9){a7="("+a7+" || '').toLowerCase()";
if(a8){a8=a8.toLowerCase();
}}if(a8){a8=a6(a8);
}return a7+".indexOf('"+a8+"') >= 0";
},doesnotcontain:function(a7,a8,a9){if(a9){a7="("+a7+" || '').toLowerCase()";
if(a8){a8=a8.toLowerCase();
}}if(a8){a8=a6(a8);
}return a7+".indexOf('"+a8+"') == -1";
},isempty:function(a7){return a7+" === ''";
},isnotempty:function(a7){return a7+" !== ''";
},isnull:function(a7){return"("+a7+" === null || "+a7+" === undefined)";
},isnotnull:function(a7){return"("+a7+" !== null && "+a7+" !== undefined)";
}};
}();
function aE(a5){this.data=a5||[];
}aE.filterExpr=function(a6){var a7=[],be={and:" && ",or:" || "},bc,bd,ba,a5,a9=[],bg=[],a8,bf,bb=a6.filters;
for(bc=0,bd=bb.length;
bc<bd;
bc++){ba=bb[bc];
a8=ba.field;
bf=ba.operator;
if(ba.filters){a5=aE.filterExpr(ba);
ba=a5.expression.replace(/__o\[(\d+)\]/g,function(bi,bh){bh=+bh;
return"__o["+(bg.length+bh)+"]";
}).replace(/__f\[(\d+)\]/g,function(bi,bh){bh=+bh;
return"__f["+(a9.length+bh)+"]";
});
bg.push.apply(bg,a5.operators);
a9.push.apply(a9,a5.fields);
}else{if(typeof a8===H){a5="__f["+a9.length+"](d)";
a9.push(a8);
}else{a5=ad.expr(a8);
}if(typeof bf===H){ba="__o["+bg.length+"]("+a5+", "+ay.quote(ba.value)+")";
bg.push(bf);
}else{ba=ay[(bf||"eq").toLowerCase()](a5,ba.value,ba.ignoreCase!==a0?ba.ignoreCase:true);
}}a7.push(ba);
}return{expression:"("+a7.join(be[a6.logic])+")",fields:a9,operators:bg};
};
function at(a8,a7){if(a8){var a5=typeof a8===aU?{field:a8,dir:a7}:a8,a6=W(a5)?a5:a5!==a0?[a5]:[];
return M(a6,function(a9){return !!a9.dir;
});
}}var ax={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain",isnull:"isnull",isempty:"isempty",isnotempty:"isnotempty"};
function ar(a5){var a8,a9,a6,ba,a7=a5.filters;
if(a7){for(a8=0,a9=a7.length;
a8<a9;
a8++){a6=a7[a8];
ba=a6.operator;
if(ba&&typeof ba===aU){a6.operator=ax[ba.toLowerCase()]||ba;
}ar(a6);
}}}function ap(a5){if(a5&&!Y(a5)){if(W(a5)||!a5.filters){a5={logic:"and",filters:W(a5)?a5:[a5]};
}ar(a5);
return a5;
}}aE.normalizeFilter=ap;
function j(a5,a6){if(a5.logic||a6.logic){return false;
}return a5.field===a6.field&&a5.value===a6.value&&a5.operator===a6.operator;
}function ao(a5){a5=a5||{};
if(Y(a5)){return{logic:"and",filters:[]};
}return ap(a5);
}function E(a5,a6){if(a6.logic||a5.field>a6.field){return 1;
}else{if(a5.field<a6.field){return -1;
}else{return 0;
}}}function k(a5,a6){a5=ao(a5);
a6=ao(a6);
if(a5.logic!==a6.logic){return false;
}var a7,a8;
var a9=(a5.filters||[]).slice();
var ba=(a6.filters||[]).slice();
if(a9.length!==ba.length){return false;
}a9=a9.sort(E);
ba=ba.sort(E);
for(var bb=0;
bb<a9.length;
bb++){a7=a9[bb];
a8=ba[bb];
if(a7.logic&&a8.logic){if(!k(a7,a8)){return false;
}}else{if(!j(a7,a8)){return false;
}}}return true;
}aE.compareFilters=k;
function an(a5){return W(a5)?a5:[a5];
}function aq(a8,a7){var a5=typeof a8===aU?{field:a8,dir:a7}:a8,a6=W(a5)?a5:a5!==a0?[a5]:[];
return ag(a6,function(a9){return{field:a9.field,dir:a9.dir||"asc",aggregates:a9.aggregates};
});
}aE.prototype={toArray:function(){return this.data;
},range:function(a6,a5){return new aE(this.data.slice(a6,a6+a5));
},skip:function(a5){return new aE(this.data.slice(a5));
},take:function(a5){return new aE(this.data.slice(0,a5));
},select:function(a5){return new aE(ag(this.data,a5));
},order:function(a6,a5){var a7={dir:a5};
if(a6){if(a6.compare){a7.compare=a6.compare;
}else{a7.field=a6;
}}return new aE(this.data.slice(0).sort(l.create(a7)));
},orderBy:function(a5){return this.order(a5,"asc");
},orderByDescending:function(a5){return this.order(a5,"desc");
},sort:function(a9,a8,a5){var ba,bb,a7=at(a9,a8),a6=[];
a5=a5||l;
if(a7.length){for(ba=0,bb=a7.length;
ba<bb;
ba++){a6.push(a5.create(a7[ba]));
}return this.orderBy({compare:a5.combine(a6)});
}return this;
},filter:function(a8){var bb,a6,bc,a5,be,a7=this.data,a9,bd,bf=[],ba;
a8=ap(a8);
if(!a8||a8.filters.length===0){return this;
}a5=aE.filterExpr(a8);
a9=a5.fields;
bd=a5.operators;
be=ba=new Function("d, __f, __o","return "+a5.expression);
if(a9.length||bd.length){ba=function(bg){return be(bg,a9,bd);
};
}for(bb=0,bc=a7.length;
bb<bc;
bb++){a6=a7[bb];
if(ba(a6)){bf.push(a6);
}}return new aE(bf);
},group:function(a7,a5){a7=aq(a7||[]);
a5=a5||this.data;
var a9=this,a8=new aE(a9.data),a6;
if(a7.length>0){a6=a7[0];
a8=a8.groupBy(a6).select(function(bb){var ba=new aE(a5).filter([{field:bb.field,operator:"eq",value:bb.value,ignoreCase:false}]);
return{field:bb.field,value:bb.value,items:a7.length>1?new aE(bb.items).group(a7.slice(1),ba.toArray()).toArray():bb.items,hasSubgroups:a7.length>1,aggregates:ba.aggregate(a6.aggregates)};
});
}return a8;
},groupBy:function(a7){if(Y(a7)||!this.data.length){return new aE([]);
}var a8=a7.field,bf=this._sortForGrouping(a8,a7.dir||"asc"),a5=ad.accessor(a8),bc,ba=a5.get(bf[0],a8),a9={field:a8,value:ba,items:[]},a6,bb,bd,be=[a9];
for(bb=0,bd=bf.length;
bb<bd;
bb++){bc=bf[bb];
a6=a5.get(bc,a8);
if(!N(ba,a6)){ba=a6;
a9={field:a8,value:ba,items:[]};
be.push(a9);
}a9.items.push(bc);
}return new aE(be);
},_sortForGrouping:function(a7,a6){var a8,a9,a5=this.data;
if(!aT){for(a8=0,a9=a5.length;
a8<a9;
a8++){a5[a8].__position=a8;
}a5=new aE(a5).sort(a7,a6,aS).toArray();
for(a8=0,a9=a5.length;
a8<a9;
a8++){delete a5[a8].__position;
}return a5;
}return this.sort(a7,a6).toArray();
},aggregate:function(a5){var a6,a7,a8={},a9={};
if(a5&&a5.length){for(a6=0,a7=this.data.length;
a6<a7;
a6++){g(a8,a5,this.data[a6],a6,a7,a9);
}}return a8;
}};
function N(a5,a6){if(a5&&a5.getTime&&a6&&a6.getTime){return a5.getTime()===a6.getTime();
}return a5===a6;
}function g(a5,a7,bc,bb,be,bf){a7=a7||[];
var ba,a6,a9,bd=a7.length;
for(ba=0;
ba<bd;
ba++){a6=a7[ba];
a9=a6.aggregate;
var a8=a6.field;
a5[a8]=a5[a8]||{};
bf[a8]=bf[a8]||{};
bf[a8][a9]=bf[a8][a9]||{};
a5[a8][a9]=I[a9.toLowerCase()](a5[a8][a9],bc,ad.accessor(a8),bb,be,bf[a8][a9]);
}}var I={sum:function(a6,a7,a5){var a8=a5.get(a7);
if(!aa(a6)){a6=a8;
}else{if(aa(a8)){a6+=a8;
}}return a6;
},count:function(a5){return(a5||0)+1;
},average:function(a6,a8,a5,a7,a9,ba){var bb=a5.get(a8);
if(ba.count===a0){ba.count=0;
}if(!aa(a6)){a6=bb;
}else{if(aa(bb)){a6+=bb;
}}if(aa(bb)){ba.count++;
}if(a7==a9-1&&aa(a6)){a6=a6/ba.count;
}return a6;
},max:function(a6,a7,a5){var a8=a5.get(a7);
if(!aa(a6)&&!X(a6)){a6=a8;
}if(a6<a8&&(aa(a8)||X(a8))){a6=a8;
}return a6;
},min:function(a6,a7,a5){var a8=a5.get(a7);
if(!aa(a6)&&!X(a6)){a6=a8;
}if(a6>a8&&(aa(a8)||X(a8))){a6=a8;
}return a6;
}};
function aa(a5){return typeof a5==="number"&&!isNaN(a5);
}function X(a5){return a5&&a5.getTime;
}function aX(a5){var a6,a7=a5.length,a8=new Array(a7);
for(a6=0;
a6<a7;
a6++){a8[a6]=a5[a6].toJSON();
}return a8;
}aE.process=function(a5,a9){a9=a9||{};
var ba=new aE(a5),a8=a9.group,bc=aq(a8||[]).concat(at(a9.sort||[])),be,a7=a9.filterCallback,a6=a9.filter,bb=a9.skip,bd=a9.take;
if(a6){ba=ba.filter(a6);
if(a7){ba=a7(ba);
}be=ba.toArray().length;
}if(bc){ba=ba.sort(bc);
if(a8){a5=ba.toArray();
}}if(bb!==a0&&bd!==a0){ba=ba.range(bb,bd);
}if(a8){ba=ba.group(a8,a5);
}return{total:be,data:ba.toArray()};
};
var af=i.extend({init:function(a5){this.data=a5.data;
},read:function(a5){a5.success(this.data);
},update:function(a5){a5.success(a5.data);
},create:function(a5){a5.success(a5.data);
},destroy:function(a5){a5.success(a5.data);
}});
var aH=i.extend({init:function(a5){var a7=this,a6;
a5=a7.options=D({},a7.options,a5);
y(r,function(a8,a9){if(typeof a5[a9]===aU){a5[a9]={url:a5[a9]};
}});
a7.cache=a5.cache?f.create(a5.cache):{find:am,add:am};
a6=a5.parameterMap;
if(Z(a5.push)){a7.push=a5.push;
}if(!a7.push){a7.push=P;
}a7.parameterMap=Z(a6)?a6:function(a8){var a9={};
y(a8,function(ba,bb){if(ba in a6){ba=a6[ba];
if(ab(ba)){bb=ba.value(bb);
ba=ba.key;
}}a9[ba]=bb;
});
return a9;
};
},options:{parameterMap:P},create:function(a5){return c(this.setup(a5,q));
},read:function(a7){var ba=this,a9,a6,a8,a5=ba.cache;
a7=ba.setup(a7,aG);
a9=a7.success||am;
a6=a7.error||am;
a8=a5.find(a7.data);
if(a8!==a0){a9(a8);
}else{a7.success=function(bb){a5.add(a7.data,bb);
a9(bb);
};
b.ajax(a7);
}},update:function(a5){return c(this.setup(a5,a2));
},destroy:function(a5){return c(this.setup(a5,x));
},setup:function(a7,ba){a7=a7||{};
var a9=this,a8,a6=a9.options[ba],a5=Z(a6.data)?a6.data(a7.data):a6.data;
a7=D(true,{},a6,a7);
a8=D(true,{},a5,a7.data);
a7.data=a9.parameterMap(a8,ba);
if(Z(a7.url)){a7.url=a7.url(a8);
}return a7;
}});
var f=i.extend({init:function(){this._store={};
},add:function(a6,a5){if(a6!==a0){this._store[aV(a6)]=a5;
}},find:function(a5){return this._store[aV(a5)];
},clear:function(){this._store={};
},remove:function(a5){delete this._store[aV(a5)];
}});
f.create=function(a5){var a6={inmemory:function(){return new f();
}};
if(ab(a5)&&Z(a5.find)){return a5;
}if(a5===true){return new f();
}return a6[a5]();
};
function aO(a5,a8,bb,bc,a6){var be,a7,bd,a9,bf={},ba;
for(a9=0,ba=a5.length;
a9<ba;
a9++){be=a5[a9];
for(a7 in a8){bd=a6[a7];
if(bd&&bd!==a7){if(!bf[bd]){bf[bd]=ad.setter(bd);
}bf[bd](be,a8[a7](be));
delete be[a7];
}}}}function p(a5,a8,bb,bc,a6){var be,a7,bd,a9,ba;
for(a9=0,ba=a5.length;
a9<ba;
a9++){be=a5[a9];
for(a7 in a8){be[a7]=bb._parse(a7,a8[a7](be));
bd=a6[a7];
if(bd&&bd!==a7){delete be[bd];
}}}}function o(a5,a8,bb,bc,a7){var bd,a9,a6,ba;
for(a9=0,ba=a5.length;
a9<ba;
a9++){bd=a5[a9];
a6=bc[bd.field];
if(a6&&a6!=bd.field){bd.field=a6;
}bd.value=bb._parse(bd.field,bd.value);
if(bd.hasSubgroups){o(bd.items,a8,bb,bc,a7);
}else{p(bd.items,a8,bb,bc,a7);
}}}function a3(ba,a8,a5,a7,a9,a6){return function(bb){bb=ba(bb);
if(bb&&!Y(a7)){if(aY.call(bb)!=="[object Array]"&&!(bb instanceof av)){bb=[bb];
}a5(bb,a7,new a8(),a9,a6);
}return bb||[];
};
}var t=i.extend({init:function(bf){var bj=this,bc,a9,bd,a5;
bf=bf||{};
for(bc in bf){a9=bf[bc];
bj[bc]=typeof a9===aU?L(a9):a9;
}a5=bf.modelBase||aj;
if(ab(bj.model)){bj.model=bd=a5.define(bj.model);
}var a6=aC(bj.data,bj);
bj._dataAccessFunction=a6;
if(bj.model){var bb=aC(bj.groups,bj),bg=aC(bj.serialize,bj),be={},ba={},bh={},a8={},bi=false,a7;
bd=bj.model;
if(bd.fields){y(bd.fields,function(bk,bm){var bl;
a7=bk;
if(ab(bm)&&bm.field){a7=bm.field;
}else{if(typeof bm===aU){a7=bm;
}}if(ab(bm)&&bm.from){bl=bm.from;
}bi=bi||bl&&bl!==bk||a7!==bk;
ba[bk]=L(bl||a7);
bh[bk]=L(bk);
be[bl||a7]=bk;
a8[bk]=bl||a7;
});
if(!bf.serialize&&bi){bj.serialize=a3(bg,bd,aO,bh,be,a8);
}}bj._dataAccessFunction=a6;
bj.data=a3(a6,bd,p,ba,be,a8);
bj.groups=a3(bb,bd,o,ba,be,a8);
}},errors:function(a5){return a5?a5.errors:null;
},parse:P,data:P,total:function(a5){return a5.length;
},groups:P,aggregates:function(){return{};
},serialize:function(a5){return a5;
}});
function ai(bc,a5,ba,bb){var a6,a7=0,a8;
while(a5.length&&bb){a6=a5[a7];
a8=a6.items;
var a9=a8.length;
if(bc&&bc.field===a6.field&&bc.value===a6.value){if(bc.hasSubgroups&&bc.items.length){ai(bc.items[bc.items.length-1],a6.items,ba,bb);
}else{a8=a8.slice(ba,ba+bb);
bc.items=bc.items.concat(a8);
}a5.splice(a7--,1);
}else{if(a6.hasSubgroups&&a8.length){ai(a6,a8,ba,bb);
if(!a6.items.length){a5.splice(a7--,1);
}}else{a8=a8.slice(ba,ba+bb);
a6.items=a8;
if(!a6.items.length){a5.splice(a7--,1);
}}}if(a8.length===0){ba-=a9;
}else{ba=0;
bb-=a8.length;
}if(++a7>=a5.length){break;
}}if(a7<a5.length){a5.splice(a7,a5.length-a7);
}}function G(a5){var a7,bb=[],ba,a9,a8;
for(a7=0,ba=a5.length;
a7<ba;
a7++){var a6=a5.at(a7);
if(a6.hasSubgroups){bb=bb.concat(G(a6.items));
}else{a9=a6.items;
for(a8=0;
a8<a9.length;
a8++){bb.push(a9.at(a8));
}}}return bb;
}function a4(a5,a9){var a7,a8,a6;
if(a9){for(a7=0,a8=a5.length;
a7<a8;
a7++){a6=a5.at(a7);
if(a6.hasSubgroups){a4(a6.items,a9);
}else{a6.items=new ae(a6.items,a9);
}}}}function z(a5,a6){for(var a7=0,a8=a5.length;
a7<a8;
a7++){if(a5[a7].hasSubgroups){if(z(a5[a7].items,a6)){return true;
}}else{if(a6(a5[a7].items,a5[a7])){return true;
}}}}function aK(a9,a5,a7,a8){for(var a6=0;
a6<a9.length;
a6++){if(a9[a6].data===a5){break;
}if(aJ(a9[a6].data,a7,a8)){break;
}}}function aJ(a7,a6,a9){for(var a5=0,a8=a7.length;
a5<a8;
a5++){if(a7[a5]&&a7[a5].hasSubgroups){return aJ(a7[a5].items,a6,a9);
}else{if(a7[a5]===a6||a7[a5]===a9){a7[a5]=a9;
return true;
}}}}function aL(bc,a5,a9,bb,ba){for(var bd=0,a8=bc.length;
bd<a8;
bd++){var a7=bc[bd];
if(!a7||a7 instanceof bb){continue;
}if(a7.hasSubgroups!==a0&&!ba){aL(a7.items,a5,a9,bb,ba);
}else{for(var a6=0;
a6<a5.length;
a6++){if(a5[a6]===a7){bc[bd]=a5.at(a6);
aK(a9,a5,a7,bc[bd]);
break;
}}}}}function aI(a5,a9){var a7,a8;
for(a7=0,a8=a5.length;
a7<a8;
a7++){var a6=a5.at(a7);
if(a6.uid==a9.uid){a5.splice(a7,1);
return a6;
}}}function S(a5,a6){if(a6){return Q(a5,function(a7){return a7.uid&&a7.uid==a6.uid||a7[a6.idField]===a6.id&&a6.id!==a6._defaultId;
});
}return -1;
}function R(a5,a6){if(a6){return Q(a5,function(a7){return a7.uid==a6.uid;
});
}return -1;
}function Q(a6,a5){var a7,a8;
for(a7=0,a8=a6.length;
a7<a8;
a7++){if(a5(a6[a7])){return a7;
}}return -1;
}function F(a7,a8){if(a7&&!Y(a7)){var a5=a7[a8];
var a6;
if(ab(a5)){a6=a5.from||a5.field||a8;
}else{a6=a7[a8]||a8;
}if(Z(a6)){return a8;
}return a6;
}return a8;
}function n(a5,a9){var a7,a8,ba={};
for(var a6 in a5){if(a6!=="filters"){ba[a6]=a5[a6];
}}if(a5.filters){ba.filters=[];
for(a7=0,a8=a5.filters.length;
a7<a8;
a7++){ba.filters[a7]=n(a5.filters[a7],a9);
}}else{ba.field=F(a9.fields,ba.field);
}return ba;
}function m(a6,ba){var a8,a9,bb=[],bc,a5;
for(a8=0,a9=a6.length;
a8<a9;
a8++){bc={};
a5=a6[a8];
for(var a7 in a5){bc[a7]=a5[a7];
}bc.field=F(ba.fields,bc.field);
if(bc.aggregates&&W(bc.aggregates)){bc.aggregates=m(bc.aggregates,ba);
}bb.push(bc);
}return bb;
}var u=au.extend({init:function(a8){var a9=this,a7,a5;
if(a8){a5=a8.data;
}a8=a9.options=D({},a9.options,a8);
a9._map={};
a9._prefetch={};
a9._data=[];
a9._pristineData=[];
a9._ranges=[];
a9._view=[];
a9._pristineTotal=0;
a9._destroyed=[];
a9._pageSize=a8.pageSize;
a9._page=a8.page||(a8.pageSize?1:a0);
a9._sort=at(a8.sort);
a9._filter=ap(a8.filter);
a9._group=aq(a8.group);
a9._aggregate=a8.aggregate;
a9._total=a8.total;
a9._shouldDetachObservableParents=true;
au.fn.init.call(a9);
a9.transport=aZ.create(a8,a5,a9);
if(Z(a9.transport.push)){a9.transport.push({pushCreate:aC(a9._pushCreate,a9),pushUpdate:aC(a9._pushUpdate,a9),pushDestroy:aC(a9._pushDestroy,a9)});
}if(a8.offlineStorage!=null){if(typeof a8.offlineStorage=="string"){var a6=a8.offlineStorage;
a9._storage={getItem:function(){return JSON.parse(localStorage.getItem(a6));
},setItem:function(ba){localStorage.setItem(a6,aV(a9.reader.serialize(ba)));
}};
}else{a9._storage=a8.offlineStorage;
}}a9.reader=new ad.data.readers[a8.schema.type||"json"](a8.schema);
a7=a9.reader.model||{};
a9._detachObservableParents();
a9._data=a9._observe(a9._data);
a9._online=true;
a9.bind(["push",B,h,aN,aW,aM,aB],a8);
},options:{data:null,schema:{modelBase:aj},offlineStorage:null,serverSorting:false,serverPaging:false,serverFiltering:false,serverGrouping:false,serverAggregates:false,batch:false},clone:function(){return this;
},online:function(a5){if(a5!==a0){if(this._online!=a5){this._online=a5;
if(a5){return this.sync();
}}return b.Deferred().resolve().promise();
}else{return this._online;
}},offlineData:function(a5){if(this.options.offlineStorage==null){return null;
}if(a5!==a0){return this._storage.setItem(a5);
}return this._storage.getItem()||[];
},_isServerGrouped:function(){var a5=this.group()||[];
return this.options.serverGrouping&&a5.length;
},_pushCreate:function(a5){this._push(a5,"pushCreate");
},_pushUpdate:function(a5){this._push(a5,"pushUpdate");
},_pushDestroy:function(a5){this._push(a5,"pushDestroy");
},_push:function(a7,a6){var a5=this._readData(a7);
if(!a5){a5=a7;
}this[a6](a5);
},_flatData:function(a5,a7){if(a5){if(this._isServerGrouped()){return G(a5);
}if(!a7){for(var a6=0;
a6<a5.length;
a6++){a5.at(a6);
}}}return a5;
},parent:am,get:function(a6){var a7,a8,a5=this._flatData(this._data);
for(a7=0,a8=a5.length;
a7<a8;
a7++){if(a5[a7].id==a6){return a5[a7];
}}},getByUid:function(a6){var a7,a8,a5=this._flatData(this._data);
if(!a5){return;
}for(a7=0,a8=a5.length;
a7<a8;
a7++){if(a5[a7].uid==a6){return a5[a7];
}}},indexOf:function(a5){return R(this._data,a5);
},at:function(a5){return this._data.at(a5);
},data:function(a7){var a6=this;
if(a7!==a0){a6._detachObservableParents();
a6._data=this._observe(a7);
a6._pristineData=a7.slice(0);
a6._storeData();
a6._ranges=[];
a6.trigger("reset");
a6._addRange(a6._data);
a6._total=a6._data.length;
a6._pristineTotal=a6._total;
a6._process(a6._data);
}else{if(a6._data){for(var a5=0;
a5<a6._data.length;
a5++){a6._data.at(a5);
}}return a6._data;
}},view:function(a5){if(a5===a0){return this._view;
}else{this._view=this._observeView(a5);
}},_observeView:function(a5){var a6=this;
aL(a5,a6._data,a6._ranges,a6.reader.model||aw,a6._isServerGrouped());
var a7=new ae(a5,a6.reader.model);
a7.parent=function(){return a6.parent();
};
return a7;
},flatView:function(){var a5=this.group()||[];
if(a5.length){return G(this._view);
}else{return this._view;
}},add:function(a5){return this.insert(this._data.length,a5);
},_createNewModel:function(a5){if(this.reader.model){return new this.reader.model(a5);
}if(a5 instanceof aw){return a5;
}return new aw(a5);
},insert:function(a5,a6){if(!a6){a6=a5;
a5=0;
}if(!(a6 instanceof aj)){a6=this._createNewModel(a6);
}if(this._isServerGrouped()){this._data.splice(a5,0,this._wrapInEmptyGroup(a6));
}else{this._data.splice(a5,0,a6);
}return a6;
},pushCreate:function(a8){if(!W(a8)){a8=[a8];
}var ba=[];
var a5=this.options.autoSync;
this.options.autoSync=false;
try{for(var a6=0;
a6<a8.length;
a6++){var a7=a8[a6];
var bb=this.add(a7);
ba.push(bb);
var a9=bb.toJSON();
if(this._isServerGrouped()){a9=this._wrapInEmptyGroup(a9);
}this._pristineData.push(a9);
}}finally{this.options.autoSync=a5;
}if(ba.length){this.trigger("push",{type:"create",items:ba});
}},pushUpdate:function(a7){if(!W(a7)){a7=[a7];
}var a9=[];
for(var a5=0;
a5<a7.length;
a5++){var a6=a7[a5];
var a8=this._createNewModel(a6);
var ba=this.get(a8.id);
if(ba){a9.push(ba);
ba.accept(a6);
ba.trigger(h);
this._updatePristineForModel(ba,a6);
}else{this.pushCreate(a6);
}}if(a9.length){this.trigger("push",{type:"update",items:a9});
}},pushDestroy:function(a5){var a6=this._removeItems(a5);
if(a6.length){this.trigger("push",{type:"destroy",items:a6});
}},_removeItems:function(ba){if(!W(ba)){ba=[ba];
}var a6=[];
var a5=this.options.autoSync;
this.options.autoSync=false;
try{for(var a8=0;
a8<ba.length;
a8++){var a9=ba[a8];
var bb=this._createNewModel(a9);
var a7=false;
this._eachItem(this._data,function(be){for(var bc=0;
bc<be.length;
bc++){var bd=be.at(bc);
if(bd.id===bb.id){a6.push(bd);
be.splice(bc,1);
a7=true;
break;
}}});
if(a7){this._removePristineForModel(bb);
this._destroyed.pop();
}}}finally{this.options.autoSync=a5;
}return a6;
},remove:function(a6){var a7,a8=this,a5=a8._isServerGrouped();
this._eachItem(a8._data,function(a9){a7=aI(a9,a6);
if(a7&&a5){if(!a7.isNew||!a7.isNew()){a8._destroyed.push(a7);
}return true;
}});
this._removeModelFromRanges(a6);
this._updateRangesLength();
return a6;
},destroyed:function(){return this._destroyed;
},created:function(){var a6,a7,a8=[],a5=this._flatData(this._data);
for(a6=0,a7=a5.length;
a6<a7;
a6++){if(a5[a6].isNew&&a5[a6].isNew()){a8.push(a5[a6]);
}}return a8;
},updated:function(){var a6,a7,a8=[],a5=this._flatData(this._data);
for(a6=0,a7=a5.length;
a6<a7;
a6++){if(a5[a6].isNew&&!a5[a6].isNew()&&a5[a6].dirty){a8.push(a5[a6]);
}}return a8;
},sync:function(){var a9=this,a5=[],ba=[],a6=a9._destroyed;
var a7=b.Deferred().resolve().promise();
if(a9.online()){if(!a9.reader.model){return a7;
}a5=a9.created();
ba=a9.updated();
var a8=[];
if(a9.options.batch&&a9.transport.submit){a8=a9._sendSubmit(a5,ba,a6);
}else{a8.push.apply(a8,a9._send("create",a5));
a8.push.apply(a8,a9._send("update",ba));
a8.push.apply(a8,a9._send("destroy",a6));
}a7=b.when.apply(null,a8).then(function(){var bb,bc;
for(bb=0,bc=arguments.length;
bb<bc;
bb++){a9._accept(arguments[bb]);
}a9._storeData(true);
a9._change({action:"sync"});
a9.trigger(aW);
});
}else{a9._storeData(true);
a9._change({action:"sync"});
}return a7;
},cancelChanges:function(a5){var a6=this;
if(a5 instanceof ad.data.Model){a6._cancelModel(a5);
}else{a6._destroyed=[];
a6._detachObservableParents();
a6._data=a6._observe(a6._pristineData);
if(a6.options.serverPaging){a6._total=a6._pristineTotal;
}a6._ranges=[];
a6._addRange(a6._data);
a6._change();
a6._markOfflineUpdatesAsDirty();
}},_markOfflineUpdatesAsDirty:function(){var a5=this;
if(a5.options.offlineStorage!=null){a5._eachItem(a5._data,function(a8){for(var a6=0;
a6<a8.length;
a6++){var a7=a8.at(a6);
if(a7.__state__=="update"||a7.__state__=="create"){a7.dirty=true;
}}});
}},hasChanges:function(){var a6,a7,a5=this._flatData(this._data);
if(this._destroyed.length){return true;
}for(a6=0,a7=a5.length;
a6<a7;
a6++){if(a5[a6].isNew&&a5[a6].isNew()||a5[a6].dirty){return true;
}}return false;
},_accept:function(ba){var bc=this,a7=ba.models,a9=ba.response,a5=0,bb=bc._isServerGrouped(),a8=bc._pristineData,bd=ba.type,a6;
bc.trigger(aM,{response:a9,type:bd});
if(a9&&!Y(a9)){a9=bc.reader.parse(a9);
if(bc._handleCustomErrors(a9)){return;
}a9=bc.reader.data(a9);
if(!W(a9)){a9=[a9];
}}else{a9=b.map(a7,function(be){return be.toJSON();
});
}if(bd==="destroy"){bc._destroyed=[];
}for(a5=0,a6=a7.length;
a5<a6;
a5++){if(bd!=="destroy"){a7[a5].accept(a9[a5]);
if(bd==="create"){a8.push(bb?bc._wrapInEmptyGroup(a7[a5]):a9[a5]);
}else{if(bd==="update"){bc._updatePristineForModel(a7[a5],a9[a5]);
}}}else{bc._removePristineForModel(a7[a5]);
}}},_updatePristineForModel:function(a5,a6){this._executeOnPristineForModel(a5,function(a7,a8){ad.deepExtend(a8[a7],a6);
});
},_executeOnPristineForModel:function(a6,a5){this._eachPristineItem(function(a8){var a7=S(a8,a6);
if(a7>-1){a5(a7,a8);
return true;
}});
},_removePristineForModel:function(a5){this._executeOnPristineForModel(a5,function(a6,a7){a7.splice(a6,1);
});
},_readData:function(a5){var a6=!this._isServerGrouped()?this.reader.data:this.reader.groups;
return a6.call(this.reader,a5);
},_eachPristineItem:function(a5){this._eachItem(this._pristineData,a5);
},_eachItem:function(a6,a5){if(a6&&a6.length){if(this._isServerGrouped()){z(a6,a5);
}else{a5(a6);
}}},_pristineForModel:function(a7){var a8,a6,a5=function(a9){a6=S(a9,a7);
if(a6>-1){a8=a9[a6];
return true;
}};
this._eachPristineItem(a5);
return a8;
},_cancelModel:function(a5){var a6=this._pristineForModel(a5);
this._eachItem(this._data,function(a8){var a7=R(a8,a5);
if(a7>=0){if(a6&&(!a5.isNew()||a6.__state__)){a8[a7].accept(a6);
if(a6.__state__=="update"){a8[a7].dirty=true;
}}else{a8.splice(a7,1);
}}});
},_submit:function(a6,a5){var a7=this;
a7.trigger(aN,{type:"submit"});
a7.transport.submit(D({success:function(a9,ba){var a8=b.grep(a6,function(bb){return bb.type==ba;
})[0];
if(a8){a8.resolve({response:a9,models:a8.models,type:ba});
}},error:function(ba,bb,a8){for(var a9=0;
a9<a6.length;
a9++){a6[a9].reject(ba);
}a7.error(ba,bb,a8);
}},a5));
},_sendSubmit:function(a5,a9,a6){var a8=this,a7=[];
if(a8.options.batch){if(a5.length){a7.push(b.Deferred(function(ba){ba.type="create";
ba.models=a5;
}));
}if(a9.length){a7.push(b.Deferred(function(ba){ba.type="update";
ba.models=a9;
}));
}if(a6.length){a7.push(b.Deferred(function(ba){ba.type="destroy";
ba.models=a6;
}));
}a8._submit(a7,{data:{created:a8.reader.serialize(aX(a5)),updated:a8.reader.serialize(aX(a9)),destroyed:a8.reader.serialize(aX(a6))}});
}return a7;
},_promise:function(a5,a6,a8){var a7=this;
return b.Deferred(function(a9){a7.trigger(aN,{type:a8});
a7.transport[a8].call(a7.transport,D({success:function(ba){a9.resolve({response:ba,models:a6,type:a8});
},error:function(bb,bc,ba){a9.reject(bb);
a7.error(bb,bc,ba);
}},a5));
}).promise();
},_send:function(a9,a6){var bb=this,a7,a8,ba=[],a5=bb.reader.serialize(aX(a6));
if(bb.options.batch){if(a6.length){ba.push(bb._promise({data:{models:a5}},a6,a9));
}}else{for(a7=0,a8=a6.length;
a7<a8;
a7++){ba.push(bb._promise({data:a5[a7]},[a6[a7]],a9));
}}return ba;
},read:function(a5){var a8=this,a7=a8._params(a5);
var a6=b.Deferred();
a8._queueRequest(a7,function(){var a9=a8.trigger(aN,{type:"read"});
if(!a9){a8.trigger(aB);
a8._ranges=[];
a8.trigger("reset");
if(a8.online()){a8.transport.read({data:a7,success:function(ba){a8._ranges=[];
a8.success(ba,a7);
a6.resolve();
},error:function(){var ba=aQ.call(arguments);
a8.error.apply(a8,ba);
a6.reject.apply(a6,ba);
}});
}else{if(a8.options.offlineStorage!=null){a8.success(a8.offlineData(),a7);
a6.resolve();
}}}else{a8._dequeueRequest();
a6.resolve(a9);
}});
return a6.promise();
},_readAggregates:function(a5){return this.reader.aggregates(a5);
},success:function(a5){var bf=this,bd=bf.options;
bf.trigger(aM,{response:a5,type:"read"});
if(bf.online()){a5=bf.reader.parse(a5);
if(bf._handleCustomErrors(a5)){bf._dequeueRequest();
return;
}bf._total=bf.reader.total(a5);
if(bf._aggregate&&bd.serverAggregates){bf._aggregateResult=bf._readAggregates(a5);
}a5=bf._readData(a5);
bf._destroyed=[];
}else{a5=bf._readData(a5);
var bb=[];
var ba={};
var bc=bf.reader.model;
var a7=bc?bc.idField:"id";
var a8;
for(a8=0;
a8<this._destroyed.length;
a8++){var a6=this._destroyed[a8][a7];
ba[a6]=a6;
}for(a8=0;
a8<a5.length;
a8++){var a9=a5[a8];
var be=a9.__state__;
if(be=="destroy"){if(!ba[a9[a7]]){this._destroyed.push(this._createNewModel(a9));
}}else{bb.push(a9);
}}a5=bb;
bf._total=a5.length;
}bf._pristineTotal=bf._total;
bf._pristineData=a5.slice(0);
bf._detachObservableParents();
bf._data=bf._observe(a5);
bf._markOfflineUpdatesAsDirty();
bf._storeData();
bf._addRange(bf._data);
bf._process(bf._data);
bf._dequeueRequest();
},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents){for(var a5=0;
a5<this._data.length;
a5++){if(this._data[a5].parent){this._data[a5].parent=am;
}}}},_storeData:function(bc){var ba=this._isServerGrouped();
var a9=this.reader.model;
function a8(bd){var bh=[];
for(var bf=0;
bf<bd.length;
bf++){var be=bd.at(bf);
var bg=be.toJSON();
if(ba&&be.items){bg.items=a8(be.items);
}else{bg.uid=be.uid;
if(a9){if(be.isNew()){bg.__state__="create";
}else{if(be.dirty){bg.__state__="update";
}}}}bh.push(bg);
}return bh;
}if(this.options.offlineStorage!=null){var bb=a8(this._data);
var a5=[];
for(var a6=0;
a6<this._destroyed.length;
a6++){var a7=this._destroyed[a6].toJSON();
a7.__state__="destroy";
a5.push(a7);
}this.offlineData(bb.concat(a5));
if(bc){this._pristineData=this._readData(bb);
}}},_addRange:function(a5){var a8=this,a7=a8._skip||0,a6=a7+a8._flatData(a5,true).length;
a8._ranges.push({start:a7,end:a6,data:a5,timestamp:new Date().getTime()});
a8._ranges.sort(function(a9,ba){return a9.start-ba.start;
});
},error:function(a7,a6,a5){this._dequeueRequest();
this.trigger(aM,{});
this.trigger(B,{xhr:a7,status:a6,errorThrown:a5});
},_params:function(a5){var a7=this,a6=D({take:a7.take(),skip:a7.skip(),page:a7.page(),pageSize:a7.pageSize(),sort:a7._sort,filter:a7._filter,group:a7._group,aggregate:a7._aggregate},a5);
if(!a7.options.serverPaging){delete a6.take;
delete a6.skip;
delete a6.page;
delete a6.pageSize;
}if(!a7.options.serverGrouping){delete a6.group;
}else{if(a7.reader.model&&a6.group){a6.group=m(a6.group,a7.reader.model);
}}if(!a7.options.serverFiltering){delete a6.filter;
}else{if(a7.reader.model&&a6.filter){a6.filter=n(a6.filter,a7.reader.model);
}}if(!a7.options.serverSorting){delete a6.sort;
}else{if(a7.reader.model&&a6.sort){a6.sort=m(a6.sort,a7.reader.model);
}}if(!a7.options.serverAggregates){delete a6.aggregate;
}else{if(a7.reader.model&&a6.aggregate){a6.aggregate=m(a6.aggregate,a7.reader.model);
}}return a6;
},_queueRequest:function(a6,a5){var a7=this;
if(!a7._requestInProgress){a7._requestInProgress=true;
a7._pending=a0;
a5();
}else{a7._pending={callback:aC(a5,a7),options:a6};
}},_dequeueRequest:function(){var a5=this;
a5._requestInProgress=false;
if(a5._pending){a5._queueRequest(a5._pending.options,a5._pending.callback);
}},_handleCustomErrors:function(a6){if(this.reader.errors){var a5=this.reader.errors(a6);
if(a5){this.trigger(B,{xhr:null,status:"customerror",errorThrown:"custom error",errors:a5});
return true;
}}return false;
},_shouldWrap:function(a5){var a6=this.reader.model;
if(a6&&a5.length){return !(a5[0] instanceof a6);
}return false;
},_observe:function(a6){var a8=this,a7=a8.reader.model;
a8._shouldDetachObservableParents=true;
if(a6 instanceof av){a8._shouldDetachObservableParents=false;
if(a8._shouldWrap(a6)){a6.type=a8.reader.model;
a6.wrapAll(a6,a6);
}}else{var a5=a8.pageSize()&&!a8.options.serverPaging?ae:av;
a6=new a5(a6,a8.reader.model);
a6.parent=function(){return a8.parent();
};
}if(a8._isServerGrouped()){a4(a6,a7);
}if(a8._changeHandler&&a8._data&&a8._data instanceof av){a8._data.unbind(h,a8._changeHandler);
}else{a8._changeHandler=aC(a8._change,a8);
}return a6.bind(h,a8._changeHandler);
},_updateTotalForAction:function(a5,a6){var a7=this;
var a8=parseInt(a7._total,10);
if(!aa(a7._total)){a8=parseInt(a7._pristineTotal,10);
}if(a5==="add"){a8+=a6.length;
}else{if(a5==="remove"){a8-=a6.length;
}else{if(a5!=="itemchange"&&a5!=="sync"&&!a7.options.serverPaging){a8=a7._pristineTotal;
}else{if(a5==="sync"){a8=a7._pristineTotal=parseInt(a7._total,10);
}}}}a7._total=a8;
},_change:function(a6){var ba=this,a8,a9,a5=a6?a6.action:"";
if(a5==="remove"){for(a8=0,a9=a6.items.length;
a8<a9;
a8++){if(!a6.items[a8].isNew||!a6.items[a8].isNew()){ba._destroyed.push(a6.items[a8]);
}}}if(ba.options.autoSync&&(a5==="add"||a5==="remove"||a5==="itemchange")){var a7=function(bb){if(bb.action==="sync"){ba.unbind("change",a7);
ba._updateTotalForAction(a5,a6.items);
}};
ba.first("change",a7);
ba.sync();
}else{ba._updateTotalForAction(a5,a6?a6.items:[]);
ba._process(ba._data,a6);
}},_calculateAggregates:function(a6,a8){a8=a8||{};
var a9=new aE(a6),a5=a8.aggregate,a7=a8.filter;
if(a7){a9=a9.filter(a7);
}return a9.aggregate(a5);
},_process:function(a5,a6){var a9=this,a7={},a8;
if(a9.options.serverPaging!==true){a7.skip=a9._skip;
a7.take=a9._take||a9._pageSize;
if(a7.skip===a0&&a9._page!==a0&&a9._pageSize!==a0){a7.skip=(a9._page-1)*a9._pageSize;
}}if(a9.options.serverSorting!==true){a7.sort=a9._sort;
}if(a9.options.serverFiltering!==true){a7.filter=a9._filter;
}if(a9.options.serverGrouping!==true){a7.group=a9._group;
}if(a9.options.serverAggregates!==true){a7.aggregate=a9._aggregate;
a9._aggregateResult=a9._calculateAggregates(a5,a7);
}a8=a9._queryProcess(a5,a7);
a9.view(a8.data);
if(a8.total!==a0&&!a9.options.serverFiltering){a9._total=a8.total;
}a6=a6||{};
a6.items=a6.items||a9._view;
a9.trigger(h,a6);
},_queryProcess:function(a5,a6){return aE.process(a5,a6);
},_mergeState:function(a5){var a6=this;
if(a5!==a0){a6._pageSize=a5.pageSize;
a6._page=a5.page;
a6._sort=a5.sort;
a6._filter=a5.filter;
a6._group=a5.group;
a6._aggregate=a5.aggregate;
a6._skip=a6._currentRangeStart=a5.skip;
a6._take=a5.take;
if(a6._skip===a0){a6._skip=a6._currentRangeStart=a6.skip();
a5.skip=a6.skip();
}if(a6._take===a0&&a6._pageSize!==a0){a6._take=a6._pageSize;
a5.take=a6._take;
}if(a5.sort){a6._sort=a5.sort=at(a5.sort);
}if(a5.filter){a6._filter=a5.filter=ap(a5.filter);
}if(a5.group){a6._group=a5.group=aq(a5.group);
}if(a5.aggregate){a6._aggregate=a5.aggregate=an(a5.aggregate);
}}return a5;
},query:function(a6){var a8;
var a7=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;
if(a7||(this._data===a0||this._data.length===0)&&!this._destroyed.length){return this.read(this._mergeState(a6));
}var a5=this.trigger(aN,{type:"read"});
if(!a5){this.trigger(aB);
a8=this._queryProcess(this._data,this._mergeState(a6));
if(!this.options.serverFiltering){if(a8.total!==a0){this._total=a8.total;
}else{this._total=this._data.length;
}}this._aggregateResult=this._calculateAggregates(this._data,a6);
this.view(a8.data);
this.trigger(aM,{type:"read"});
this.trigger(h,{items:a8.data});
}return b.Deferred().resolve(a5).promise();
},fetch:function(a5){var a7=this;
var a6=function(a8){if(a8!==true&&Z(a5)){a5.call(a7);
}};
return this._query().then(a6);
},_query:function(a5){var a6=this;
return a6.query(D({},{page:a6.page(),pageSize:a6.pageSize(),sort:a6.sort(),filter:a6.filter(),group:a6.group(),aggregate:a6.aggregate()},a5));
},next:function(a5){var a7=this,a6=a7.page(),a8=a7.total();
a5=a5||{};
if(!a6||a8&&a6+1>a7.totalPages()){return;
}a7._skip=a7._currentRangeStart=a6*a7.take();
a6+=1;
a5.page=a6;
a7._query(a5);
return a6;
},prev:function(a5){var a7=this,a6=a7.page();
a5=a5||{};
if(!a6||a6===1){return;
}a7._skip=a7._currentRangeStart=a7._skip-a7.take();
a6-=1;
a5.page=a6;
a7._query(a5);
return a6;
},page:function(a7){var a6=this,a5;
if(a7!==a0){a7=ah.max(ah.min(ah.max(a7,1),a6.totalPages()),1);
a6._query({page:a7});
return;
}a5=a6.skip();
return a5!==a0?ah.round((a5||0)/(a6.take()||1))+1:a0;
},pageSize:function(a6){var a5=this;
if(a6!==a0){a5._query({pageSize:a6,page:1});
return;
}return a5.take();
},sort:function(a6){var a5=this;
if(a6!==a0){a5._query({sort:a6});
return;
}return a5._sort;
},filter:function(a6){var a5=this;
if(a6===a0){return a5._filter;
}a5.trigger("reset");
a5._query({filter:a6,page:1});
},group:function(a6){var a5=this;
if(a6!==a0){a5._query({group:a6});
return;
}return a5._group;
},total:function(){return parseInt(this._total||0,10);
},aggregate:function(a6){var a5=this;
if(a6!==a0){a5._query({aggregate:a6});
return;
}return a5._aggregate;
},aggregates:function(){var a5=this._aggregateResult;
if(Y(a5)){a5=this._emptyAggregates(this.aggregate());
}return a5;
},_emptyAggregates:function(a6){var a8={};
if(!Y(a6)){var a5={};
if(!W(a6)){a6=[a6];
}for(var a7=0;
a7<a6.length;
a7++){a5[a6[a7].aggregate]=0;
a8[a6[a7].field]=a5;
}}return a8;
},_wrapInEmptyGroup:function(a9){var a6=this.group(),ba,a5,a7,a8;
for(a7=a6.length-1,a8=0;
a7>=a8;
a7--){a5=a6[a7];
ba={value:a9.get(a5.field),field:a5.field,items:ba?[ba]:[a9],hasSubgroups:!!ba,aggregates:this._emptyAggregates(a5.aggregates)};
}return ba;
},totalPages:function(){var a6=this,a5=a6.pageSize()||a6.total();
return ah.ceil((a6.total()||0)/a5);
},inRange:function(a6,a7){var a8=this,a5=ah.min(a6+a7,a8.total());
if(!a8.options.serverPaging&&a8._data.length>0){return true;
}return a8._findRange(a6,a5).length>0;
},lastRange:function(){var a5=this._ranges;
return a5[a5.length-1]||{start:0,end:0,data:[]};
},firstItemUid:function(){var a5=this._ranges;
return a5.length&&a5[0].data.length&&a5[0].data[0].uid;
},enableRequestsInProgress:function(){this._skipRequestsInProgress=false;
},_timeStamp:function(){return new Date().getTime();
},range:function(bb,bd){this._currentRequestTimeStamp=this._timeStamp();
this._skipRequestsInProgress=true;
bb=ah.min(bb||0,this.total());
var be=this,a8=ah.max(ah.floor(bb/bd),0)*bd,ba=ah.min(a8+bd,be.total()),a6;
a6=be._findRange(bb,ah.min(bb+bd,be.total()));
if(a6.length){be._pending=a0;
be._skip=bb>be.skip()?ah.min(ba,(be.totalPages()-1)*be.take()):a8;
be._currentRangeStart=bb;
be._take=bd;
var a9=be.options.serverPaging;
var bc=be.options.serverSorting;
var a7=be.options.serverFiltering;
var a5=be.options.serverAggregates;
try{be.options.serverPaging=true;
if(!be._isServerGrouped()&&!(be.group()&&be.group().length)){be.options.serverSorting=true;
}be.options.serverFiltering=true;
be.options.serverPaging=true;
be.options.serverAggregates=true;
if(a9){be._detachObservableParents();
be._data=a6=be._observe(a6);
}be._process(a6);
}finally{be.options.serverPaging=a9;
be.options.serverSorting=bc;
be.options.serverFiltering=a7;
be.options.serverAggregates=a5;
}return;
}if(bd!==a0){if(!be._rangeExists(a8,ba)){be.prefetch(a8,bd,function(){if(bb>a8&&ba<be.total()&&!be._rangeExists(ba,ah.min(ba+bd,be.total()))){be.prefetch(ba,bd,function(){be.range(bb,bd);
});
}else{be.range(bb,bd);
}});
}else{if(a8<bb){be.prefetch(ba,bd,function(){be.range(bb,bd);
});
}}}},_findRange:function(bk,a7){var bn=this,bg=bn._ranges,bd,a6=[],bi,bm,bl,a8,be,bf,bc,bb=bn.options,bh=bb.serverSorting||bb.serverPaging||bb.serverFiltering||bb.serverGrouping||bb.serverAggregates,a9,a5,ba;
for(bi=0,ba=bg.length;
bi<ba;
bi++){bd=bg[bi];
if(bk>=bd.start&&bk<=bd.end){a5=0;
for(bm=bi;
bm<ba;
bm++){bd=bg[bm];
a9=bn._flatData(bd.data,true);
if(a9.length&&bk+a5>=bd.start){be=bd.data;
bf=bd.end;
if(!bh){var bj=aq(bn.group()||[]).concat(at(bn.sort()||[]));
bc=bn._queryProcess(bd.data,{sort:bj,filter:bn.filter()});
a9=be=bc.data;
if(bc.total!==a0){bf=bc.total;
}}bl=0;
if(bk+a5>bd.start){bl=bk+a5-bd.start;
}a8=a9.length;
if(bf>a7){a8=a8-(bf-a7);
}a5+=a8-bl;
a6=bn._mergeGroups(a6,be,bl,a8);
if(a7<=bd.end&&a5==a7-bk){return a6;
}}}break;
}}return[];
},_mergeGroups:function(a5,a7,a8,a9){if(this._isServerGrouped()){var ba=a7.toJSON(),a6;
if(a5.length){a6=a5[a5.length-1];
}ai(a6,ba,a8,a9);
return a5.concat(ba);
}return a5.concat(a7.slice(a8,a9));
},skip:function(){var a5=this;
if(a5._skip===a0){return a5._page!==a0?(a5._page-1)*(a5.take()||1):a0;
}return a5._skip;
},currentRangeStart:function(){return this._currentRangeStart||0;
},take:function(){return this._take||this._pageSize;
},_prefetchSuccessHandler:function(a8,a7,a5,a6){var a9=this;
var ba=a9._timeStamp();
return function(bb){var bc=false,bf={start:a8,end:a7,data:[],timestamp:a9._timeStamp()},bd,be,bg;
a9._dequeueRequest();
a9.trigger(aM,{response:bb,type:"read"});
bb=a9.reader.parse(bb);
bg=a9._readData(bb);
if(bg.length){for(bd=0,be=a9._ranges.length;
bd<be;
bd++){if(a9._ranges[bd].start===a8){bc=true;
bf=a9._ranges[bd];
break;
}}if(!bc){a9._ranges.push(bf);
}}bf.data=a9._observe(bg);
bf.end=bf.start+a9._flatData(bf.data,true).length;
a9._ranges.sort(function(bh,bi){return bh.start-bi.start;
});
a9._total=a9.reader.total(bb);
if(a6||(ba>=a9._currentRequestTimeStamp||!a9._skipRequestsInProgress)){if(a5&&bg.length){a5();
}else{a9.trigger(h,{});
}}};
},prefetch:function(a8,a9,a5){var ba=this,a7=ah.min(a8+a9,ba.total()),a6={take:a9,skip:a8,page:a8/a9+1,pageSize:a9,sort:ba._sort,filter:ba._filter,group:ba._group,aggregate:ba._aggregate};
if(!ba._rangeExists(a8,a7)){clearTimeout(ba._timeout);
ba._timeout=setTimeout(function(){ba._queueRequest(a6,function(){if(!ba.trigger(aN,{type:"read"})){ba.transport.read({data:ba._params(a6),success:ba._prefetchSuccessHandler(a8,a7,a5),error:function(){var bb=aQ.call(arguments);
ba.error.apply(ba,bb);
}});
}else{ba._dequeueRequest();
}});
},100);
}else{if(a5){a5();
}}},_multiplePrefetch:function(a8,a9,a5){var ba=this,a7=ah.min(a8+a9,ba.total()),a6={take:a9,skip:a8,page:a8/a9+1,pageSize:a9,sort:ba._sort,filter:ba._filter,group:ba._group,aggregate:ba._aggregate};
if(!ba._rangeExists(a8,a7)){if(!ba.trigger(aN,{type:"read"})){ba.transport.read({data:ba._params(a6),success:ba._prefetchSuccessHandler(a8,a7,a5,true)});
}}else{if(a5){a5();
}}},_rangeExists:function(a9,a5){var ba=this,a8=ba._ranges,a6,a7;
for(a6=0,a7=a8.length;
a6<a7;
a6++){if(a8[a6].start<=a9&&a8[a6].end>=a5){return true;
}}return false;
},_removeModelFromRanges:function(a8){var ba,a5,a9;
for(var a6=0,a7=this._ranges.length;
a6<a7;
a6++){a9=this._ranges[a6];
this._eachItem(a9.data,function(bb){ba=aI(bb,a8);
if(ba){a5=true;
}});
if(a5){break;
}}},_updateRangesLength:function(){var a9=0,a7,a8;
for(var a5=0,a6=this._ranges.length;
a5<a6;
a5++){a7=this._ranges[a5];
a7.start=a7.start-a9;
a8=this._flatData(a7.data,true).length;
a9=a7.end-a8;
a7.end=a7.start+a8;
}}});
var aZ={};
aZ.create=function(a7,a5,a6){var a8,a9=a7.transport?b.extend({},a7.transport):null;
if(a9){a9.read=typeof a9.read===aU?{url:a9.read}:a9.read;
if(a7.type==="jsdo"){a9.dataSource=a6;
}if(a7.type){ad.data.transports=ad.data.transports||{};
ad.data.schemas=ad.data.schemas||{};
if(!ad.data.transports[a7.type]){ad.logToConsole("Unknown DataSource transport type '"+a7.type+"'.\nVerify that registration scripts for this type are included after Kendo UI on the page.","warn");
}else{if(!ab(ad.data.transports[a7.type])){a8=new ad.data.transports[a7.type](D(a9,{data:a5}));
}else{a9=D(true,{},ad.data.transports[a7.type],a9);
}}a7.schema=D(true,{},ad.data.schemas[a7.type],a7.schema);
}if(!a8){a8=Z(a9.read)?a9:new aH(a9);
}}else{a8=new af({data:a7.data||[]});
}return a8;
};
u.create=function(bc){if(W(bc)||bc instanceof av){bc={data:bc};
}var a6=bc||{},a5=a6.data,a8=a6.fields,be=a6.table,bd=a6.select,a9,ba,bb={},a7;
if(!a5&&a8&&!a6.transport){if(be){a5=V(be,a8);
}else{if(bd){a5=U(bd,a8);
if(a6.group===a0&&a5[0]&&a5[0].optgroup!==a0){a6.group="optgroup";
}}}}if(ad.data.Model&&a8&&(!a6.schema||!a6.schema.model)){for(a9=0,ba=a8.length;
a9<ba;
a9++){a7=a8[a9];
if(a7.type){bb[a7.field]=a7;
}}if(!Y(bb)){a6.schema=D(true,a6.schema,{model:{fields:bb}});
}}a6.data=a5;
bd=null;
a6.select=null;
be=null;
a6.table=null;
return a6 instanceof u?a6:new u(a6);
};
function U(bf,a6){bf=b(bf)[0];
var bc=bf.options;
var a7=a6[0];
var be=a6[1];
var a5=[];
var a8,a9;
var ba;
var bb;
var bd;
var bg;
for(a8=0,a9=bc.length;
a8<a9;
a8++){bd={};
bb=bc[a8];
ba=bb.parentNode;
if(ba===bf){ba=null;
}if(bb.disabled||ba&&ba.disabled){continue;
}if(ba){bd.optgroup=ba.label;
}bd[a7.field]=bb.text;
bg=bb.attributes.value;
if(bg&&bg.specified){bg=bb.value;
}else{bg=bb.text;
}bd[be.field]=bg;
a5.push(bd);
}return a5;
}function V(bg,bb){var bh=b(bg)[0].tBodies[0],bf=bh?bh.rows:[],bc,bd,ba,a9=bb.length,a7=[],a6,be,a5,a8;
for(bc=0,bd=bf.length;
bc<bd;
bc++){be={};
a8=true;
a6=bf[bc].cells;
for(ba=0;
ba<a9;
ba++){a5=a6[ba];
if(a5.nodeName.toLowerCase()!=="th"){a8=false;
be[bb[ba].field]=a5.innerHTML;
}}if(!a8){a7.push(be);
}}return a7;
}var al=aj.define({idField:"id",init:function(a9){var a8=this,a7=a8.hasChildren||a9&&a9.hasChildren,a5="items",a6={};
ad.data.Model.fn.init.call(a8,a9);
if(typeof a8.children===aU){a5=a8.children;
}a6={schema:{data:a5,model:{hasChildren:a7,id:a8.idField,fields:a8.fields}}};
if(typeof a8.children!==aU){D(a6,a8.children);
}a6.data=a9;
if(!a7){a7=a6.schema.data;
}if(typeof a7===aU){a7=ad.getter(a7);
}if(Z(a7)){a8.hasChildren=!!a7.call(a8,a8);
}a8._childrenOptions=a6;
if(a8.hasChildren){a8._initChildren();
}a8._loaded=!!(a9&&a9._loaded);
},_initChildren:function(){var a7=this;
var a5,a8,a6;
if(!(a7.children instanceof O)){a5=a7.children=new O(a7._childrenOptions);
a8=a5.transport;
a6=a8.parameterMap;
a8.parameterMap=function(a9,ba){a9[a7.idField||"id"]=a7.id;
if(a6){a9=a6(a9,ba);
}return a9;
};
a5.parent=function(){return a7;
};
a5.bind(h,function(a9){a9.node=a9.node||a7;
a7.trigger(h,a9);
});
a5.bind(B,function(ba){var a9=a7.parent();
if(a9){ba.node=ba.node||a7;
a9.trigger(B,ba);
}});
a7._updateChildrenField();
}},append:function(a5){this._initChildren();
this.loaded(true);
this.children.add(a5);
},hasChildren:false,level:function(){var a6=this.parentNode(),a5=0;
while(a6&&a6.parentNode){a5++;
a6=a6.parentNode?a6.parentNode():null;
}return a5;
},_updateChildrenField:function(){var a5=this._childrenOptions.schema.data;
this[a5||"items"]=this.children.data();
},_childrenLoaded:function(){this._loaded=true;
this._updateChildrenField();
},load:function(){var a7={};
var a6="_query";
var a5,a8;
if(this.hasChildren){this._initChildren();
a5=this.children;
a7[this.idField||"id"]=this.id;
if(!this._loaded){a5._data=a0;
a6="read";
}a5.one(h,aC(this._childrenLoaded,this));
a8=a5[a6](a7);
}else{this.loaded(true);
}return a8||b.Deferred().resolve().promise();
},parentNode:function(){var a5=this.parent();
return a5.parent();
},loaded:function(a5){if(a5!==a0){this._loaded=a5;
}else{return this._loaded;
}},shouldSerialize:function(a5){return aj.fn.shouldSerialize.call(this,a5)&&a5!=="children"&&a5!=="_loaded"&&a5!=="hasChildren"&&a5!=="_childrenOptions";
}});
function s(a5){return function(){var a6=this._data,a7=u.fn[a5].apply(this,aQ.call(arguments));
if(this._data!=a6){this._attachBubbleHandlers();
}return a7;
};
}var O=u.extend({init:function(a6){var a5=al.define({children:a6});
u.fn.init.call(this,D(true,{},{schema:{modelBase:a5,model:a5}},a6));
this._attachBubbleHandlers();
},_attachBubbleHandlers:function(){var a5=this;
a5._data.bind(B,function(a6){a5.trigger(B,a6);
});
},remove:function(a6){var a7=a6.parentNode(),a5=this,a8;
if(a7&&a7._initChildren){a5=a7.children;
}a8=u.fn.remove.call(a5,a6);
if(a7&&!a5.data().length){a7.hasChildren=false;
}return a8;
},success:s("success"),data:s("data"),insert:function(a5,a6){var a7=this.parent();
if(a7&&a7._initChildren){a7.hasChildren=true;
a7._initChildren();
}return u.fn.insert.call(this,a5,a6);
},_find:function(a9,bb){var a7,a8,ba,a5;
var a6=this._data;
if(!a6){return;
}ba=u.fn[a9].call(this,bb);
if(ba){return ba;
}a6=this._flatData(this._data);
for(a7=0,a8=a6.length;
a7<a8;
a7++){a5=a6[a7].children;
if(!(a5 instanceof O)){continue;
}ba=a5[a9](bb);
if(ba){return ba;
}}},get:function(a5){return this._find("get",a5);
},getByUid:function(a5){return this._find("getByUid",a5);
}});
function T(bg,a9){var be=b(bg).children(),bb,bf,a7=[],bh,bk=a9[0].field,bl=a9[1]&&a9[1].field,bi=a9[2]&&a9[2].field,bc=a9[3]&&a9[3].field,bd,ba,bj,a6,a5;
function a8(bm,bn){return bm.filter(bn).add(bm.find(bn));
}for(bb=0,bf=be.length;
bb<bf;
bb++){bh={_loaded:true};
bd=be.eq(bb);
bj=bd[0].firstChild;
a5=bd.children();
bg=a5.filter("ul");
a5=a5.filter(":not(ul)");
ba=bd.attr("data-id");
if(ba){bh.id=ba;
}if(bj){bh[bk]=bj.nodeType==3?bj.nodeValue:a5.text();
}if(bl){bh[bl]=a8(a5,"a").attr("href");
}if(bc){bh[bc]=a8(a5,"img").attr("src");
}if(bi){a6=a8(a5,".k-sprite").prop("className");
bh[bi]=a6&&b.trim(a6.replace("k-sprite",""));
}if(bg.length){bh.items=T(bg.eq(0),a9);
}if(bd.attr("data-hasChildren")=="true"){bh.hasChildren=true;
}a7.push(bh);
}return a7;
}O.create=function(a9){a9=a9&&a9.push?{data:a9}:a9;
var a6=a9||{},a5=a6.data,a7=a6.fields,a8=a6.list;
if(a5&&a5._dataSource){return a5._dataSource;
}if(!a5&&a7&&!a6.transport){if(a8){a5=T(a8,a7);
}}a6.data=a5;
return a6 instanceof O?a6:new O(a6);
};
var e=ad.Observable.extend({init:function(a6,a8,a7){ad.Observable.fn.init.call(this);
this._prefetching=false;
this.dataSource=a6;
this.prefetch=!a7;
var a5=this;
a6.bind("change",function(){a5._change();
});
a6.bind("reset",function(){a5._reset();
});
this._syncWithDataSource();
this.setViewSize(a8);
},setViewSize:function(a5){this.viewSize=a5;
this._recalculate();
},at:function(a5){var a7=this.pageSize,a6=true;
if(a5>=this.total()){this.trigger("endreached",{index:a5});
return null;
}if(!this.useRanges){return this.dataSource.view()[a5];
}if(this.useRanges){if(a5<this.dataOffset||a5>=this.skip+a7){a6=this.range(Math.floor(a5/a7)*a7);
}if(a5===this.prefetchThreshold){this._prefetch();
}if(a5===this.midPageThreshold){this.range(this.nextMidRange,true);
}else{if(a5===this.nextPageThreshold){this.range(this.nextFullRange);
}else{if(a5===this.pullBackThreshold){if(this.offset===this.skip){this.range(this.previousMidRange);
}else{this.range(this.previousFullRange);
}}}}if(a6){return this.dataSource.at(a5-this.dataOffset);
}else{this.trigger("endreached",{index:a5});
return null;
}}},indexOf:function(a5){return this.dataSource.data().indexOf(a5)+this.dataOffset;
},total:function(){return parseInt(this.dataSource.total(),10);
},next:function(){var a5=this,a7=a5.pageSize,a6=a5.skip-a5.viewSize+a7,a8=ah.max(ah.floor(a6/a7),0)*a7;
this.offset=a6;
this.dataSource.prefetch(a8,a7,function(){a5._goToRange(a6,true);
});
},range:function(a8,a7){if(this.offset===a8){return true;
}var a5=this,a9=this.pageSize,ba=ah.max(ah.floor(a8/a9),0)*a9,a6=this.dataSource;
if(a7){ba+=a9;
}if(a6.inRange(a8,a9)){this.offset=a8;
this._recalculate();
this._goToRange(a8);
return true;
}else{if(this.prefetch){a6.prefetch(ba,a9,function(){a5.offset=a8;
a5._recalculate();
a5._goToRange(a8,true);
});
return false;
}}return true;
},syncDataSource:function(){var a5=this.offset;
this.offset=null;
this.range(a5);
},destroy:function(){this.unbind();
},_prefetch:function(){var a5=this,a7=this.pageSize,a8=this.skip+a7,a6=this.dataSource;
if(!a6.inRange(a8,a7)&&!this._prefetching&&this.prefetch){this._prefetching=true;
this.trigger("prefetching",{skip:a8,take:a7});
a6.prefetch(a8,a7,function(){a5._prefetching=false;
a5.trigger("prefetched",{skip:a8,take:a7});
});
}},_goToRange:function(a6,a5){if(this.offset!==a6){return;
}this.dataOffset=a6;
this._expanding=a5;
this.dataSource.range(a6,this.pageSize);
this.dataSource.enableRequestsInProgress();
},_reset:function(){this._syncPending=true;
},_change:function(){var a5=this.dataSource;
this.length=this.useRanges?a5.lastRange().end:a5.view().length;
if(this._syncPending){this._syncWithDataSource();
this._recalculate();
this._syncPending=false;
this.trigger("reset",{offset:this.offset});
}this.trigger("resize");
if(this._expanding){this.trigger("expand");
}delete this._expanding;
},_syncWithDataSource:function(){var a5=this.dataSource;
this._firstItemUid=a5.firstItemUid();
this.dataOffset=this.offset=a5.skip()||0;
this.pageSize=a5.pageSize();
this.useRanges=a5.options.serverPaging;
},_recalculate:function(){var a6=this.pageSize,a5=this.offset,a8=this.viewSize,a7=Math.ceil(a5/a6)*a6;
this.skip=a7;
this.midPageThreshold=a7+a6-1;
this.nextPageThreshold=a7+a8-1;
this.prefetchThreshold=a7+Math.floor(a6/3*2);
this.pullBackThreshold=this.offset-1;
this.nextMidRange=a7+a6-a8;
this.nextFullRange=a7;
this.previousMidRange=a5-a8;
this.previousFullRange=a7-a6;
}});
var d=ad.Observable.extend({init:function(a7,a6){var a5=this;
ad.Observable.fn.init.call(a5);
this.dataSource=a7;
this.batchSize=a6;
this._total=0;
this.buffer=new e(a7,a6*3);
this.buffer.bind({endreached:function(a8){a5.trigger("endreached",{index:a8.index});
},prefetching:function(a8){a5.trigger("prefetching",{skip:a8.skip,take:a8.take});
},prefetched:function(a8){a5.trigger("prefetched",{skip:a8.skip,take:a8.take});
},reset:function(){a5._total=0;
a5.trigger("reset");
},resize:function(){a5._total=Math.ceil(this.length/a5.batchSize);
a5.trigger("resize",{total:a5.total(),offset:this.offset});
}});
},syncDataSource:function(){this.buffer.syncDataSource();
},at:function(a7){var a5=this.buffer,a9=a7*this.batchSize,ba=this.batchSize,bb=[],a8;
if(a5.offset>a9){a5.at(a5.offset-1);
}for(var a6=0;
a6<ba;
a6++){a8=a5.at(a9+a6);
if(a8===null){break;
}bb.push(a8);
}return bb;
},total:function(){return this._total;
},destroy:function(){this.buffer.destroy();
this.unbind();
}});
D(true,ad.data,{readers:{json:t},Query:aE,DataSource:u,HierarchicalDataSource:O,Node:al,ObservableObject:aw,ObservableArray:av,LazyObservableArray:ae,LocalTransport:af,RemoteTransport:aH,Cache:f,DataReader:t,Model:aj,Buffer:e,BatchBuffer:d});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
